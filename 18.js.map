{"version":3,"file":"18.js","sources":["./node_modules/@svgr/webpack/dist/index.js!./src/icons/disconnect.svg","./src/App.styles.tsx","./src/App.tsx","./src/bootstrap.tsx","./src/components/Controller/Debugger/Debugger.tsx","./src/components/Controller/Header/Header.styles.tsx","./src/components/Controller/Header/Header.tsx","./src/components/Controller/Plugin/Plugin.tsx","./src/components/Controller/Plugins/Plugins.tsx","./src/components/Controller/Profiles/Profiles.styles.tsx","./src/components/Controller/Profiles/Profiles.tsx","./src/components/Deck/Deck.styles.tsx","./src/components/Deck/Deck.tsx","./src/components/Deck/DeckButtonView/DeckButtonView.tsx","./src/components/Deck/DeckFooterText/DeckFooterText.tsx","./src/components/SubSubTitle/SubSubTitle.tsx","./src/components/SubTitle/SubTitle.tsx","./src/contexts/AppContext.tsx","./src/hooks/useDeck.ts","./src/hooks/useDrawKey.ts","./src/hooks/useExtension.ts","./src/hooks/usePlugins.ts","./src/hooks/useProfiles.ts","./src/hooks/useStorage.ts","./src/reportWebVitals.ts","./src/utils/fetchPlugin.ts","./src/utils/getKeyImage.ts","./src/utils/initalise.ts","./src/utils/loadModule.ts","./src/utils/loadScript.ts","./src/utils/physicalDeck.ts","./src/utils/virtualDeck.ts"],"sourcesContent":["var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nconst SvgDisconnect = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  className: \"disconnect_svg__icon\",\n  viewBox: \"0 0 1024 1024\"\n}, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1M446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51zM260.3 209.4a8.03 8.03 0 0 0-11.3 0L209.4 249a8.03 8.03 0 0 0 0 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3z\"\n})));\nexport default SvgDisconnect;","import styled from \"styled-components\";\n\nexport const Wrapper = styled(\"div\")(() => ({\n  textAlign: \"center\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  height: \"100vh\",\n  width: \"100vw\",\n}));\n\n//@ts-expect-error styled ignore\nexport const Controller = styled(\"div\")<{ $isOpen: boolean }>({\n  display: ({ $isOpen }: { $isOpen: boolean }) => ($isOpen ? \"block\" : \"none\"),\n  marginLeft: 50,\n  padding: \"50px\",\n  paddingTop: \"30px\",\n  border: \"2px inset black\",\n  background: \"rgb(21 21 21)\",\n  borderRadius: \"20px\",\n  color: \"white\",\n  maxHeight: \"80vh\",\n  overflow: \"auto\",\n  maxWidth: 350,\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n});\n\nexport const Settings = styled(\"div\")({\n  color: \"white\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  padding: \"2px 0px\",\n});\n","import { Buffer } from \"buffer\";\nimport { Controller, Settings, Wrapper } from \"./App.styles\";\n\nimport { Deck } from \"./components/Deck/Deck\";\nimport { SubSubTitle } from \"./components/SubSubTitle/SubSubTitle\";\nimport { Profiles } from \"./components/Controller/Profiles/Profiles\";\nimport { Header } from \"./components/Controller/Header/Header\";\nimport { Debugger } from \"./components/Controller/Debugger/Debugger\";\nimport { useAppContext } from \"./contexts/AppContext\";\nimport { Plugins } from \"./components/Controller/Plugins/Plugins\";\nimport { Plugin } from \"./components/Controller/Plugin/Plugin\";\nimport classNames from \"classnames\";\n\n// injected Buffer\nwindow.Buffer = Buffer;\n\nconst App = () => {\n  const { deck, profiles } = useAppContext();\n\n  return (\n    <div\n      className={classNames({\n        wrapper: true,\n        hasDeck: !!deck.current,\n      })}\n      style={{\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n      }}\n    >\n      <Wrapper>\n        {deck.current ? (\n          <>\n            <Deck />\n            <Controller\n              $isOpen={deck.selectedKey !== undefined && deck.editMode}\n            >\n              <Header />\n              <Profiles />\n              {deck.selectedKey !== undefined && (\n                <>\n                  <Settings>\n                    <SubSubTitle>Currently selected key</SubSubTitle>\n                    <button className=\"s\" disabled>\n                      {deck.selectedKey}\n                    </button>\n                  </Settings>\n                  {/* TODO: <Settings>\n                    <SubSubTitle>Icon</SubSubTitle>\n                    <select required name=\"\" value=\"\" onChange={() => {}}>\n                      <option value=\"\" disabled hidden>\n                        inherit\n                      </option>\n                      <option value=\"1\" disabled>\n                        coming soon\n                      </option>\n                    </select>\n                  </Settings> */}\n                  <Settings>\n                    <SubSubTitle>Subtitle</SubSubTitle>\n                    <input\n                      value={\n                        profiles.profile.keys[deck.selectedKey]?.title || \"\"\n                      }\n                      onChange={(e) =>\n                        profiles.setTitle(deck.selectedKey!, e.target.value)\n                      }\n                      placeholder=\"key subtitle\"\n                    />\n                  </Settings>\n                  <Settings>\n                    <SubSubTitle>Plugin</SubSubTitle>\n                    <Plugins />\n                  </Settings>\n                  <Settings>\n                    <Plugin />\n                  </Settings>\n                </>\n              )}\n              <small style={{ opacity: 0.5 }}>\n                All changes are saved automaticly.\n              </small>\n              {window.location.search.includes(\"debug\") && <Debugger />}\n            </Controller>\n          </>\n        ) : (\n          <div style={{ color: \"white\" }}>\n            <div>\n              <h1>WEB DECK</h1>\n              <p>Connect your usb device or create a virtual device.</p>\n              <br />\n            </div>\n            <button onClick={deck.tryGetPhysicalDeck}>Connect</button>\n            <small> -or- </small>\n            <button onClick={deck.tryCreateVirtualDeck}>\n              Create Virtual Device\n            </button>\n          </div>\n        )}\n      </Wrapper>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport packageJSON from \"../package.json\";\n\nimport { AppContext } from \"./contexts/AppContext\";\nimport { usePlugins } from \"./hooks/usePlugins\";\nimport { useProfiles } from \"./hooks/useProfiles\";\nimport { useDeck } from \"./hooks/useDeck\";\nimport { useExtension } from \"./hooks/useExtension\";\n\nexport type AppContainerType = {\n  deck: ReturnType<typeof useDeck>;\n  profiles: ReturnType<typeof useProfiles>;\n  plugins: ReturnType<typeof usePlugins>;\n  extension: ReturnType<typeof useExtension>;\n};\n\nexport const Container = () => {\n  const extension = useExtension();\n  const profiles = useProfiles();\n  const plugins = usePlugins();\n  const deck = useDeck(profiles, plugins, extension);\n\n  return (\n    <AppContext.Provider value={{ deck, profiles, plugins, extension }}>\n      {window.location.search.includes(\"debug\") && (\n        <>\n          <div>version: {packageJSON.version}</div>\n          <div>{!plugins.initalised && <>initialising plugins...</>}</div>\n          <img\n            id=\"prev\"\n            src=\"\"\n            style={{ margin: 10, border: \"1px solid red\" }}\n          />\n        </>\n      )}\n\n      <App />\n\n      {window.location.search.includes(\"debug\") && (\n        <div style={{ position: \"absolute\", opacity: 0.5 }}>\n          <button\n            onClick={async () => {\n              const set = await extension.setData({\n                rand: Math.random() * 1000,\n              });\n              console.log({ set });\n            }}\n          >\n            set\n          </button>\n          <button\n            onClick={async () => {\n              const get = await extension.getData();\n              console.log({ get });\n            }}\n          >\n            get\n          </button>\n        </div>\n      )}\n    </AppContext.Provider>\n  );\n};\n\nconst root = ReactDOM.createRoot(\n  document.getElementById(\"root\") as HTMLElement\n);\n\nroot.render(<Container />);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { FC, useState } from \"react\";\nimport { SubSubTitle } from \"../../SubSubTitle/SubSubTitle\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\n// TODO: remove depedancy for subtitle\nexport const Debugger: FC = () => {\n  const { profiles, plugins } = useAppContext();\n  const [open, setIsOpen] = useState(false);\n  return (\n    <div>\n      <div\n        style={{\n          justifyContent: \"space-between\",\n          display: \"flex\",\n          alignItems: \"center\",\n          padding: \"0 0 8px 0\",\n        }}\n      >\n        <SubSubTitle>debugging</SubSubTitle>\n        <button className=\"s\" onClick={() => setIsOpen(!open)}>\n          {open ? \" close\" : \"open\"}\n        </button>\n      </div>\n      <div style={{ display: open ? \"block\" : \"none\", textAlign: \"left\" }}>\n        <span>Profiles:</span>\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\n          {JSON.stringify(profiles.profiles, null, 4)}\n        </pre>\n        <span>Plugins:</span>\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\n          {JSON.stringify(plugins.plugins, null, 4)}\n        </pre>\n        <span>Manifest:</span>\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\n          {JSON.stringify(plugins.manifests, null, 4)}\n        </pre>\n      </div>\n    </div>\n  );\n};\n","import { styled } from \"styled-components\";\n\nexport const HeaderWrapper = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  minWidth: 350,\n  paddingBottom: \"8px\",\n  marginBottom: \"10px\",\n  borderBottom: \"1px solid #474747\",\n});\n","import { HeaderWrapper } from \"./Header.styles\";\nimport { SubTitle } from \"../../SubTitle/SubTitle\";\nimport { FC } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Header: FC = () => {\n  const { deck } = useAppContext();\n  return (\n    <HeaderWrapper>\n      <SubTitle>Settings</SubTitle>\n      <button\n        title=\"close\"\n        className=\"s\"\n        onClick={() => {\n          deck.setSelectedKey(undefined);\n          if (deck.isVirtual) {\n            deck.setEditMode(false);\n          }\n        }}\n      >\n        ×\n      </button>\n    </HeaderWrapper>\n  );\n};\n","import { FC, lazy, useEffect, useState, Suspense } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\nimport { EXTENSION_ID } from \"../../../hooks/useExtension\";\n\ntype FederatedComponent = FC<{\n  key: string;\n  config: unknown;\n  setConfig: (config: Record<string | number | symbol, unknown>) => void;\n  icon?: string;\n  setIcon?: (icon: string) => void;\n}>;\n\nexport const Plugin: FC = () => {\n  const { plugins, profiles, deck, extension } = useAppContext();\n  const [Plugin, setPlugin] = useState<FederatedComponent | null>(null);\n\n  const key = deck.selectedKey!;\n  const keyConfig = profiles.profile.keys[key];\n  const module = plugins.modules[keyConfig?.plugin];\n  const manifest = plugins.manifests?.[keyConfig?.plugin];\n  const loaded = module?.loaded;\n\n  useEffect(() => {\n    if (module?.module) {\n      const Component = lazy(() => {\n        return Promise.resolve(module.module!);\n      });\n      setPlugin(Component);\n    } else {\n      setPlugin(null);\n    }\n  }, [module]);\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        maxHeight: \"400px\",\n        minHeight: \"100px\",\n        outline: \"none\",\n        margin: \"8px 0\",\n        border: \"2px solid black\",\n        position: \"relative\",\n        textAlign: \"left\",\n        borderRadius: 10,\n        overflow: \"hidden\",\n      }}\n    >\n      {manifest?.extension_required === true &&\n      extension.installed === false ? (\n        <div\n          style={{\n            marginBottom: 8,\n            padding: 8,\n            border: \"1px solid black\",\n            background: \"orange\",\n            borderRadius: 8,\n          }}\n        >\n          <span>This plugin required the </span>\n          <a\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            href={`https://chrome.google.com/webstore/detail/${EXTENSION_ID}`}\n          >\n            Webdeck Extension\n          </a>{\" \"}\n        </div>\n      ) : null}\n      <Suspense fallback=\"Loading System\">\n        {Plugin && keyConfig?.config && module ? (\n          <Plugin\n            key={keyConfig.plugin + key}\n            config={keyConfig.config}\n            setConfig={(config: Record<string | number | symbol, unknown>) => {\n              profiles.setConfig(key, config);\n            }}\n          />\n        ) : loaded === false ? (\n          <div\n            style={{\n              display: \"flex\",\n              textAlign: \"center\",\n              width: \"100%\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              height: \"100px\",\n              color: \"#cb0000\",\n              background: \"#f7a5a5\",\n            }}\n          >\n            Failed to load {keyConfig?.plugin} plugin!\n          </div>\n        ) : (\n          <div></div>\n        )}\n      </Suspense>\n    </div>\n  );\n};\n","import { FC } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Plugins: FC = () => {\n  const { profiles, deck, plugins } = useAppContext();\n  const selectedPlugin = profiles.profile.keys[deck.selectedKey!]?.plugin;\n\n  return (\n    <div>\n      <select\n        name=\"plugins\"\n        id=\"plugins\"\n        title=\"select plugin\"\n        value={selectedPlugin || \"\"}\n        onChange={(e) => {\n          profiles.setPlugin(e.target.value, deck.selectedKey!);\n        }}\n      >\n        <option value=\"\">select...</option>\n        {plugins.plugins.map((plugin) => {\n          return (\n            <option key={plugin.name} value={plugin.enum || plugin.name}>\n              {plugin.name} {plugin.creator && `@${plugin.creator}`}\n            </option>\n          );\n        })}\n      </select>\n      <button\n        title=\"remove plugin\"\n        className=\"s\"\n        onClick={() =>\n          plugins.promptRemovePlugin(selectedPlugin, () => {\n            // once pluging removed remove bindings\n            profiles.removePlugin(selectedPlugin);\n          })\n        }\n        disabled={!selectedPlugin}\n      >\n        -\n      </button>\n      <button\n        title=\"add plugin\"\n        className=\"s\"\n        onClick={plugins.promptAddPlugin}\n      >\n        +\n      </button>\n    </div>\n  );\n};\n","import styled from \"styled-components\";\n\nexport const ProfilesWrapper = styled(\"div\")({\n  color: \"white\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  paddingBottom: \"8px\",\n  marginBottom: \"5px\",\n  borderBottom: \"1px solid #474747\",\n});\n","import { FC } from \"react\";\nimport { SubTitle } from \"../../SubTitle/SubTitle\";\nimport { ProfilesWrapper } from \"./Profiles.styles\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Profiles: FC = () => {\n  const { profiles } = useAppContext();\n  return (\n    <ProfilesWrapper>\n      <SubTitle>Profiles</SubTitle>\n      <div>\n        <select\n          name=\"profile\"\n          id=\"profile\"\n          title=\"select profile\"\n          value={profiles.profileName}\n          onChange={(e) => profiles.setProfileName(e.target.value)}\n        >\n          {Object.keys(profiles.profiles).map((profileKey) => {\n            return (\n              <option key={profileKey} value={profileKey}>\n                {profileKey}\n              </option>\n            );\n          })}\n        </select>\n        <button\n          disabled={profiles.profileName === \"default\"}\n          title=\"remove profile\"\n          className=\"s\"\n          onClick={profiles.promptRemoveProfile}\n        >\n          -\n        </button>\n        <button\n          title=\"new profile\"\n          className=\"s\"\n          onClick={profiles.promptAddProfile}\n        >\n          +\n        </button>\n        <button\n          title=\"export profile\"\n          className=\"s\"\n          onClick={profiles.promptExportProfile}\n        >\n          ↗\n        </button>\n      </div>\n    </ProfilesWrapper>\n  );\n};\n","import styled from \"styled-components\";\nimport Disconnect from \"../../icons/disconnect.svg\";\n\nexport const DeckWrapper = styled(\"div\")({\n  padding: \"50px\",\n  paddingTop: \"30px\",\n  border: \"2px inset black\",\n  background: \"rgb(21 21 21)\",\n  borderRadius: \"20px\",\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n  position: \"relative\",\n});\n\nexport const DeckTitle = styled(\"h1\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 20,\n  paddingBottom: 20,\n  paddingTop: 0,\n  margin: 0,\n  color: \"white\",\n  textTransform: \"uppercase\",\n});\n\nexport const DeckLayout = styled(\"div\")<{ $columns: number }>(\n  ({ $columns }) => ({\n    display: \"grid\",\n    gap: \"20px\",\n    gridTemplateColumns: `repeat(${$columns}, min-content)`,\n  })\n);\n\nexport const DeckButton = styled(\"button\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  border: \"2px solid #888888\",\n  width: \"77px\",\n  height: \"77px\",\n  borderRadius: 10,\n  // testing\n  background: \"red\",\n  position: \"relative\",\n  padding: \"0\",\n  backgroundColor: \"rgb(37 37 37)\",\n  outline: \"4px solid black\",\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n  transition: \".13s ease-in-out\",\n  cursor: \"pointer\",\n  // active\n  \"&:active:not(.editMode), &.active\": {\n    boxShadow: \"none\",\n    border: \"0px solid\",\n    backgroundColor: \"rgb(35 35 35)\",\n    \"& > div\": {\n      boxShadow: \"none\",\n      border: \"0px solid\",\n      \"& > *\": {\n        transition: \".13s ease-in-out\",\n        transform: \"scale(0.9)\",\n      },\n    },\n  },\n  \"&.active\": {\n    //backgroundColor: \"rgb(255 0 0)\",\n  },\n  \"&.selected\": {\n    outline: \"2px dotted #ffffff\",\n    outlineOffset: \"8px\",\n  },\n  color: \"white\",\n});\n\nexport const DisconnectButton = styled(Disconnect)({\n  marginLeft: 16,\n  marginTop: 3,\n  height: 18,\n  width: 18,\n  fill: \"white\",\n  opacity: 0.5,\n  cursor: \"pointer\",\n  transition: \"all 300ms\",\n  \"&:hover\": {\n    opacity: 1,\n    fill: \"red\",\n  },\n});\n\nexport const DeckButtonContent = styled(\"div\")({\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  boxShadow:\n    \"rgb(221, 221, 221) 0px 0px 0px inset, rgb(47 47 47) -2px -2px 0px\",\n  borderRadius: 10,\n  transition: \".13s ease-in-out\",\n  zIndex: 1,\n  overflow: \"hidden\",\n  \"& > *\": {\n    transition: \".13s ease-in-out\",\n    transform: \"scale(1)\",\n  },\n});\n","import { FC } from \"react\";\nimport classNames from \"classnames\";\nimport {\n  DeckButton,\n  DeckButtonContent,\n  DeckLayout,\n  DeckTitle,\n  DeckWrapper,\n  DisconnectButton,\n} from \"./Deck.styles\";\nimport { useAppContext } from \"../../contexts/AppContext\";\nimport { DeckFooterText } from \"./DeckFooterText/DeckFooterText\";\nimport { useDrawKey } from \"../../hooks/useDrawKey\";\nimport { DeckButtonView } from \"./DeckButtonView/DeckButtonView\";\n\nexport const Deck: FC = () => {\n  const { deck } = useAppContext();\n  const { getContext } = useDrawKey();\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <DeckWrapper>\n        <DeckTitle>\n          {deck.current?.PRODUCT_NAME}{\" \"}\n          <span title=\"Disconect device\">\n            <DisconnectButton onClick={() => deck.disconect()} />\n          </span>\n        </DeckTitle>\n        <DeckLayout $columns={deck.current?.KEY_COLUMNS || 0}>\n          {Array.from({ length: deck.current?.NUM_KEYS || 0 }).map(\n            (_, keyIndex) => (\n              <DeckButton\n                key={keyIndex}\n                onMouseDown={() => {\n                  if (deck.isVirtual && !deck.editMode) {\n                    deck.onMouseDown(keyIndex);\n                  }\n                }}\n                onMouseUp={() => {\n                  if (deck.isVirtual && !deck.editMode) {\n                    deck.onMouseUp(keyIndex);\n                  }\n                }}\n                onClick={() => {\n                  if (deck.editMode) {\n                    deck.setSelectedKey(keyIndex);\n                  }\n                }}\n                className={classNames({\n                  // active: deck.pressedMap[keyIndex],\n                  selected: deck.editMode && deck.selectedKey === keyIndex,\n                  editMode: deck.editMode,\n                })}\n              >\n                <DeckButtonContent>\n                  <DeckButtonView getContext={getContext} keyIndex={keyIndex} />\n                </DeckButtonContent>\n              </DeckButton>\n            )\n          )}\n        </DeckLayout>\n      </DeckWrapper>\n      <DeckFooterText />\n    </div>\n  );\n};\n","import { useEffect } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\nimport { useDrawKey } from \"../../../hooks/useDrawKey\";\n\nexport const DeckButtonView = ({\n  getContext,\n  keyIndex,\n}: {\n  getContext: ReturnType<typeof useDrawKey>[\"getContext\"];\n  keyIndex: number;\n}) => {\n  const { deck, plugins, profiles } = useAppContext();\n  const context = getContext(keyIndex);\n  const key = profiles.profile.keys[keyIndex];\n  const bespoke = plugins.manifests[key?.plugin]?.bespoke;\n\n  // @optimal way to update the deckkey screen\n  useEffect(() => {\n    if (deck.isPhysical && !bespoke) {\n      deck.physicalDeck?.fillKeyBuffer(\n        keyIndex,\n        Buffer.from(context.getData().data),\n        {\n          format: \"rgba\",\n        }\n      );\n    }\n  }, [deck.isPhysical, key?.title, key?.icon, key?.plugin, key?.loading]);\n\n  return (\n    <img\n      id={`keyid-${keyIndex}`}\n      {...(!bespoke ? { src: context.getSrc() } : {})}\n    />\n  );\n};\n","import { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const DeckFooterText = () => {\n  const { deck } = useAppContext();\n  if (!deck.isVirtual) return null;\n\n  return (\n    <small\n      style={{\n        color: \"white\",\n        paddingTop: 20,\n        opacity: 0.2,\n        fontSize: 12,\n      }}\n    >\n      You are currently in {deck.editMode ? \"Edit Mode\" : \"Preview Mode\"}.\n      Switch to{\" \"}\n      <a\n        className=\"a\"\n        href=\"#\"\n        onClick={(e) => {\n          e.preventDefault();\n          deck.setEditMode(!deck.editMode);\n          if (!deck.editMode && !deck.selectedKey) {\n            deck.setSelectedKey(0);\n          }\n        }}\n      >\n        {deck.editMode ? \"Preview Mode\" : \"Edit Mode\"}\n      </a>{\" \"}\n      to {deck.editMode ? \"test\" : \"edit\"} it.\n    </small>\n  );\n};\n","import styled from \"styled-components\";\n\nexport const SubSubTitle = styled(\"h3\")({\n  display: \"inline-block\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 14,\n  padding: 0,\n  margin: 0,\n  color: \"white\",\n});\n","import styled from \"styled-components\";\n\nexport const SubTitle = styled(\"h2\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 16,\n  padding: 0,\n  margin: 0,\n  color: \"white\",\n  textTransform: \"uppercase\",\n});\n","import { createContext, useContext } from \"react\";\nimport { AppContainerType } from \"../bootstrap\";\n\nexport const AppContext = createContext({} as AppContainerType);\n\nexport const useAppContext = () => {\n  return useContext(AppContext);\n};\n","import { useCallback, useEffect, useState } from \"react\";\nimport {\n  VirtualDeck,\n  getVirtualDeck,\n  requestVirtualDecks,\n} from \"../utils/virtualDeck\";\nimport { usePlugins } from \"./usePlugins\";\nimport { useProfiles } from \"./useProfiles\";\nimport {\n  PhysicalDeck,\n  getPhysicalDeck,\n  requestPhysicalDeck,\n} from \"../utils/physicalDeck\";\nimport { useDrawKey } from \"./useDrawKey\";\nimport { DrawKey } from \"../types/Module\";\nimport { useExtension } from \"./useExtension\";\n\ntype Initer = Record<string, { plugin: string; destructor: () => void }>;\n\nexport const useDeck = (\n  profiles: ReturnType<typeof useProfiles>,\n  plugins: ReturnType<typeof usePlugins>,\n  extension: ReturnType<typeof useExtension>\n) => {\n  const [editMode, setEditMode] = useState(true);\n  const [selectedKey, setSelectedKey] = useState<number | undefined>(0);\n  const [virtualDeck, setVirtualDeck] = useState<VirtualDeck | undefined>();\n  const [physicalDeck, setPhysicalDeck] = useState<PhysicalDeck | undefined>();\n  const [inited, setInited] = useState<Initer>({});\n  const { getContext } = useDrawKey();\n\n  const current = physicalDeck || virtualDeck;\n\n  const onMouseDown = (keyIndex: number) => {\n    // if (streamDeck) {\n    //   // streamDeck!.fillKeyColor(keyIndex, 255, 0, 0);\n    // } else {\n    //   console.log(\"pressed key\", keyIndex);\n    // }\n    console.log(\"pressed key\", keyIndex);\n  };\n\n  const onMouseUp = (keyIndex: number) => {\n    const key = profiles.profile.keys[keyIndex];\n    if (key?.plugin) {\n      const module = plugins.modules[key.plugin]?.module;\n      try {\n        module!.onPress!({\n          ...key,\n          keyIndex,\n          setIcon: (icon: string) => profiles.setIcon(keyIndex, icon),\n          extension: {\n            fetch: extension.fetch,\n            data: extension.metadata,\n            installed: extension.installed,\n          },\n        });\n      } catch (e) {\n        console.warn(\n          `Webdeck: Failed to execute ${key.plugin}. Have you added and exported onPress() functions in you plugin?`,\n          e\n        );\n      }\n    }\n  };\n\n  const drawKey = (keyIndex: number, callback: DrawKey) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = current?.ICON_SIZE || 72;\n    canvas.height = current?.ICON_SIZE || 72;\n    const ctx = canvas.getContext(\"2d\")!;\n    ctx.save();\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    callback({ canvas, ctx });\n\n    if (physicalDeck) {\n      const data = ctx.getImageData(0, 0, canvas.width, canvas.height, {\n        colorSpace: \"srgb\",\n      }).data;\n      physicalDeck?.fillKeyBuffer(keyIndex, Buffer.from(data), {\n        format: \"rgba\",\n      });\n    }\n\n    document\n      .getElementById(`keyid-${keyIndex}`)\n      ?.setAttribute(\"src\", canvas.toDataURL());\n  };\n\n  const tryGetPhysicalDeck = useCallback(async () => {\n    const [deck] = await requestPhysicalDeck();\n    if (deck) {\n      setPhysicalDeck(deck);\n    } else {\n      console.error(\"Couldn't get a Physical Deck\");\n    }\n  }, []);\n\n  const tryCreateVirtualDeck = useCallback(() => {\n    const [deck] = requestVirtualDecks();\n    if (deck) {\n      setVirtualDeck(deck);\n    } else {\n      console.error(\"Couldn't get a Virtual Deck\");\n    }\n  }, []);\n\n  const disconect = useCallback(async () => {\n    if (physicalDeck) {\n      physicalDeck.close();\n      setPhysicalDeck(undefined);\n    } else if (virtualDeck) {\n      virtualDeck.close();\n      setVirtualDeck(undefined);\n    }\n  }, [physicalDeck, virtualDeck]);\n\n  useEffect(() => {\n    const execute = async () => {\n      const [pdeck] = await getPhysicalDeck();\n      if (pdeck) {\n        setPhysicalDeck(pdeck);\n      } else {\n        const [vdeck] = getVirtualDeck();\n        if (vdeck) {\n          setVirtualDeck(vdeck);\n        }\n      }\n    };\n    execute();\n  }, []);\n\n  // @needs optimisations\n  useEffect(() => {\n    if (physicalDeck) {\n      physicalDeck.on(\"down\", onMouseDown);\n      physicalDeck.on(\"up\", onMouseUp);\n      // draw keys once to get updated\n\n      physicalDeck?.drawKeys((key) => {\n        if (\n          plugins.manifests[profiles.profile.keys[key]?.plugin]?.bespoke !==\n          true\n        ) {\n          const context = getContext(\n            key,\n            physicalDeck,\n            profiles,\n            plugins\n          ).getData();\n          physicalDeck?.fillKeyBuffer(key, Buffer.from(context.data), {\n            format: \"rgba\",\n          });\n        }\n      });\n    }\n\n    return () => {\n      physicalDeck?.off(\"down\", onMouseDown);\n      physicalDeck?.off(\"up\", onMouseUp);\n    };\n  }, [plugins.initalised, plugins, profiles]);\n\n  // @needs optimisations\n  useEffect(() => {\n    if (plugins.initalised) {\n      const nextInited = {} as Initer;\n      Object.keys(profiles.profile.keys).map((key) => {\n        const keyConf = profiles.profile.keys[key];\n        const initKeyConf = inited[key];\n        const NOD = () => console.log(\"@destructor\", keyConf, key);\n        const module = plugins.modules?.[keyConf?.plugin]?.module;\n        const props = {\n          drawKey: (callback: DrawKey) => drawKey(parseInt(key), callback),\n          config: keyConf?.config,\n          getConfig: () => profiles.getConfig(parseInt(key)),\n          extension: {\n            fetch: extension.fetch,\n            data: extension.metadata,\n            installed: extension.installed,\n          },\n        };\n\n        if (initKeyConf) {\n          // theres something here already\n          if (initKeyConf.plugin === keyConf?.plugin) {\n            // plugin has not changed\n            nextInited[key] = initKeyConf;\n          } else {\n            // plugin has changed, destruct and reinitalised new code\n            initKeyConf.destructor?.();\n            if (keyConf) {\n              nextInited[key] = {\n                plugin: keyConf.plugin,\n                destructor: module?.init?.(props) || NOD,\n              };\n            }\n          }\n        } else {\n          // no prev initaliation, if we have a value we should initalised\n          if (keyConf) {\n            nextInited[key] = {\n              plugin: keyConf.plugin,\n              destructor: module?.init?.(props) || NOD,\n            };\n          }\n        }\n      });\n\n      setInited(nextInited);\n    }\n  }, [plugins.initalised, profiles.profile.keys]);\n\n  return {\n    isVirtual: !!virtualDeck,\n    isPhysical: !!physicalDeck,\n    initalised: !!current,\n    physicalDeck,\n    virtualDeck,\n    current,\n    selectedKey,\n    editMode,\n    inited,\n\n    onMouseDown,\n    onMouseUp,\n    setSelectedKey,\n\n    disconect,\n\n    tryGetPhysicalDeck,\n    tryCreateVirtualDeck,\n    setEditMode,\n  };\n};\n","import { getKeyImage } from \"../utils/getKeyImage\";\nimport { useAppContext } from \"../contexts/AppContext\";\n\nexport const useDrawKey = () => {\n  const { deck, profiles, plugins } = useAppContext();\n  const getContext = (\n    keyIndex: number,\n    // injectable.\n    _deck = deck.current,\n    _profiles = profiles,\n    _plugins = plugins\n  ) => {\n    const config = _profiles.profile.keys[keyIndex];\n    const plugin = _profiles.profile.keys[keyIndex]?.plugin;\n    const icon =\n      _plugins.manifests[plugin]?.icons?.[\n        _profiles.profile.keys[keyIndex]?.icon\n      ]?.icon || _plugins.manifests[plugin]?.icons?.[\"default\"]?.icon;\n\n    const width = _deck?.ICON_SIZE || 72;\n    const height = _deck?.ICON_SIZE || 72;\n    const module = plugins?.modules[plugin];\n\n    const context = getKeyImage({\n      width,\n      height,\n      key: keyIndex,\n      config,\n      icon,\n      module,\n    });\n\n    return {\n      getSrc: () => context.canvas.toDataURL(),\n      getData: () =>\n        context.ctx.getImageData(0, 0, width, height, {\n          colorSpace: \"srgb\",\n        }),\n      context,\n    };\n  };\n\n  return {\n    getContext,\n  };\n};\n","import { useEffect, useState } from \"react\";\n\nexport const EXTENSION_ID = \"njlliemmhglnlfelmmoljccgpdipigff\";\n\nexport const useExtension = () => {\n  const [installed, setInstalled] = useState<null | boolean>(null);\n  const [metadata, setMetaData] = useState({});\n\n  const getExtenison = () => {\n    if (window.chrome?.runtime) {\n      chrome.runtime.sendMessage(\n        EXTENSION_ID,\n        { type: \"health\" },\n        (response) => {\n          setInstalled(true);\n          setMetaData(response);\n        }\n      );\n    } else {\n      setInstalled(false);\n      setMetaData({});\n    }\n  };\n\n  const fetch = async (\n    url: string,\n    {\n      method,\n      body,\n      options,\n    }: {\n      method?: string;\n      body?: string;\n      options?: Record<string, unknown>;\n    } = { method: \"get\" }\n  ) => {\n    return new Promise((resolve) => {\n      if (window.chrome?.runtime) {\n        chrome?.runtime?.sendMessage(\n          EXTENSION_ID,\n          { type: \"fetch\", method, url, body, ...options },\n          (response) => resolve(response)\n        );\n      } else {\n        resolve({ error: true, e: \"no_extension\" });\n      }\n    });\n  };\n\n  const setData = async (data: unknown) => {\n    return new Promise((resolve) => {\n      if (window.chrome?.runtime) {\n        chrome.runtime.sendMessage(\n          EXTENSION_ID,\n          { type: \"set.data\", data: { data } },\n          (resp) => {\n            resolve(resp);\n          }\n        );\n      } else {\n        resolve(false);\n      }\n    });\n  };\n\n  const getData = async () => {\n    return new Promise((resolve) => {\n      if (window.chrome?.runtime) {\n        chrome.runtime.sendMessage(\n          EXTENSION_ID,\n          { type: \"get.data\", keys: \"data\" },\n          (r) => {\n            resolve(r);\n          }\n        );\n      } else {\n        resolve(false);\n      }\n    });\n  };\n\n  const syncData = (event: MessageEvent<unknown>) => {\n    console.log(\"reactor hawwow\", event);\n  };\n\n  useEffect(() => {\n    getExtenison();\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener(\"message\", syncData, false);\n    return () => {\n      window.removeEventListener(\"message\", syncData, false);\n    };\n  }, []);\n\n  return { installed, getExtenison, fetch, metadata, setData, getData };\n};\n","import { useEffect, useState } from \"react\";\nimport { Module, ModuleManifest } from \"../types/Module\";\nimport { ModulesResolution, initalise } from \"../utils/initalise\";\nimport { Plugin } from \"../types/Plugin\";\nimport { useStorage } from \"./useStorage\";\nimport { fetchPlugin } from \"../utils/fetchPlugin\";\n\nconst PLUGIN_SCOPE = \"./Plugin\";\nconst STORAGE_KEY_PLUGINS = \"plugins\";\nconst STORAGE_KEY_CONFIG = \"manifest\";\nconst MODULE_CATCHE = new Map<string, Module>();\n\nexport const usePlugins = () => {\n  const [plugins, setPlugins] = useStorage<Plugin[]>(STORAGE_KEY_PLUGINS);\n  const [manifests, setManifests] = useStorage<Record<string, ModuleManifest>>(\n    STORAGE_KEY_CONFIG,\n    {} as never[]\n  );\n  const [initalised, setInitalised] = useState(false);\n  const [modules, setModules] = useState<ModulesResolution>({});\n  const pluginsById = plugins.reduce(\n    (prev, current) => ({ ...prev, [current.name]: current }),\n    {} as Record<string, Plugin>\n  );\n\n  const addPlugin = (plugin: Plugin) => {\n    setPlugins([...plugins, plugin]);\n  };\n\n  const promptAddPlugin = async () => {\n    const input = prompt(\n      \"Add url to plugin. List of plugins: https://github.com/search?q=topic:webdeck-plugin\"\n    );\n    if (input) {\n      const plugin = await fetchPlugin(input);\n      if (plugin) addPlugin(plugin);\n    }\n  };\n\n  const promptRemovePlugin = (name: string, callback: () => void) => {\n    const resp = confirm(\n      \"Are you sure you want to remove this plugin and everywhere where it was used? This action is not reversable.\"\n    );\n    if (resp) {\n      setPlugins(plugins.filter((plugin) => plugin.enum !== name));\n      callback();\n    }\n  };\n\n  // const getModule = (name: string) => {\n  //   const moduleKey = `${PLUGIN_SCOPE}-${name}`;\n  //   return MODULE_CATCHE.get(moduleKey);\n  // };\n\n  // const getModules = () => {\n  //   return MODULE_CATCHE;\n  // };\n\n  // initalise plugins\n  useEffect(() => {\n    setInitalised(false);\n    // module federation config\n    const config = {\n      name: \"webdeck\",\n      remotes: plugins.map((plugin) => {\n        return {\n          name: plugin.enum,\n          entry: `${plugin.url}remoteEntry.js`,\n        };\n      }),\n    };\n    // configure all plugins\n    initalise(config, PLUGIN_SCOPE, MODULE_CATCHE).then((modules) => {\n      setModules(modules);\n      setInitalised(true);\n      setManifests(\n        Object.keys(modules).reduce(\n          (prev, key) => ({\n            ...prev,\n            [key]: modules[key]?.module?.manifest || {},\n          }),\n          {}\n        )\n      );\n    });\n  }, [plugins]);\n\n  return {\n    initalised,\n    plugins,\n    pluginsById,\n    modules,\n    manifests,\n    setPlugins,\n    addPlugin,\n    promptAddPlugin,\n    promptRemovePlugin,\n  };\n};\n","import { useState } from \"react\";\n\nexport type Config = Record<string | number | symbol, unknown>;\n\nexport type Key = {\n  plugin: string;\n  config: Config;\n  icon: string;\n  title: string;\n  loading: boolean;\n};\n\ntype Profiles = {\n  [key: string]: Profile;\n};\n\nexport type Profile = {\n  keys: {\n    [key: string]: Key;\n  };\n  device?: string;\n  type?: string;\n};\n\nconst STORAGE_KEY = \"profiles\";\n\nconst getProfiles = () => {\n  const plugins = localStorage.getItem(STORAGE_KEY);\n  if (plugins) {\n    return { ...JSON.parse(plugins) };\n  }\n  return { default: { keys: {} } };\n};\n\nconst storeProfiles = (profiles: Profiles) => {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(profiles));\n};\n\nconst getProfileName = () => {\n  return \"default\";\n};\n\nexport const useProfiles = () => {\n  const [profiles, setProfiles] = useState<Profiles>(getProfiles());\n  const [profileName, setProfileName] = useState<string>(getProfileName);\n  const profile = profiles[profileName];\n\n  const updateProfile = (obj: Profile) => {\n    setProfiles((old) => {\n      const nextProfiles = {\n        ...old,\n        [profileName]: {\n          ...old[profileName],\n          ...obj,\n        },\n      };\n      storeProfiles(nextProfiles);\n      return nextProfiles;\n    });\n  };\n\n  const setPlugin = (name: string, keyIndex: number) => {\n    const config = profile.keys[keyIndex]?.config;\n    if (config && Object.values(config).length > 0) {\n      const resp = confirm(\n        \"You have previus configured a plugin in this slot, this action will replace and remove that config. This action is not reversable. Are you sure?\"\n      );\n      if (resp === false) return false;\n    }\n    updateProfile({\n      keys: {\n        ...profile.keys,\n        [keyIndex]: name\n          ? {\n              plugin: name,\n              config: {}, //reset config for next\n              icon: \"\",\n              title: \"\",\n              loading: false,\n            }\n          : undefined,\n      },\n    });\n  };\n\n  const removePlugin = (name: string) => {\n    updateProfile({\n      keys: {\n        ...Object.keys(profile.keys).reduce((prev, key) => {\n          const config = profile.keys[key];\n          const match = name === config.plugin;\n          return {\n            ...prev,\n            [key]: match ? undefined : config,\n          };\n        }, {}),\n      },\n    });\n  };\n\n  const addProfile = (name: string, obj: Profile = { keys: {} }) => {\n    setProfiles((old) => {\n      const nextProfiles = {\n        ...old,\n        [name]: obj,\n      };\n      storeProfiles(nextProfiles);\n      return nextProfiles;\n    });\n  };\n\n  const promptAddProfile = () => {\n    const _name = prompt(\n      \"What the name of the profile? Using names that already exists, will overwirte you old profile! You can use a pipe (`|`) after the name, to provide the config.\"\n    );\n    if (_name) {\n      const [name, config] = _name.split(\"|\");\n      let parseedConfig;\n      try {\n        const _p = JSON.parse(config);\n        if (_p) {\n          parseedConfig = _p;\n        }\n      } catch (e) {\n        console.log(\"invalid config provided\");\n      }\n      console.log({ name, config });\n      addProfile(name, parseedConfig);\n      setProfileName(name);\n    }\n  };\n\n  const promptRemoveProfile = () => {\n    const resp = confirm(\n      \"Are you sure you want to delete this profile? These changes are inreversable.\"\n    );\n    if (resp) {\n      setProfiles((old) => {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { [profileName]: _, ...rest } = old;\n        setProfileName(\"default\");\n        return { ...rest };\n      });\n    }\n  };\n\n  const promptExportProfile = () => {\n    prompt(\"Profile:\", `${profileName}|${JSON.stringify(profile)}`);\n  };\n\n  const setConfig = (key: number, config: Config) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          config,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  const getConfig = (key: number) => {\n    const _profiles = getProfiles() as Profiles;\n    return _profiles[profileName].keys[key].config;\n  };\n\n  const setIcon = (key: number, icon: string) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          icon,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  const setTitle = (key: number, title: string) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          title,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  const setLoading = (key: number, loading: boolean) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          loading,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  return {\n    profiles,\n    profile,\n    profileName,\n\n    setProfileName,\n    setPlugin,\n    removePlugin,\n    updateProfile,\n    addProfile,\n    promptAddProfile,\n    promptRemoveProfile,\n    promptExportProfile,\n    setConfig,\n    getConfig,\n    setIcon,\n    setTitle,\n    setLoading,\n  };\n};\n","import { useState } from \"react\";\n\nexport const useStorage = <T>(storageKey: string, initType = []) => {\n  const get = (): T => {\n    const items = localStorage.getItem(storageKey);\n    if (items) {\n      // array,\n      if (initType.length !== undefined) {\n        // @ts-expect-error dynamic-values\n        return [...JSON.parse(items)];\n      }\n      return { ...JSON.parse(items) };\n    }\n    // @ts-expect-error dynamic-values\n    return initType;\n  };\n\n  const set = (data: T) => {\n    setItems(data); // TODO: double check RLC on this.\n    localStorage.setItem(storageKey, JSON.stringify(data));\n    return data;\n  };\n\n  const [items, setItems] = useState<T>(get());\n  return [items, set] as const;\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import queryString from \"query-string\";\nimport { Plugin } from \"../types/Plugin\";\n\nexport const fetchPlugin = async (input: string): Promise<Plugin | null> => {\n  // eslint-disable-next-line no-async-promise-executor\n  return new Promise(async (resolve) => {\n    try {\n      if (input.includes(\"github.com\")) {\n        // the provided a github.com link\n        const url = input.replace(\n          \"https://github.com/\",\n          \"https://api.github.com/repos/\"\n        );\n        const resp = await fetch(url);\n        const data = await resp.json();\n        if (data && data.has_pages) {\n          const homepage = data.homepage;\n          const [creator, name] = data.full_name.split(\"/\");\n          resolve({\n            name: name as string,\n            enum: name.replaceAll(\"-\", \"_\"),\n            creator,\n            versions: [\"1.0.0\"],\n            url: homepage,\n          });\n        } else {\n          throw new Error(\"\");\n        }\n      } else if (input.includes(\"remoteEntry.js\")) {\n        const [_url, query] = input.split(\"?\");\n        const { name, creator, v } = queryString.parse(query);\n        if (name) {\n          resolve({\n            name: name as string,\n            enum: (name as string)?.replaceAll(\"-\", \"_\"),\n            creator: creator as string,\n            versions: [v as string],\n            url: _url.replace(\"remoteEntry.js\", \"\"),\n          });\n        } else throw new Error(\"\");\n      } else {\n        throw new Error(\"\");\n      }\n    } catch (e) {\n      alert(\"Cound not add plugin, invalid url or repo provided.\");\n      console.error(e);\n      resolve(null);\n    }\n  });\n};\n","import { Key } from \"../hooks/useProfiles\";\nimport { ModulesResolution } from \"./initalise\";\n\ntype KeyImageType = {\n  width: number;\n  height: number;\n  key: number;\n  config: Key;\n  icon?: string;\n  module: ModulesResolution[0];\n};\n\nexport const getKeyImage = ({\n  width,\n  height,\n  config,\n  icon,\n  module,\n}: KeyImageType) => {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext(\"2d\")!;\n  ctx.save();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  if (config) {\n    // print status first\n    ctx.beginPath();\n    ctx.lineWidth = 2;\n    if (module?.loaded) {\n      ctx.strokeStyle = ctx.fillStyle = \"#04df04\";\n    } else if (module?.loaded === false) {\n      ctx.strokeStyle = ctx.fillStyle = \"#FF0000\";\n    } else {\n      ctx.strokeStyle = ctx.fillStyle = \"gray\";\n    }\n    ctx.arc(6, 6, 1, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.fill();\n    ctx.closePath();\n    ctx.save();\n    ctx.restore();\n\n    // print the text\n    ctx.textRendering = \"geometricPrecision\";\n    ctx.letterSpacing = \"1px\";\n    const fontSize = 10;\n    ctx.font = `${fontSize}px \"Arial\"`;\n    ctx.fillStyle = \"white\";\n    ctx.textAlign = \"center\";\n    const center = canvas.width / 2;\n    ctx.fillText(config.title, center, canvas.height - 8, canvas.width);\n    ctx.save();\n    ctx.restore();\n\n    // print the icon if its there\n    if (icon) {\n      const heightOffset = config.title ? 8 : 0;\n      const scale = config.title ? 1.5 : 2;\n      const imageWidth = 24 * scale;\n      const imageHeight = 24 * scale;\n      ctx.strokeStyle = \"#FFF\";\n      // ctx.lineWidth = 1;\n      ctx.fillStyle = \"#FFF\";\n      const cw = center - imageWidth / 2;\n      const ch = center - imageHeight / 2 - heightOffset;\n      const p = new Path2D(icon);\n      ctx.translate(cw, ch);\n      ctx.scale(scale, scale);\n      ctx.stroke(p);\n      ctx.fill(p);\n      ctx.save();\n      ctx.restore();\n    } else {\n      // if no icon print name of plugin at least\n      ctx.textRendering = \"geometricPrecision\";\n      ctx.letterSpacing = \"1px\";\n      const fontSize = 14;\n      ctx.font = `${fontSize}px \"Arial\"`;\n      (ctx.fontKerning = \"none\"), (ctx.fillStyle = \"white\");\n      ctx.textAlign = \"center\";\n      const center = canvas.width / 2;\n      ctx.fillText(config.plugin, center, canvas.height - 32, canvas.width);\n      // ctx.save();\n      // ctx.restore();\n    }\n  }\n\n  return {\n    ctx,\n    canvas,\n  };\n\n  // return ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n  // const id = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  // deck?.fillKeyBuffer(key, Buffer.from(id.data), {\n  //   format: \"rgba\",\n  // });\n\n  // if (window.location.search.includes(\"debug\")) {\n  //   if (key == 0) {\n  //     const data = canvas.toDataURL();\n  //     document.getElementById(\"prev\")?.setAttribute(\"src\", data);\n  //   }\n  // }\n\n  // ctx.restore();\n};\n","import { init } from \"@module-federation/runtime/.\";\nimport { RemotePromise } from \"../types/RemotePromise\";\nimport { loadScript } from \"./loadScript\";\nimport { ModuleResolver, loadModule } from \"./loadModule\";\nimport { Module } from \"../types/Module\";\n\ntype Config = {\n  name: string;\n  remotes: {\n    name: string;\n    entry: string;\n  }[];\n};\n\nexport type ModulesResolution = {\n  [key: string]: {\n    name: string;\n    scope: string;\n    module?: Module;\n    loaded: boolean;\n  };\n};\n\nexport const initalise = async (\n  config: Config,\n  scope: string,\n  cache: Map<string, Module>\n) => {\n  return new Promise<ModulesResolution>((resolve) => {\n    init(config);\n\n    const scripts: Promise<RemotePromise>[] = [];\n    config.remotes.forEach((script) => {\n      scripts.push(loadScript(script.entry, script.name));\n    });\n\n    Promise.all(scripts).then((remotes) => {\n      const modules: Promise<ModuleResolver>[] = [];\n      remotes.forEach((remote) => {\n        if (!remote.loaded) {\n          console.error(\n            `Webdeck: Could not load script \"${remote.name}\" at ${remote.url}`,\n            remote.e\n          );\n          // returned a empty module as we could not resolve it.\n          modules.push(\n            Promise.resolve({ name: remote.name, scope, module: undefined })\n          );\n        } else {\n          modules.push(loadModule(remote.name, scope, cache));\n        }\n      });\n\n      Promise.all(modules).then((elements) => {\n        resolve(\n          elements.reduce(\n            (p, e) => ({\n              ...p,\n              [e.name]: { ...e, loaded: !!e.module },\n            }),\n            {} as ModulesResolution\n          )\n        );\n      });\n    });\n  });\n};\n","import { loadRemote } from \"@module-federation/runtime/.\";\nimport { Module } from \"../types/Module\";\n\nexport type ModuleResolver = {\n  name: string;\n  scope: string;\n  module: Module | undefined;\n};\n\nconst TIMEOUT_TIME = 5000;\n\nexport const loadModule = async (\n  name: string,\n  scope: string,\n  cache: Map<string, Module>\n) => {\n  return new Promise<ModuleResolver>((resolve) => {\n    const moduleKey = `${scope}-${name}`;\n    if (cache.has(moduleKey)) {\n      const module = cache.get(moduleKey);\n      resolve({ name, scope, module });\n    } else {\n      // loadRemote seems to never resolve if there an issues with its name.\n      // so best to timeout after 10 seconds to prevent issues with others.\n      const timeout = setTimeout(() => {\n        resolve({ name, scope, module: undefined });\n      }, TIMEOUT_TIME);\n\n      loadRemote(`${name}/${scope.slice(2)}`)\n        .then((module) => {\n          cache.set(moduleKey, module as Module);\n          resolve({ name, scope, module: module as Module });\n          clearTimeout(timeout);\n        })\n        .catch(() => {\n          resolve({ name, scope, module: undefined });\n          clearTimeout(timeout);\n        });\n    }\n  });\n};\n","import { RemotePromise } from \"../types/RemotePromise\";\n\nconst URL_CATCHE = new Set<string>();\n\nexport const loadScript = async (url: string, name: string) => {\n  return new Promise<RemotePromise>((resolve) => {\n    if (!url) resolve({ loaded: false, url, name });\n    if (URL_CATCHE.has(url)) {\n      resolve({ loaded: true, url, name });\n      return;\n    }\n    const element = document.createElement(\"script\");\n    element.src = url;\n    element.type = \"text/javascript\";\n    element.async = true;\n    element.defer = true;\n    element.onload = () => {\n      URL_CATCHE.add(url);\n      resolve({ loaded: true, url, name });\n    };\n    element.onerror = (e) => resolve({ loaded: false, url, name, e });\n\n    document.head.appendChild(element);\n  });\n};\n","import {\n  StreamDeckWeb,\n  getStreamDecks,\n  requestStreamDecks,\n} from \"@elgato-stream-deck/webhid\";\n\n// FOR NOW we hardcoding to only steamdeck\n// TODO: expands this to modular based drivers\n\nexport type PhysicalDeck = StreamDeckWeb & {\n  drawKeys: (fn: (key: number) => void) => void;\n};\n\nconst close = async () => {\n  //TODO: temporary solution, untill forget is added\n  //@ISSUE: https://github.com/Julusian/node-elgato-stream-deck/issues/79\n  const [deck] = await navigator.hid.getDevices();\n  try {\n    await deck.forget();\n    await deck.close();\n  } catch (e) {\n    /*suppress error */\n  }\n};\n\nconst drawKeys = (numKeys: number, callback: (index: number) => void) => {\n  Array.from({ length: numKeys || 0 }).forEach((_, index) => {\n    callback(index);\n  });\n};\n\nexport const getPhysicalDeck = async () => {\n  const [deck] = await getStreamDecks();\n  if (deck) {\n    deck.close = close;\n    (deck as PhysicalDeck).drawKeys = (callback) =>\n      drawKeys(deck.NUM_KEYS, callback);\n    return [deck as PhysicalDeck];\n  }\n  return [];\n};\n\nexport const requestPhysicalDeck = async () => {\n  const [deck] = await requestStreamDecks();\n  if (deck) {\n    deck.close = close;\n    (deck as PhysicalDeck).drawKeys = (callback) =>\n      drawKeys(deck.NUM_KEYS, callback);\n    return [deck as PhysicalDeck];\n  }\n  return [];\n};\n","export type VirtualDeck = {\n  PRODUCT_NAME: string;\n  NUM_KEYS: number;\n  KEY_COLUMNS: number;\n  KEY_ROWS: number;\n  ICON_SIZE: number;\n  close(): void;\n};\n\nconst STORAGE_KEY = \"virtualdeck\";\n\nconst close = () => {\n  localStorage.removeItem(STORAGE_KEY);\n};\n\nconst config: Record<string, VirtualDeck> = {\n  default: {\n    PRODUCT_NAME: \"VirtualDeck 2x3\",\n    NUM_KEYS: 6,\n    KEY_COLUMNS: 3,\n    KEY_ROWS: 2,\n    ICON_SIZE: 72,\n    close,\n  },\n};\n\nexport const getVirtualDeck = (): VirtualDeck[] => {\n  const virtualdeck = localStorage.getItem(STORAGE_KEY);\n  if (virtualdeck) {\n    return [{ ...JSON.parse(virtualdeck), close }];\n  }\n  return [];\n};\n\nexport const requestVirtualDecks = (\n  key: keyof typeof config = \"default\"\n): VirtualDeck[] => {\n  const virtualdeck = config[key];\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(virtualdeck));\n  return [config[key]];\n};\n"],"names":["_path","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","props","xmlns","className","viewBox","d","Wrapper","textAlign","display","alignItems","justifyContent","height","width","Controller","$isOpen","marginLeft","padding","paddingTop","border","background","borderRadius","color","maxHeight","overflow","maxWidth","boxShadow","Settings","window","Buffer","useAppContext","deck","profiles","wrapper","hasDeck","current","style","position","top","left","right","bottom","Deck","undefined","selectedKey","editMode","Header","Profiles","SubSubTitle","disabled","value","profile","keys","title","onChange","e","setTitle","placeholder","Plugins","Plugin","opacity","location","search","includes","Debugger","onClick","tryGetPhysicalDeck","tryCreateVirtualDeck","Container","extension","useExtension","useProfiles","plugins","usePlugins","useDeck","AppContext","initalised","id","src","margin","setData","rand","Math","random","console","log","set","getData","get","root","document","getElementById","render","useState","open","setIsOpen","JSON","stringify","manifests","HeaderWrapper","styled","minWidth","paddingBottom","marginBottom","borderBottom","SubTitle","setSelectedKey","isVirtual","setEditMode","setPlugin","keyConfig","module","modules","plugin","manifest","loaded","useEffect","lazy","Promise","resolve","minHeight","outline","extension_required","installed","rel","href","EXTENSION_ID","Suspense","fallback","config","setConfig","selectedPlugin","name","map","enum","creator","promptRemovePlugin","removePlugin","promptAddPlugin","ProfilesWrapper","profileName","setProfileName","profileKey","promptRemoveProfile","promptAddProfile","promptExportProfile","DeckWrapper","DeckTitle","fontSize","textTransform","DeckLayout","$columns","gap","gridTemplateColumns","DeckButton","backgroundColor","transition","cursor","transform","outlineOffset","DisconnectButton","marginTop","fill","DeckButtonContent","zIndex","getContext","useDrawKey","flexDirection","PRODUCT_NAME","disconect","KEY_COLUMNS","Array","from","NUM_KEYS","_","keyIndex","onMouseDown","onMouseUp","selected","DeckButtonView","DeckFooterText","context","bespoke","isPhysical","physicalDeck","fillKeyBuffer","data","format","icon","loading","getSrc","preventDefault","createContext","useContext","virtualDeck","setVirtualDeck","setPhysicalDeck","inited","setInited","onPress","setIcon","fetch","metadata","warn","drawKey","callback","canvas","createElement","ICON_SIZE","ctx","save","clearRect","getImageData","colorSpace","setAttribute","toDataURL","useCallback","requestPhysicalDeck","error","requestVirtualDecks","close","execute","pdeck","vdeck","getPhysicalDeck","getVirtualDeck","on","drawKeys","off","nextInited","keyConf","initKeyConf","NOD","parseInt","getConfig","destructor","init","_deck","_profiles","_plugins","icons","getKeyImage","setInstalled","setMetaData","getExtenison","chrome","runtime","sendMessage","type","response","url","method","body","options","resp","r","syncData","event","addEventListener","removeEventListener","MODULE_CATCHE","Map","useStorage","setPlugins","setManifests","setInitalised","setModules","pluginsById","reduce","prev","addPlugin","input","prompt","fetchPlugin","remotes","entry","initalise","then","confirm","filter","STORAGE_KEY","getProfiles","localStorage","getItem","parse","default","storeProfiles","setItem","getProfileName","setProfiles","updateProfile","obj","old","nextProfiles","addProfile","values","match","_name","parseedConfig","split","_p","rest","setLoading","storageKey","initType","items","setItems","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","homepage","_url","query","v","replace","json","has_pages","full_name","replaceAll","versions","Error","alert","beginPath","lineWidth","strokeStyle","fillStyle","arc","PI","stroke","closePath","restore","textRendering","letterSpacing","font","center","fillText","heightOffset","scale","imageWidth","imageHeight","p","Path2D","translate","fontKerning","scope","cache","scripts","forEach","script","push","loadScript","all","remote","loadModule","elements","moduleKey","has","timeout","setTimeout","loadRemote","slice","clearTimeout","catch","URL_CATCHE","Set","element","async","defer","onload","add","onerror","head","appendChild","navigator","hid","getDevices","forget","numKeys","index","getStreamDecks","requestStreamDecks","removeItem","KEY_ROWS","virtualdeck"],"mappings":"wJAAIA,E,YACJ,SAASC,IAAiS,MAAOA,AAA3RA,CAAAA,EAAWC,OAAOC,MAAM,CAAGD,OAAOC,MAAM,CAACC,IAAI,GAAK,SAAUC,CAAM,EAAI,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,MAAM,CAAEF,IAAK,CAAE,IAAIG,EAASF,SAAS,CAACD,EAAE,CAAE,IAAK,IAAII,KAAOD,EAAcP,OAAOS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,EAAQC,IAAQL,CAAAA,CAAM,CAACK,EAAI,CAAGD,CAAM,CAACC,EAAI,AAAD,CAAO,CAAE,OAAOL,CAAQ,GAAmBS,KAAK,CAAC,IAAI,CAAEP,UAAY,CASlV,MAPsB,AAAAQ,GAAsB,eAAmB,CAAC,MAAOd,EAAS,CAC9Ee,MAAO,6BACPC,UAAW,uBACXC,QAAS,eACX,EAAGH,GAAQf,GAAUA,CAAAA,EAAqB,eAAmB,CAAC,OAAQ,CACpEmB,EAAG,geACL,EAAC,E,+JCPYC,EAAU,cAAO,OAAO,W,MAAO,CAC1CC,UAAW,SACXC,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBC,OAAQ,QACRC,MAAO,OACT,C,GAGaC,EAAa,cAAO,OAA6B,CAC5DL,QAAS,Y,OAAwCM,AAArC,EAAAA,OAAA,CAA+C,QAAU,M,EACrEC,WAAY,GACZC,QAAS,OACTC,WAAY,OACZC,OAAQ,kBACRC,WAAY,gBACZC,aAAc,OACdC,MAAO,QACPC,UAAW,OACXC,SAAU,OACVC,SAAU,IACVC,UACE,iIACJ,GAEaC,EAAW,cAAO,OAAO,CACpCL,MAAO,QACPb,QAAS,OACTE,eAAgB,gBAChBD,WAAY,SACZO,QAAS,SACX,E,6OCpBAW,CAAAA,OAAOC,MAAM,CAAG,EAAAA,MAAM,CA6FtB,MA3FY,WACV,IAgDsB,EAhDK,OAAAC,aAAA,IAAnBC,EAAmB,EAAnBA,IAAI,CAAEC,EAAa,EAAbA,QAAQ,CAEtB,MACE,UAAC,OACC5B,UAAW,IAAW,CACpB6B,QAAS,GACTC,QAAS,CAAC,CAACH,EAAKI,OAAO,AACzB,GACAC,MAAO,CACLC,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,CACV,E,SAEA,UAAC,EAAAlC,OAAO,E,SACLwB,EAAKI,OAAO,CACX,uB,UACE,UAAC,EAAAO,IAAI,KACL,WAAC,EAAA5B,UAAU,EACTC,QAASgB,AAAqBY,KAAAA,IAArBZ,EAAKa,WAAW,EAAkBb,EAAKc,QAAQ,C,UAExD,UAAC,EAAAC,MAAM,KACP,UAAC,EAAAC,QAAQ,KACRhB,AAAqBY,KAAAA,IAArBZ,EAAKa,WAAW,EACf,uB,UACE,WAAC,EAAAjB,QAAQ,E,UACP,UAAC,EAAAqB,WAAW,E,SAAC,wB,GACb,UAAC,UAAO5C,UAAU,IAAI6C,SAAQ,G,SAC3BlB,EAAKa,WAAW,A,MAcrB,WAAC,EAAAjB,QAAQ,E,UACP,UAAC,EAAAqB,WAAW,E,SAAC,U,GACb,UAAC,SACCE,MACE,CAAuC,OAAvC,GAAAlB,EAASmB,OAAO,CAACC,IAAI,CAACrB,EAAKa,WAAW,CAAC,AAAD,GAAtC,oBAAyCS,KAAK,AAAD,GAAK,GAEpDC,SAAU,SAACC,CAAC,E,OACVvB,EAASwB,QAAQ,CAACzB,EAAKa,WAAW,CAAGW,EAAE/D,MAAM,CAAC0D,KAAK,C,EAErDO,YAAY,c,MAGhB,WAAC,EAAA9B,QAAQ,E,UACP,UAAC,EAAAqB,WAAW,E,SAAC,Q,GACb,UAAC,EAAAU,OAAO,K,GAEV,UAAC,EAAA/B,QAAQ,E,SACP,UAAC,EAAAgC,MAAM,I,MAIb,UAAC,SAAMvB,MAAO,CAAEwB,QAAS,EAAI,E,SAAG,oC,GAG/BhC,OAAOiC,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC,UAAY,UAAC,EAAAC,QAAQ,K,MAI1D,WAAC,OAAI5B,MAAO,CAAEd,MAAO,OAAQ,E,UAC3B,WAAC,O,UACC,UAAC,M,SAAG,U,GACJ,UAAC,K,SAAE,qD,GACH,UAAC,S,GAEH,UAAC,UAAO2C,QAASlC,EAAKmC,kBAAkB,C,SAAE,S,GAC1C,UAAC,S,SAAM,Q,GACP,UAAC,UAAOD,QAASlC,EAAKoC,oBAAoB,C,SAAE,uB,SAQxD,C,kjDCtFO,IAAMC,EAAY,WACvB,IAAMC,EAAY,KAAAC,YAAA,IACZtC,EAAW,KAAAuC,WAAA,IACXC,EAAU,KAAAC,UAAA,IACV1C,EAAO,KAAA2C,OAAA,EAAQ1C,EAAUwC,EAASH,GAExC,MACE,WAAC,EAAAM,UAAA,SAAmB,EAACzB,MAAO,CAAEnB,KAAAA,EAAMC,SAAAA,EAAUwC,QAAAA,EAASH,UAAAA,CAAU,E,UAC9DzC,OAAOiC,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC,UAC/B,uB,UACE,WAAC,O,UAAI,YAAU,SAAmB,C,GAClC,UAAC,O,SAAK,CAACS,EAAQI,UAAU,EAAI,sB,SAAE,yB,KAC/B,UAAC,OACCC,GAAG,OACHC,IAAI,GACJ1C,MAAO,CAAE2C,OAAQ,GAAI5D,OAAQ,eAAgB,C,MAKnD,UAAC,SAAG,KAEHS,OAAOiC,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC,UAC/B,WAAC,OAAI3B,MAAO,CAAEC,SAAU,WAAYuB,QAAS,EAAI,E,UAC/C,UAAC,UACCK,QAAS,a,iDACK,O,EAAMI,EAAUW,OAAO,CAAC,CAClCC,KAAMC,AAAgB,IAAhBA,KAAKC,MAAM,EACnB,G,eACAC,QAAQC,GAAG,CAAC,CAAEC,IAHF,QAGM,G,MACpB,G,SACD,K,GAGD,UAAC,UACCrB,QAAS,a,iDACK,O,EAAMI,EAAUkB,OAAO,G,eACnCH,QAAQC,GAAG,CAAC,CAAEG,IADF,QACM,G,MACpB,G,SACD,K,QAOX,EAMAC,AAJa,YAAmB,CAC9BC,SAASC,cAAc,CAAC,SAGrBC,MAAM,CAAC,UAACxB,EAAA,KAKb,e,4OCvEO,IAAMJ,EAAe,WAC1B,I,IAA8B,OAAAlC,aAAA,IAAtBE,EAAsB,EAAtBA,QAAQ,CAAEwC,EAAY,EAAZA,OAAO,CACzB,IAA0B,G,EAAA,KAAAqB,QAAA,EAAS,I,EAAA,E,m0BAA5BC,EAAmB,KAAbC,EAAa,KAC1B,MACE,WAAC,O,UACC,WAAC,OACC3D,MAAO,CACLzB,eAAgB,gBAChBF,QAAS,OACTC,WAAY,SACZO,QAAS,WACX,E,UAEA,UAAC,EAAA+B,WAAW,E,SAAC,W,GACb,UAAC,UAAO5C,UAAU,IAAI6D,QAAS,W,OAAM8B,EAAU,CAACD,E,WAC7CA,EAAO,SAAW,M,MAGvB,WAAC,OAAI1D,MAAO,CAAE3B,QAASqF,EAAO,QAAU,OAAQtF,UAAW,MAAO,E,UAChE,UAAC,Q,SAAK,W,GACN,UAAC,OAAI4B,MAAO,CAAEvB,MAAO,IAAKL,UAAW,OAAQY,WAAY,OAAQ,E,SAC9D4E,KAAKC,SAAS,CAACjE,EAASA,QAAQ,CAAE,KAAM,E,GAE3C,UAAC,Q,SAAK,U,GACN,UAAC,OAAII,MAAO,CAAEvB,MAAO,IAAKL,UAAW,OAAQY,WAAY,OAAQ,E,SAC9D4E,KAAKC,SAAS,CAACzB,EAAQA,OAAO,CAAE,KAAM,E,GAEzC,UAAC,Q,SAAK,W,GACN,UAAC,OAAIpC,MAAO,CAAEvB,MAAO,IAAKL,UAAW,OAAQY,WAAY,OAAQ,E,SAC9D4E,KAAKC,SAAS,CAACzB,EAAQ0B,SAAS,CAAE,KAAM,E,QAKnD,C,uFCrCO,IAAMC,EAAgB,G,UAAAC,MAAA,EAAO,OAAO,CACzC3F,QAAS,OACTE,eAAgB,gBAChBD,WAAY,SACZ2F,SAAU,IACVC,cAAe,MACfC,aAAc,OACdC,aAAc,mBAChB,E,mICLa1D,EAAa,WACxB,IAAQf,EAAS,KAAAD,aAAA,IAATC,IAAI,CACZ,MACE,WAAC,EAAAoE,aAAa,E,UACZ,UAAC,EAAAM,QAAQ,E,SAAC,U,GACV,UAAC,UACCpD,MAAM,QACNjD,UAAU,IACV6D,QAAS,WACPlC,EAAK2E,cAAc,CAAC/D,KAAAA,GAChBZ,EAAK4E,SAAS,EAChB5E,EAAK6E,WAAW,CAAC,GAErB,E,SACD,M,KAKP,C,0OCZO,IAAMjD,EAAa,WACxB,I,IAMiB,EAN8B,OAAA7B,aAAA,IAAvC0C,EAAuC,EAAvCA,OAAO,CAAExC,EAA8B,EAA9BA,QAAQ,CAAED,EAAoB,EAApBA,IAAI,CAAEsC,EAAc,EAAdA,SAAS,CAC1C,IAA4B,G,EAAA,KAAAwB,QAAA,EAAoC,M,EAAA,E,m0BAAzDlC,EAAqB,KAAbkD,EAAa,KAEtBhH,EAAMkC,EAAKa,WAAW,CACtBkE,EAAY9E,EAASmB,OAAO,CAACC,IAAI,CAACvD,EAAI,CACtCkH,EAASvC,EAAQwC,OAAO,CAACF,MAAAA,EAAA,OAAAA,EAAWG,MAAM,CAAC,CAC3CC,EAAW,AAAiB,OAAjB,GAAA1C,EAAQ0B,SAAS,AAAD,GAAhB,mBAAmB,CAACY,MAAAA,EAAA,OAAAA,EAAWG,MAAM,CAAC,CACjDE,EAASJ,MAAAA,EAAA,OAAAA,EAAQI,MAAM,CAa7B,MAXA,KAAAC,SAAA,EAAU,WACJL,CAAAA,MAAAA,EAAA,OAAAA,EAAQA,MAAM,AAAD,EAIfF,EAHkB,KAAAQ,IAAA,EAAK,WACrB,OAAOC,QAAQC,OAAO,CAACR,EAAOA,MAAM,CACtC,IAGAF,EAAU,KAEd,EAAG,CAACE,EAAO,EAGT,WAAC,OACC3E,MAAO,CACLvB,MAAO,OACPU,UAAW,QACXiG,UAAW,QACXC,QAAS,OACT1C,OAAQ,QACR5D,OAAQ,kBACRkB,SAAU,WACV7B,UAAW,OACXa,aAAc,GACdG,SAAU,QACZ,E,UAEC,AAAA0F,CAAAA,MAAAA,EAAA,OAAAA,EAAUQ,kBAAkB,AAAD,IAAM,IAClCrD,AAAwB,KAAxBA,EAAUsD,SAAS,CACjB,WAAC,OACCvF,MAAO,CACLmE,aAAc,EACdtF,QAAS,EACTE,OAAQ,kBACRC,WAAY,SACZC,aAAc,CAChB,E,UAEA,UAAC,Q,SAAK,2B,GACN,UAAC,KACC7B,OAAO,SACPoI,IAAI,sBACJC,KAAO,6CAAyD,OAAb,EAAAC,YAAY,E,SAChE,mB,GAEI,I,GAEL,KACJ,UAAC,EAAAC,QAAQ,EAACC,SAAS,iB,SAChBrE,GAAUmD,CAAAA,MAAAA,EAAA,OAAAA,EAAWmB,MAAM,AAAD,GAAKlB,EAC9B,UAACpD,EAAA,CAECsE,OAAQnB,EAAUmB,MAAM,CACxBC,UAAW,SAACD,CAAM,EAChBjG,EAASkG,SAAS,CAACrI,EAAKoI,EAC1B,C,EAJKnB,EAAUG,MAAM,CAAGpH,GAMxBsH,AAAW,KAAXA,EACF,WAAC,OACC/E,MAAO,CACL3B,QAAS,OACTD,UAAW,SACXK,MAAO,OACPF,eAAgB,SAChBD,WAAY,SACZE,OAAQ,QACRU,MAAO,UACPF,WAAY,SACd,E,UACD,kBACiB0F,MAAAA,EAAA,OAAAA,EAAWG,MAAM,CAAC,W,GAGpC,UAAC,S,KAKX,C,6GChGavD,EAAc,WACzB,IACuB,EADa,OAAA5B,aAAA,IAA5BE,EAA4B,EAA5BA,QAAQ,CAAED,EAAkB,EAAlBA,IAAI,CAAEyC,EAAY,EAAZA,OAAO,CACzB2D,EAAiB,AAAwC,OAAxC,GAAAnG,EAASmB,OAAO,CAACC,IAAI,CAACrB,EAAKa,WAAW,CAAE,AAAF,GAAtC,oBAA0CqE,MAAM,CAEvE,MACE,WAAC,O,UACC,WAAC,UACCmB,KAAK,UACLvD,GAAG,UACHxB,MAAM,gBACNH,MAAOiF,GAAkB,GACzB7E,SAAU,SAACC,CAAC,EACVvB,EAAS6E,SAAS,CAACtD,EAAE/D,MAAM,CAAC0D,KAAK,CAAEnB,EAAKa,WAAW,CACrD,E,UAEA,UAAC,UAAOM,MAAM,G,SAAG,W,GAChBsB,EAAQA,OAAO,CAAC6D,GAAG,CAAC,SAACpB,CAAM,EAC1B,MACE,WAAC,UAAyB/D,MAAO+D,EAAOqB,IAAI,EAAIrB,EAAOmB,IAAI,C,UACxDnB,EAAOmB,IAAI,CAAC,IAAEnB,EAAOsB,OAAO,EAAK,IAAkB,OAAftB,EAAOsB,OAAO,E,EADxCtB,EAAOmB,IAAI,CAI5B,G,GAEF,UAAC,UACC/E,MAAM,gBACNjD,UAAU,IACV6D,QAAS,W,OACPO,EAAQgE,kBAAkB,CAACL,EAAgB,WAEzCnG,EAASyG,YAAY,CAACN,EACxB,E,EAEFlF,SAAU,CAACkF,E,SACZ,G,GAGD,UAAC,UACC9E,MAAM,aACNjD,UAAU,IACV6D,QAASO,EAAQkE,eAAe,C,SACjC,G,KAKP,C,yFC/CO,IAAMC,EAAkB,G,UAAA,SAAO,OAAO,CAC3CrH,MAAO,QACPb,QAAS,OACTE,eAAgB,gBAChBD,WAAY,SACZ4F,cAAe,MACfC,aAAc,MACdC,aAAc,mBAChB,E,qICLazD,EAAe,WAC1B,IAAQf,EAAa,KAAAF,aAAA,IAAbE,QAAQ,CAChB,MACE,WAAC,EAAA2G,eAAe,E,UACd,UAAC,EAAAlC,QAAQ,E,SAAC,U,GACV,WAAC,O,UACC,UAAC,UACC2B,KAAK,UACLvD,GAAG,UACHxB,MAAM,iBACNH,MAAOlB,EAAS4G,WAAW,CAC3BtF,SAAU,SAACC,CAAC,E,OAAKvB,EAAS6G,cAAc,CAACtF,EAAE/D,MAAM,CAAC0D,KAAK,C,WAEtD7D,OAAO+D,IAAI,CAACpB,EAASA,QAAQ,EAAEqG,GAAG,CAAC,SAACS,CAAU,EAC7C,MACE,UAAC,UAAwB5F,MAAO4F,E,SAC7BA,C,EADUA,EAIjB,E,GAEF,UAAC,UACC7F,SAAUjB,AAAyB,YAAzBA,EAAS4G,WAAW,CAC9BvF,MAAM,iBACNjD,UAAU,IACV6D,QAASjC,EAAS+G,mBAAmB,C,SACtC,G,GAGD,UAAC,UACC1F,MAAM,cACNjD,UAAU,IACV6D,QAASjC,EAASgH,gBAAgB,C,SACnC,G,GAGD,UAAC,UACC3F,MAAM,iBACNjD,UAAU,IACV6D,QAASjC,EAASiH,mBAAmB,C,SACtC,G,QAMT,C,0RChDaC,EAAc,cAAO,OAAO,CACvCjI,QAAS,OACTC,WAAY,OACZC,OAAQ,kBACRC,WAAY,gBACZC,aAAc,OACdK,UACE,kIACFW,SAAU,UACZ,GAEa8G,EAAY,cAAO,MAAM,CACpC1I,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChByI,SAAU,GACV9C,cAAe,GACfpF,WAAY,EACZ6D,OAAQ,EACRzD,MAAO,QACP+H,cAAe,WACjB,GAEaC,EAAa,cAAO,OAC/B,Y,IAAGC,EAAA,EAAAA,QAAA,C,MAAgB,CACjB9I,QAAS,OACT+I,IAAK,OACLC,oBAAsB,UAAkB,OAATF,EAAS,iBAC1C,C,GAGWG,EAAa,cAAO,UAAU,CACzCjJ,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBQ,OAAQ,oBACRN,MAAO,OACPD,OAAQ,OACRS,aAAc,GAEdD,WAAY,MACZiB,SAAU,WACVpB,QAAS,IACT0I,gBAAiB,gBACjBlC,QAAS,kBACT/F,UACE,kIACFkI,WAAY,mBACZC,OAAQ,UAER,oCAAqC,CACnCnI,UAAW,OACXP,OAAQ,YACRwI,gBAAiB,gBACjB,UAAW,CACTjI,UAAW,OACXP,OAAQ,YACR,QAAS,CACPyI,WAAY,mBACZE,UAAW,YACb,CACF,CACF,EACA,WAAY,CAEZ,EACA,aAAc,CACZrC,QAAS,qBACTsC,cAAe,KACjB,EACAzI,MAAO,OACT,GAEa0I,EAAmB,cAAO,SAAU,EAAE,CACjDhJ,WAAY,GACZiJ,UAAW,EACXrJ,OAAQ,GACRC,MAAO,GACPqJ,KAAM,QACNtG,QAAS,GACTiG,OAAQ,UACRD,WAAY,YACZ,UAAW,CACThG,QAAS,EACTsG,KAAM,KACR,CACF,GAEaC,EAAoB,cAAO,OAAO,CAC7C9H,SAAU,WACVxB,MAAO,OACPD,OAAQ,OACRc,UACE,oEACFL,aAAc,GACduI,WAAY,mBACZQ,OAAQ,EACR5I,SAAU,SACV,QAAS,CACPoI,WAAY,mBACZE,UAAW,UACb,CACF,E,6KC1FapH,EAAW,WACtB,IAOS,EAKmB,EACE,EAbtBX,EAAS,KAAAD,aAAA,IAATC,IAAI,CACJsI,EAAe,KAAAC,UAAA,IAAfD,UAAU,CAElB,MACE,WAAC,OAAIjI,MAAO,CAAE3B,QAAS,OAAQ8J,cAAe,QAAS,E,UACrD,WAAC,EAAArB,WAAW,E,UACV,WAAC,EAAAC,SAAS,E,UACK,OAAZ,GAAApH,EAAKI,OAAO,AAAD,GAAX,oBAAcqI,YAAY,CAAE,IAC7B,UAAC,QAAKnH,MAAM,mB,SACV,UAAC,EAAA2G,gBAAgB,EAAC/F,QAAS,W,OAAMlC,EAAK0I,SAAS,E,SAGnD,UAAC,EAAAnB,UAAU,EAACC,SAAU,CAAY,OAAZ,GAAAxH,EAAKI,OAAO,AAAD,GAAX,oBAAcuI,WAAW,AAAD,GAAK,E,SAChDC,MAAMC,IAAI,CAAC,CAAEjL,OAAQ,CAAY,OAAZ,GAAAoC,EAAKI,OAAO,AAAD,GAAX,oBAAc0I,QAAQ,AAAD,GAAK,CAAE,GAAGxC,GAAG,CACtD,SAACyC,CAAC,CAAEC,CAAQ,E,MACV,UAAC,EAAArB,UAAU,EAETsB,YAAa,WACPjJ,EAAK4E,SAAS,EAAI,CAAC5E,EAAKc,QAAQ,EAClCd,EAAKiJ,WAAW,CAACD,EAErB,EACAE,UAAW,WACLlJ,EAAK4E,SAAS,EAAI,CAAC5E,EAAKc,QAAQ,EAClCd,EAAKkJ,SAAS,CAACF,EAEnB,EACA9G,QAAS,WACHlC,EAAKc,QAAQ,EACfd,EAAK2E,cAAc,CAACqE,EAExB,EACA3K,UAAW,IAAW,CAEpB8K,SAAUnJ,EAAKc,QAAQ,EAAId,EAAKa,WAAW,GAAKmI,EAChDlI,SAAUd,EAAKc,QAAQ,AACzB,G,SAEA,UAAC,EAAAsH,iBAAiB,E,SAChB,UAAC,EAAAgB,cAAc,EAACd,WAAYA,EAAYU,SAAUA,C,MAvB/CA,E,QA8Bf,UAAC,EAAAK,cAAc,K,EAGrB,C,gIC7DaD,EAAiB,Y,IAUZ,EAThBd,EAAA,EAAAA,UAAA,CACAU,EAAA,EAAAA,QAAA,CAKoC,OAAAjJ,aAAA,IAA5BC,EAA4B,EAA5BA,IAAI,CAAEyC,EAAsB,EAAtBA,OAAO,CAAExC,EAAa,EAAbA,QAAQ,CACzBqJ,EAAUhB,EAAWU,GACrBlL,EAAMmC,EAASmB,OAAO,CAACC,IAAI,CAAC2H,EAAS,CACrCO,EAAU,AAA8B,OAA9B,GAAA9G,EAAQ0B,SAAS,CAACrG,MAAAA,EAAA,OAAAA,EAAKoH,MAAM,CAAC,AAAD,GAA7B,oBAAgCqE,OAAO,CAevD,MAZA,KAAAlE,SAAA,EAAU,WACR,GAAIrF,EAAKwJ,UAAU,EAAI,CAACD,EAAS,C,IAC/B,C,AAAiB,QAAjB,GAAAvJ,EAAKyJ,YAAY,AAAD,GAAhB,cAAmBC,aAAa,CAC9BV,EACAlJ,OAAO+I,IAAI,CAACS,EAAQ9F,OAAO,GAAGmG,IAAI,EAClC,CACEC,OAAQ,MACV,EAEJ,CACF,EAAG,CAAC5J,EAAKwJ,UAAU,CAAE1L,MAAAA,EAAA,OAAAA,EAAKwD,KAAK,CAAExD,MAAAA,EAAA,OAAAA,EAAK+L,IAAI,CAAE/L,MAAAA,EAAA,OAAAA,EAAKoH,MAAM,CAAEpH,MAAAA,EAAA,OAAAA,EAAKgM,OAAO,CAAC,EAGpE,UAAC,M,6aAAA,CACChH,GAAK,SAAiB,OAATkG,E,EACR,AAACO,EAAsC,CAAC,EAA7B,CAAExG,IAAKuG,EAAQS,MAAM,EAAG,GAG9C,C,oHCjCaV,EAAiB,WAC5B,IAAQrJ,EAAS,KAAAD,aAAA,IAATC,IAAI,QACZ,AAAKA,EAAK4E,SAAS,CAGjB,WAAC,SACCvE,MAAO,CACLd,MAAO,QACPJ,WAAY,GACZ0C,QAAS,GACTwF,SAAU,EACZ,E,UACD,wBACuBrH,EAAKc,QAAQ,CAAG,YAAc,eAAe,cACzD,IACV,UAAC,KACCzC,UAAU,IACVyH,KAAK,IACL5D,QAAS,SAACV,CAAC,EACTA,EAAEwI,cAAc,GAChBhK,EAAK6E,WAAW,CAAC,CAAC7E,EAAKc,QAAQ,EAC3B,CAACd,EAAKc,QAAQ,EAAI,CAACd,EAAKa,WAAW,EACrCb,EAAK2E,cAAc,CAAC,EAExB,E,SAEC3E,EAAKc,QAAQ,CAAG,eAAiB,W,GAC/B,IAAI,MACLd,EAAKc,QAAQ,CAAG,OAAS,OAAO,O,GA1BZ,IA6B9B,C,qFC/BO,IAAMG,EAAc,G,UAAA,SAAO,MAAM,CACtCvC,QAAS,eACTC,WAAY,SACZC,eAAgB,SAChByI,SAAU,GACVnI,QAAS,EACT8D,OAAQ,EACRzD,MAAO,OACT,E,iFCRO,IAAMmF,EAAW,G,UAAA,SAAO,MAAM,CACnChG,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChByI,SAAU,GACVnI,QAAS,EACT8D,OAAQ,EACRzD,MAAO,QACP+H,cAAe,WACjB,E,uICRa1E,EAAa,KAAAqH,aAAA,EAAc,CAAC,GAE5BlK,EAAgB,WAC3B,MAAO,KAAAmK,UAAA,EAAWtH,EACpB,C,05ECYO,IAAMD,EAAU,SACrB1C,CAAQ,CACRwC,CAAO,CACPH,CAAS,EAET,IAAgC,SAAAwB,QAAA,EAAS,OAAlChD,EAAyB,KAAf+D,EAAe,KACM,SAAAf,QAAA,EAA6B,MAA5DjD,EAA+B,KAAlB8D,EAAkB,KACA,SAAAb,QAAA,IAAQ,GAAvCqG,EAA+B,KAAlBC,EAAkB,KACE,SAAAtG,QAAA,IAAQ,GAAzC2F,EAAiC,KAAnBY,EAAmB,KACZ,SAAAvG,QAAA,EAAiB,CAAC,MAAvCwG,EAAqB,KAAbC,EAAa,KACpBjC,EAAe,KAAAC,UAAA,IAAfD,UAAU,CAEZlI,EAAUqJ,GAAgBU,EAE1BlB,EAAc,SAACD,CAAQ,EAM3B3F,QAAQC,GAAG,CAAC,cAAe0F,EAC7B,EAEME,EAAY,SAACF,CAAQ,EACzB,IAAMlL,EAAMmC,EAASmB,OAAO,CAACC,IAAI,CAAC2H,EAAS,CAC3C,GAAIlL,MAAAA,EAAA,OAAAA,EAAKoH,MAAM,CAAE,CACf,I,IAAe,EAATF,EAAS,AAA2B,OAA3B,GAAAvC,EAAQwC,OAAO,CAACnH,EAAIoH,MAAM,CAAC,AAAD,GAA1B,oBAA6BF,MAAM,CAClD,GAAI,EACFA,EAAQwF,OAAO,E,EAAE,A,6aAAA,GACZ1M,G,EAAA,CACHkL,SAAAA,EACAyB,QAAS,SAACZ,CAAI,E,OAAa5J,EAASwK,OAAO,CAACzB,EAAUa,E,EACtDvH,UAAW,CACToI,MAAOpI,EAAUoI,KAAK,CACtBf,KAAMrH,EAAUqI,QAAQ,CACxB/E,UAAWtD,EAAUsD,SAAS,AAChC,C,6VAEJ,CAAE,MAAOpE,EAAG,CACV6B,QAAQuH,IAAI,CACT,8BAAwC,OAAX9M,EAAIoH,MAAM,CAAC,oEACzC1D,EAEJ,CACF,CACF,EAEMqJ,EAAU,SAAC7B,CAAQ,CAAU8B,CAAQ,EACzC,IAkBA,EAlBMC,EAASpH,SAASqH,aAAa,CAAC,SACtCD,CAAAA,EAAOjM,KAAK,CAAG,AAAAsB,CAAAA,MAAAA,EAAA,OAAAA,EAAS6K,SAAS,AAAD,GAAK,GACrCF,EAAOlM,MAAM,CAAG,AAAAuB,CAAAA,MAAAA,EAAA,OAAAA,EAAS6K,SAAS,AAAD,GAAK,GACtC,IAAMC,EAAMH,EAAOzC,UAAU,CAAC,MAM9B,GALA4C,EAAIC,IAAI,GACRD,EAAIE,SAAS,CAAC,EAAG,EAAGL,EAAOjM,KAAK,CAAEiM,EAAOlM,MAAM,EAE/CiM,EAAS,CAAEC,OAAAA,EAAQG,IAAAA,CAAI,GAEnBzB,EAAc,CAChB,IAAME,EAAOuB,EAAIG,YAAY,CAAC,EAAG,EAAGN,EAAOjM,KAAK,CAAEiM,EAAOlM,MAAM,CAAE,CAC/DyM,WAAY,MACd,GAAG3B,IAAI,AACPF,OAAAA,GAAAA,EAAcC,aAAa,CAACV,EAAUlJ,OAAO+I,IAAI,CAACc,GAAO,CACvDC,OAAQ,MACV,EACF,C,AAG2B,OAD3B,GAAAjG,SACGC,cAAc,CAAE,SAAiB,OAAToF,GAAA,GAD3B,cAEIuC,YAAY,CAAC,MAAOR,EAAOS,SAAS,GAC1C,EAEMrJ,EAAqB,KAAAsJ,WAAA,EAAY,a,IAC9BzL,E,iDAAQ,O,EAAM,KAAA0L,mBAAA,I,cAAd1L,CAAAA,EAAQ,yB,GAAA,KAEbqK,EAAgBrK,GAEhBqD,QAAQsI,KAAK,CAAC,gC,MAElB,GAAG,EAAE,EAECvJ,EAAuB,KAAAqJ,WAAA,EAAY,WACvC,IAAOzL,EAAQ,OAAA4L,mBAAA,IAAmB,EAAnB,IACX5L,EACFoK,EAAepK,GAEfqD,QAAQsI,KAAK,CAAC,8BAElB,EAAG,EAAE,EAECjD,EAAY,KAAA+C,WAAA,EAAY,a,iCACxBhC,GACFA,EAAaoC,KAAK,GAClBxB,EAAgBzJ,KAAAA,IACPuJ,IACTA,EAAY0B,KAAK,GACjBzB,EAAexJ,KAAAA,I,KAEnB,GAAG,CAAC6I,EAAcU,EAAY,EAkG9B,MAhGA,KAAA9E,SAAA,EAAU,W,MAYRyG,C,EAXgB,a,IACPC,EAIEC,E,iDAJO,O,EAAM,KAAAC,eAAA,I,cAAfF,CAAAA,EAAS,yB,GAAA,KAEd1B,EAAgB0B,GAETC,CAAAA,EAAS,OAAAE,cAAA,IAAc,EAAd,MAEd9B,EAAe4B,G,MAGrB,G,6CAEF,EAAG,EAAE,EAGL,KAAA3G,SAAA,EAAU,WAwBR,OAvBIoE,IACFA,EAAa0C,EAAE,CAAC,OAAQlD,GACxBQ,EAAa0C,EAAE,CAAC,KAAMjD,GAGtBO,MAAAA,GAAAA,EAAc2C,QAAQ,CAAC,SAACtO,CAAG,E,IAEvB,EAAkB,EADpB,GACE,CAAqD,OAArD,GAAA2E,EAAQ0B,SAAS,CAAC,AAA0B,OAA1B,GAAAlE,EAASmB,OAAO,CAACC,IAAI,CAACvD,EAAI,AAAD,GAAzB,oBAA4BoH,MAAM,CAAC,AAAD,GAApD,oBAAuDqE,OAAO,AAAD,IAC7D,GACA,CACA,IAAMD,EAAUhB,EACdxK,EACA2L,EACAxJ,EACAwC,GACAe,OAAO,EACTiG,OAAAA,GAAAA,EAAcC,aAAa,CAAC5L,EAAKgC,OAAO+I,IAAI,CAACS,EAAQK,IAAI,EAAG,CAC1DC,OAAQ,MACV,EACF,CACF,IAGK,WACLH,MAAAA,GAAAA,EAAc4C,GAAG,CAAC,OAAQpD,GAC1BQ,MAAAA,GAAAA,EAAc4C,GAAG,CAAC,KAAMnD,EAC1B,CACF,EAAG,CAACzG,EAAQI,UAAU,CAAEJ,EAASxC,EAAS,EAG1C,KAAAoF,SAAA,EAAU,WACR,GAAI5C,EAAQI,UAAU,CAAE,CACtB,IAAMyJ,EAAa,CAAC,EACpBhP,OAAO+D,IAAI,CAACpB,EAASmB,OAAO,CAACC,IAAI,EAAEiF,GAAG,CAAC,SAACxI,CAAG,EACzC,IAGe,IAmBX,EAIgB,EASF,EAnCZyO,EAAUtM,EAASmB,OAAO,CAACC,IAAI,CAACvD,EAAI,CACpC0O,EAAclC,CAAM,CAACxM,EAAI,CACzB2O,EAAM,W,OAAMpJ,QAAQC,GAAG,CAAC,cAAeiJ,EAASzO,E,EAChDkH,EAAS,AAAe,OAAf,GAAAvC,EAAQwC,OAAO,AAAD,GAAd,kBAAkC,OAAlC,IAAiB,CAACsH,MAAAA,EAAA,OAAAA,EAASrH,MAAM,CAAC,AAAD,GAAjC,oBAAoCF,MAAM,CACnD7G,EAAQ,CACZ0M,QAAS,SAACC,CAAQ,E,OAAcD,EAAQ6B,SAAS5O,GAAMgN,E,EACvD5E,OAAQqG,MAAAA,EAAA,OAAAA,EAASrG,MAAM,CACvByG,UAAW,W,OAAM1M,EAAS0M,SAAS,CAACD,SAAS5O,G,EAC7CwE,UAAW,CACToI,MAAOpI,EAAUoI,KAAK,CACtBf,KAAMrH,EAAUqI,QAAQ,CACxB/E,UAAWtD,EAAUsD,SAAS,AAChC,CACF,EAEI4G,EAEEA,EAAYtH,MAAM,GAAKqH,CAAAA,MAAAA,EAAA,OAAAA,EAASrH,MAAM,AAAD,EAEvCoH,CAAU,CAACxO,EAAI,CAAG0O,G,AAGI,OAAtB,GAAAA,EAAYI,UAAU,AAAD,GAArB,mBAAAJ,GACID,GACFD,CAAAA,CAAU,CAACxO,EAAI,CAAG,CAChBoH,OAAQqH,EAAQrH,MAAM,CACtB0H,WAAY,AAAA5H,CAAAA,MAAAA,EAAA,OAAY,OAAZ,GAAAA,EAAQ6H,IAAI,AAAD,GAAX,yBAAA7H,EAAe7G,EAAK,GAAKsO,CACvC,IAKAF,GACFD,CAAAA,CAAU,CAACxO,EAAI,CAAG,CAChBoH,OAAQqH,EAAQrH,MAAM,CACtB0H,WAAY,AAAA5H,CAAAA,MAAAA,EAAA,OAAY,OAAZ,GAAAA,EAAQ6H,IAAI,AAAD,GAAX,yBAAA7H,EAAe7G,EAAK,GAAKsO,CACvC,EAGN,GAEAlC,EAAU+B,EACZ,CACF,EAAG,CAAC7J,EAAQI,UAAU,CAAE5C,EAASmB,OAAO,CAACC,IAAI,CAAC,EAEvC,CACLuD,UAAW,CAAC,CAACuF,EACbX,WAAY,CAAC,CAACC,EACd5G,WAAY,CAAC,CAACzC,EACdqJ,aAAAA,EACAU,YAAAA,EACA/J,QAAAA,EACAS,YAAAA,EACAC,SAAAA,EACAwJ,OAAAA,EAEArB,YAAAA,EACAC,UAAAA,EACAvE,eAAAA,EAEA+D,UAAAA,EAEAvG,mBAAAA,EACAC,qBAAAA,EACAyC,YAAAA,CACF,CACF,C,gHCxOa0D,EAAa,WACxB,IAAoC,OAAAxI,aAAA,IAA5BC,EAA4B,EAA5BA,IAAI,CAAEC,EAAsB,EAAtBA,QAAQ,CAAEwC,EAAY,EAAZA,OAAO,CAsC/B,MAAO,CACL6F,WAtCiB,SACjBU,CAAQ,E,IAOO,EAEb,EACE,EADF,IAEW,MATb8D,EAAQ,UAAR,6CAAQ9M,EAAKI,OAAO,CACpB2M,EAAY,UAAZ,6CAAY9M,EACZ+M,EAAW,UAAX,6CAAWvK,EAELyD,EAAS6G,EAAU3L,OAAO,CAACC,IAAI,CAAC2H,EAAS,CACzC9D,EAAS,AAAgC,OAAhC,GAAA6H,EAAU3L,OAAO,CAACC,IAAI,CAAC2H,EAAS,AAAD,GAA/B,oBAAkC9D,MAAM,CACjD2E,EACJ,CAA0B,OAA1B,GAAAmD,EAAS7I,SAAS,CAACe,EAAO,AAAD,GAAzB,kBAAiC,OAAjC,KAA4B+H,KAAK,AAAD,GAAhC,kBAEC,OAFD,IAAmC,CAAC,AACF,OAAhC,GAAAF,EAAU3L,OAAO,CAACC,IAAI,CAAC2H,EAAS,AAAD,GAA/B,oBAAkCa,IAAI,CACvC,AADuC,GADxC,oBAEGA,IAAI,AAAD,GAAC,CAA8B,OAA1B,GAAAmD,EAAS7I,SAAS,CAACe,EAAO,AAAD,GAAzB,kBAAiC,OAAjC,KAA4B+H,KAAK,AAAD,GAAhC,kBAA8C,OAA9C,KAAoC,OAAU,AAAD,GAA7C,oBAAgDpD,IAAI,AAAD,EAE1D/K,EAAQ,AAAAgO,CAAAA,MAAAA,EAAA,OAAAA,EAAO7B,SAAS,AAAD,GAAK,GAC5BpM,EAAS,AAAAiO,CAAAA,MAAAA,EAAA,OAAAA,EAAO7B,SAAS,AAAD,GAAK,GAC7BjG,EAASvC,MAAAA,EAAA,OAAAA,EAASwC,OAAO,CAACC,EAAO,CAEjCoE,EAAU,KAAA4D,WAAA,EAAY,CAC1BpO,MAAAA,EACAD,OAAAA,EACAf,IAAKkL,EACL9C,OAAAA,EACA2D,KAAAA,EACA7E,OAAAA,CACF,GAEA,MAAO,CACL+E,OAAQ,W,OAAMT,EAAQyB,MAAM,CAACS,SAAS,E,EACtChI,QAAS,W,OACP8F,EAAQ4B,GAAG,CAACG,YAAY,CAAC,EAAG,EAAGvM,EAAOD,EAAQ,CAC5CyM,WAAY,MACd,E,EACFhC,QAAAA,CACF,CACF,CAIA,CACF,C,85EC3CO,IAAMvD,EAAe,mCAEfxD,EAAe,WAC1B,I,MAAkC,SAAAuB,QAAA,EAAyB,SAApD8B,EAA2B,KAAhBuH,EAAgB,KACF,SAAArJ,QAAA,EAAS,CAAC,MAAnC6G,EAAyB,KAAfyC,EAAe,KAE1BC,EAAe,W,IACf,GAAa,OAAb,GAAAxN,OAAOyN,MAAM,AAAD,GAAZ,oBAAeC,OAAO,AAAD,EACvBD,OAAOC,OAAO,CAACC,WAAW,CACxBzH,EACA,CAAE0H,KAAM,QAAS,EACjB,SAACC,CAAQ,EACPP,EAAa,IACbC,EAAYM,EACd,IAGFP,EAAa,IACbC,EAAY,CAAC,GAEjB,EAEA,IAAM1C,G,EAAQ,WACZiD,CAAG,E,MAEDC,EACAC,EACAC,E,sCAOF,OATEF,EAAA,A,kCAOE,CAAEA,OAAQ,KAAM,GAPlBA,MAAA,CACAC,EAAA,EAAAA,IAAA,CACAC,EAAA,EAAAA,OAAA,CAOK,C,EAAA,IAAIvI,QAAQ,SAACC,CAAO,MACrB,EACF,IADE,CAAa,OAAb,GAAA3F,OAAOyN,MAAM,AAAD,GAAZ,oBAAeC,OAAO,AAAD,E,AACvB,UAAAD,MAAA,eAAe,OAAf,KAAQC,OAAO,AAAD,GAAd,cAAiBC,WAAW,CAC1BzH,EACA,A,6aAAA,CAAE0H,KAAM,QAASG,OAAAA,EAAQD,IAAAA,EAAKE,KAAAA,C,EAASC,GACvC,SAACJ,CAAQ,E,OAAKlI,EAAQkI,E,GAGxBlI,EAAQ,CAAEmG,MAAO,GAAMnK,EAAG,cAAe,EAE7C,G,EACF,G,SAtBEmM,CAAG,E,iCAwBL,IAAM1K,G,EAAU,WAAO0G,CAAI,E,0BACzB,MAAO,C,EAAA,IAAIpE,QAAQ,SAACC,CAAO,E,IACrB,GAAa,OAAb,GAAA3F,OAAOyN,MAAM,AAAD,GAAZ,oBAAeC,OAAO,AAAD,EACvBD,OAAOC,OAAO,CAACC,WAAW,CACxBzH,EACA,CAAE0H,KAAM,WAAY9D,KAAM,CAAEA,KAAAA,CAAK,CAAE,EACnC,SAACoE,CAAI,EACHvI,EAAQuI,EACV,GAGFvI,EAAQ,GAEZ,G,EACF,G,SAduBmE,CAAI,E,iCAgB3B,IAAMnG,G,EAAU,a,0BACd,MAAO,C,EAAA,IAAI+B,QAAQ,SAACC,CAAO,E,IACrB,GAAa,OAAb,GAAA3F,OAAOyN,MAAM,AAAD,GAAZ,oBAAeC,OAAO,AAAD,EACvBD,OAAOC,OAAO,CAACC,WAAW,CACxBzH,EACA,CAAE0H,KAAM,WAAYpM,KAAM,MAAO,EACjC,SAAC2M,CAAC,EACAxI,EAAQwI,EACV,GAGFxI,EAAQ,GAEZ,G,EACF,G,4CAEMyI,EAAW,SAACC,CAAK,EACrB7K,QAAQC,GAAG,CAAC,iBAAkB4K,EAChC,EAaA,MAXA,KAAA7I,SAAA,EAAU,WACRgI,GACF,EAAG,EAAE,EAEL,KAAAhI,SAAA,EAAU,WAER,OADAxF,OAAOsO,gBAAgB,CAAC,UAAWF,EAAU,IACtC,WACLpO,OAAOuO,mBAAmB,CAAC,UAAWH,EAAU,GAClD,CACF,EAAG,EAAE,EAEE,CAAErI,UAAAA,EAAWyH,aAAAA,EAAc3C,MAAAA,EAAOC,SAAAA,EAAU1H,QAAAA,EAASO,QAAAA,CAAQ,CACtE,C,2+DCvFA,IAAM6K,EAAgB,IAAIC,IAEb5L,EAAa,WACxB,I,IAA8B,SAAA6L,UAAA,EALJ,WAKyB,GAA5C9L,EAAuB,KAAd+L,EAAc,KACI,SAAAD,UAAA,EALT,WAOvB,CAAC,MAFIpK,EAA2B,KAAhBsK,EAAgB,KAIE,SAAA3K,QAAA,EAAS,OAAtCjB,EAA6B,KAAjB6L,EAAiB,KACN,SAAA5K,QAAA,EAA4B,CAAC,MAApDmB,EAAuB,KAAd0J,EAAc,KACxBC,EAAcnM,EAAQoM,MAAM,CAChC,SAACC,CAAI,CAAE1O,CAAO,E,OAAM,OAAK0O,GAAM,KAAC1O,EAAQiG,IAAI,CAAGjG,G,EAC/C,CAAC,GAGG2O,EAAY,SAAC7J,CAAM,M,EACvBsJ,EAAY,A,kDAAG/L,I,mSAAA,OAAJ,CAAayC,EAAO,EACjC,EAEA,IAAMyB,G,KAAkB,W,IAChBqI,EAIE9J,E,olCAJF8J,CAAAA,EAAQC,OACZ,uFAAsF,EAE7E,MAAP,C,KACa,O,EAAM,KAAAC,WAAA,EAAYF,G,QAA3B9J,CAAAA,EAAS,WACH6J,EAAU7J,G,6BAE1B,E,yNAkDA,MA5BA,KAAAG,SAAA,EAAU,WACRqJ,EAAc,IAEd,IAAMxI,EAAS,CACbG,KAAM,UACN8I,QAAS1M,EAAQ6D,GAAG,CAAC,SAACpB,CAAM,EAC1B,MAAO,CACLmB,KAAMnB,EAAOqB,IAAI,CACjB6I,MAAQ,GAAa,OAAXlK,EAAOyI,GAAG,CAAC,iBACvB,CACF,EACF,EAEA,KAAA0B,SAAA,EAAUnJ,EAjEO,WAiEemI,GAAeiB,IAAI,CAAC,SAACrK,CAAO,EAC1D0J,EAAW1J,GACXyJ,EAAc,IACdD,EACEnR,OAAO+D,IAAI,CAAC4D,GAAS4J,MAAM,CACzB,SAACC,CAAI,CAAEhR,CAAG,E,IAED,I,OAFO,OACXgR,GACH,KAAChR,EAAM,CAAY,OAAZ,GAAAmH,CAAO,CAACnH,EAAI,AAAD,GAAX,kBAAoB,OAApB,KAAckH,MAAM,AAAD,GAAnB,oBAAsBG,QAAQ,AAAD,GAAK,CAAC,G,EAE5C,CAAC,GAGP,EACF,EAAG,CAAC1C,EAAQ,EAEL,CACLI,WAAAA,EACAJ,QAAAA,EACAmM,YAAAA,EACA3J,QAAAA,EACAd,UAAAA,EACAqK,WAAAA,EACAO,UAAAA,EACApI,gBAAAA,EACAF,mBAzDyB,SAACJ,CAAI,CAAUyE,CAAQ,EACnCyE,QACX,kHAGAf,EAAW/L,EAAQ+M,MAAM,CAAC,SAACtK,CAAM,E,OAAKA,EAAOqB,IAAI,GAAKF,C,IACtDyE,IAEJ,CAkDA,CACF,C,+uEC1EA,IAAM2E,EAAc,WAEdC,EAAc,WAClB,IAAMjN,EAAUkN,aAAaC,OAAO,CAACH,UACrC,AAAIhN,EACK,KAAKwB,KAAK4L,KAAK,CAACpN,IAElB,CAAEqN,QAAS,CAAEzO,KAAM,CAAC,CAAE,CAAE,CACjC,EAEM0O,EAAgB,SAAC9P,CAAQ,EAC7B0P,aAAaK,OAAO,CAACP,EAAaxL,KAAKC,SAAS,CAACjE,GACnD,EAEMgQ,EAAiB,WACrB,MAAO,SACT,EAEazN,EAAc,WACzB,IAAgC,SAAAsB,QAAA,EAAmB4L,KAAA,GAA5CzP,EAAyB,KAAfiQ,EAAe,KACM,SAAApM,QAAA,EAAiBmM,GAAA,GAAhDpJ,EAA+B,KAAlBC,EAAkB,KAChC1F,EAAUnB,CAAQ,CAAC4G,EAAY,CAE/BsJ,EAAgB,SAACC,CAAG,EACxBF,EAAY,SAACG,CAAG,EACd,IAAMC,EAAe,OAChBD,GACH,KAACxJ,EAAc,KACVwJ,CAAG,CAACxJ,EAAY,CAChBuJ,KAIP,OADAL,EAAcO,GACPA,CACT,EACF,EAyCMC,EAAa,SAAClK,CAAI,E,IAAU+J,EAAA,uDAAe,CAAE/O,KAAM,CAAC,CAAE,EAC1D6O,EAAY,SAACG,CAAG,EACd,IAAMC,EAAe,OAChBD,GACH,KAAChK,EAAO+J,IAGV,OADAL,EAAcO,GACPA,CACT,EACF,EAsGA,MAAO,CACLrQ,SAAAA,EACAmB,QAAAA,EACAyF,YAAAA,EAEAC,eAAAA,EACAhC,UA5JgB,SAACuB,CAAI,CAAU2C,CAAQ,EACvC,IAAe,EAAT9C,EAAS,AAAsB,OAAtB,GAAA9E,EAAQC,IAAI,CAAC2H,EAAS,AAAD,GAArB,oBAAwB9C,MAAM,CAC7C,GAAIA,GAAU5I,OAAOkT,MAAM,CAACtK,GAAQtI,MAAM,CAAG,GAIvCmQ,AAAS,KAHAwB,QACX,oJAEkB,MAAO,GAE7BY,EAAc,CACZ9O,KAAM,OACDD,EAAQC,IAAI,EACf,KAAC2H,EAAW3C,EACR,CACEnB,OAAQmB,EACRH,OAAQ,CAAC,EACT2D,KAAM,GACNvI,MAAO,GACPwI,QAAS,EACX,EACAlJ,KAAAA,GAER,EACF,EAuIE8F,aArImB,SAACL,CAAI,EACxB8J,EAAc,CACZ9O,KAAM,KACD/D,OAAO+D,IAAI,CAACD,EAAQC,IAAI,EAAEwN,MAAM,CAAC,SAACC,CAAI,CAAEhR,CAAG,EAC5C,IAAMoI,EAAS9E,EAAQC,IAAI,CAACvD,EAAI,CAC1B2S,EAAQpK,IAASH,EAAOhB,MAAM,CACpC,OAAO,OACF4J,GACH,KAAChR,EAAM2S,EAAQ7P,KAAAA,EAAYsF,GAE/B,EAAG,CAAC,GAER,EACF,EAyHEiK,cAAAA,EACAI,WAAAA,EACAtJ,iBA9GuB,WACvB,IAAMyJ,EAAQzB,OACZ,kKAEF,GAAIyB,EAAO,CACT,IACIC,EADmB,IAAAD,EAAME,KAAK,CAAC,QAA5BvK,EAAgB,KAAVH,EAAU,KAEvB,GAAI,CACF,IAAM2K,EAAK5M,KAAK4L,KAAK,CAAC3J,GAClB2K,GACFF,CAAAA,EAAgBE,CAAC,CAErB,CAAE,MAAOrP,EAAG,CACV6B,QAAQC,GAAG,CAAC,0BACd,CACAD,QAAQC,GAAG,CAAC,CAAE+C,KAAAA,EAAMH,OAAAA,CAAO,GAC3BqK,EAAWlK,EAAMsK,GACjB7J,EAAeT,EACjB,CACF,EA4FEW,oBA1F0B,WACbuI,QACX,kFAGAW,EAAY,SAACG,CAAG,EAEwBA,CAAG,CAAhCxJ,EAAY,CAArB,IAA6BiK,EAAA,A,6XAAST,EAAA,CAA7BxJ,E,SAET,OADAC,EAAe,WACR,KAAKgK,EACd,EAEJ,EA+EE5J,oBA7E0B,WAC1B+H,OAAO,WAAa,GAAiB,OAAfpI,EAAY,KAA2B,OAAxB5C,KAAKC,SAAS,CAAC9C,IACtD,EA4EE+E,UA1EgB,SAACrI,CAAG,CAAUoI,CAAM,EAWpCiK,EAVa,OACR/O,GAAA,CACHC,KAAM,OACDD,EAAQC,IAAI,EACf,KAACvD,EAAM,OACFsD,EAAQC,IAAI,CAACvD,EAAI,GACpBoI,OAAAA,C,OAKR,EA+DEyG,UA7DgB,SAAC7O,CAAG,EAEpB,OAAOiP,AADW2C,GACF,CAAC7I,EAAY,CAACxF,IAAI,CAACvD,EAAI,CAACoI,MAAM,AAChD,EA2DEuE,QAzDc,SAAC3M,CAAG,CAAU+L,CAAI,EAWhCsG,EAVa,OACR/O,GAAA,CACHC,KAAM,OACDD,EAAQC,IAAI,EACf,KAACvD,EAAM,OACFsD,EAAQC,IAAI,CAACvD,EAAI,GACpB+L,KAAAA,C,OAKR,EA8CEpI,SA5Ce,SAAC3D,CAAG,CAAUwD,CAAK,EAWlC6O,EAVa,OACR/O,GAAA,CACHC,KAAM,OACDD,EAAQC,IAAI,EACf,KAACvD,EAAM,OACFsD,EAAQC,IAAI,CAACvD,EAAI,GACpBwD,MAAAA,C,OAKR,EAiCEyP,WA/BiB,SAACjT,CAAG,CAAUgM,CAAO,EAWtCqG,EAVa,OACR/O,GAAA,CACHC,KAAM,OACDD,EAAQC,IAAI,EACf,KAACvD,EAAM,OACFsD,EAAQC,IAAI,CAACvD,EAAI,GACpBgM,QAAAA,C,OAKR,CAoBA,CACF,C,+eCpOO,IAAMyE,EAAa,SAAIyC,CAAU,E,QAAUC,EAAW,UAAX,6CAAW,EAAE,CAqB7D,IAA0B,G,EAAA,KAAAnN,QAAA,EAAYL,AApB1B,WACV,I,EAAMyN,EAAQvB,aAAaC,OAAO,CAACoB,GACnC,GAAIE,EAAO,CAET,GAAID,AAAoBrQ,KAAAA,IAApBqQ,EAASrT,MAAM,CAEjB,S,+CAAWqG,KAAK4L,KAAK,CAACqB,K,iSAAA,CAExB,OAAO,A,6aAAA,GAAKjN,KAAK4L,KAAK,CAACqB,GACzB,CAEA,OAAOD,CACT,K,EAQsC,E,iiBAA/BC,EAAmB,KAAZC,EAAY,KAC1B,MAAO,CAACD,EAPI,SAACvH,CAAI,EAGf,OAFAwH,EAASxH,GACTgG,aAAaK,OAAO,CAACgB,EAAY/M,KAAKC,SAAS,CAACyF,IACzCA,CACT,EAGmB,AACrB,C,gFCXA,MAZwB,SAACyH,CAAW,M,IAClC,GAAIA,I,EAAeA,E,SAAuBC,W,6FACxC,2CAAqB/B,IAAI,CAAC,Y,IAAGgC,EAAA,EAAAA,MAAA,CAAQC,EAAA,EAAAA,MAAA,CAAQC,EAAA,EAAAA,MAAA,CAAQC,EAAA,EAAAA,MAAA,CAAQC,EAAA,EAAAA,OAAA,CAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,EACV,EAEJ,C,63ECTO,IAAMlC,G,EAAc,WAAOF,CAAK,E,gCAErC,MAAO,C,EAAA,IAAIzJ,S,EAAQ,WAAOC,CAAO,E,IAIrBmI,EAKAhE,EAEEgI,EACkB,EAAjBnL,EAASH,EAYI,EAAfuL,EAAMC,EACgB,EAArB,EAAM,EAASC,EAalBtQ,E,2EApCHwN,EAAMhN,QAAQ,CAAC,cAAf,O,KAMW,OAJP2L,EAAMqB,EAAM+C,OAAO,CACvB,sBACA,iCAEW,C,EAAMrH,MAAMiD,G,QACZ,O,EAAMI,AADN,SACWiE,IAAI,G,QAC5B,GAAIrI,AADEA,CAAAA,EAAO,WACDA,EAAKsI,SAAS,CAClBN,EAAWhI,EAAKgI,QAAQ,CACvBnL,EAAiB,KAAAmD,EAAKuI,SAAS,CAACtB,KAAK,CAAC,QAArB,IACxBpL,EAAQ,CACNa,KAFcA,EAAQ,KAGtBE,KAAMF,EAAK8L,UAAU,CAAC,IAAK,KAC3B3L,QAAAA,EACA4L,SAAU,CAAC,Q,CACXzE,IAAKgE,CACP,QAEA,MAAM,AAAIU,MAAM,I,mBAEb,GAAIrD,EAAMhN,QAAQ,CAAC,mBAGxB,GAFO4P,EAAe,KAAA5C,EAAM4B,KAAK,CAAC,QAAZ,IAATiB,EAAS,KACd,EAAqB,kBAAiB,CAACA,EAAK,EAA5CxL,IAAI,CAAE,EAAe,EAAfG,OAAO,CAAEsL,EAAM,EAANA,CAAC,CACpB,EACFtM,EAAQ,CACNa,KAAM,EACNE,KAAO,iBAAiB4L,UAAU,CAAC,IAAK,KACxC3L,QAAS,EACT4L,SAAU,CAACN,E,CACXnE,IAAKiE,EAAKG,OAAO,CAAC,iBAAkB,GACtC,QACK,MAAM,AAAIM,MAAM,SAEvB,MAAM,AAAIA,MAAM,G,4CAEX7Q,EAAA,SACP8Q,MAAM,uDACNjP,QAAQsI,KAAK,CAACnK,GACdgE,EAAQ,M,yBAEZ,G,SA3C0BA,CAAO,E,oCA4CnC,G,SA9CkCwJ,CAAK,E,qHCShC,IAAM9B,EAAc,Y,IACzBpO,EAAA,EAAAA,KAAA,CACAD,EAAA,EAAAA,MAAA,CACAqH,EAAA,EAAAA,MAAA,CACA2D,EAAA,EAAAA,IAAA,CACA7E,EAAA,EAAAA,MAAA,CAEM+F,EAASpH,SAASqH,aAAa,CAAC,SACtCD,CAAAA,EAAOjM,KAAK,CAAGA,EACfiM,EAAOlM,MAAM,CAAGA,EAChB,IAAMqM,EAAMH,EAAOzC,UAAU,CAAC,MAI9B,GAHA4C,EAAIC,IAAI,GACRD,EAAIE,SAAS,CAAC,EAAG,EAAGL,EAAOjM,KAAK,CAAEiM,EAAOlM,MAAM,EAE3CqH,EAAQ,CAEVgF,EAAIqH,SAAS,GACbrH,EAAIsH,SAAS,CAAG,EACZxN,CAAAA,MAAAA,EAAA,OAAAA,EAAQI,MAAM,AAAD,EACf8F,EAAIuH,WAAW,CAAGvH,EAAIwH,SAAS,CAAG,UACzB,AAAA1N,CAAAA,MAAAA,EAAA,OAAAA,EAAQI,MAAM,AAAD,IAAM,GAC5B8F,EAAIuH,WAAW,CAAGvH,EAAIwH,SAAS,CAAG,UAElCxH,EAAIuH,WAAW,CAAGvH,EAAIwH,SAAS,CAAG,OAEpCxH,EAAIyH,GAAG,CAAC,EAAG,EAAG,EAAG,EAAG,EAAIxP,KAAKyP,EAAE,EAC/B1H,EAAI2H,MAAM,GACV3H,EAAI/C,IAAI,GACR+C,EAAI4H,SAAS,GACb5H,EAAIC,IAAI,GACRD,EAAI6H,OAAO,GAGX7H,EAAI8H,aAAa,CAAG,qBACpB9H,EAAI+H,aAAa,CAAG,KAEpB/H,CAAAA,EAAIgI,IAAI,CAAI,GAAW,OADN,GACM,cACvBhI,EAAIwH,SAAS,CAAG,QAChBxH,EAAIzM,SAAS,CAAG,SAChB,IAAM0U,EAASpI,EAAOjM,KAAK,CAAG,EAM9B,GALAoM,EAAIkI,QAAQ,CAAClN,EAAO5E,KAAK,CAAE6R,EAAQpI,EAAOlM,MAAM,CAAG,EAAGkM,EAAOjM,KAAK,EAClEoM,EAAIC,IAAI,GACRD,EAAI6H,OAAO,GAGPlJ,EAAM,CACR,IAAMwJ,EAAenN,EAAO5E,KAAK,CAAG,EAAI,EAClCgS,EAAQpN,EAAO5E,KAAK,CAAG,IAAM,EAC7BiS,EAAa,GAAKD,EAClBE,EAAc,GAAKF,CACzBpI,CAAAA,EAAIuH,WAAW,CAAG,OAElBvH,EAAIwH,SAAS,CAAG,OAGhB,IAAMe,EAAI,IAAIC,OAAO7J,GACrBqB,EAAIyI,SAAS,CAHFR,EAASI,EAAa,EACtBJ,EAASK,EAAc,EAAIH,GAGtCnI,EAAIoI,KAAK,CAACA,EAAOA,GACjBpI,EAAI2H,MAAM,CAACY,GACXvI,EAAI/C,IAAI,CAACsL,GACTvI,EAAIC,IAAI,GACRD,EAAI6H,OAAO,EACb,KAAO,CAEL7H,EAAI8H,aAAa,CAAG,qBACpB9H,EAAI+H,aAAa,CAAG,KAEpB/H,CAAAA,EAAIgI,IAAI,CAAI,GAAW,OADN,GACM,cACtBhI,EAAI0I,WAAW,CAAG,OAAU1I,EAAIwH,SAAS,CAAG,QAC7CxH,EAAIzM,SAAS,CAAG,SAChB,IAAM,EAASsM,EAAOjM,KAAK,CAAG,EAC9BoM,EAAIkI,QAAQ,CAAClN,EAAOhB,MAAM,CAAE,EAAQ6F,EAAOlM,MAAM,CAAG,GAAIkM,EAAOjM,KAAK,CAGtE,CACF,CAEA,MAAO,CACLoM,IAAAA,EACAH,OAAAA,CACF,CAiBF,C,giCCtFO,IAAMsE,G,KAAY,SACvBnJ,CAAM,CACN2N,CAAK,CACLC,CAAK,E,yjCAEL,MAAO,C,EAAA,IAAIvO,QAA2B,SAACC,CAAO,EAC5C,KAAAqH,IAAA,EAAK3G,GAEL,IAAM6N,EAAoC,EAAE,CAC5C7N,EAAOiJ,OAAO,CAAC6E,OAAO,CAAC,SAACC,CAAM,EAC5BF,EAAQG,IAAI,CAAC,KAAAC,UAAA,EAAWF,EAAO7E,KAAK,CAAE6E,EAAO5N,IAAI,EACnD,GAEAd,QAAQ6O,GAAG,CAACL,GAASzE,IAAI,CAAC,SAACH,CAAO,EAChC,IAAMlK,EAAqC,EAAE,CAC7CkK,EAAQ6E,OAAO,CAAC,SAACK,CAAM,EAChBA,EAAOjP,MAAM,CAUhBH,EAAQiP,IAAI,CAAC,KAAAI,UAAA,EAAWD,EAAOhO,IAAI,CAAEwN,EAAOC,KAT5CzQ,QAAQsI,KAAK,CACV,mCAAqD,OAAnB0I,EAAOhO,IAAI,CAAC,SAAkB,OAAXgO,EAAO1G,GAAG,EAChE0G,EAAO7S,CAAC,EAGVyD,EAAQiP,IAAI,CACV3O,QAAQC,OAAO,CAAC,CAAEa,KAAMgO,EAAOhO,IAAI,CAAEwN,MAAAA,EAAO7O,OAAQpE,KAAAA,CAAU,IAKpE,GAEA2E,QAAQ6O,GAAG,CAACnP,GAASqK,IAAI,CAAC,SAACiF,CAAQ,EACjC/O,EACE+O,EAAS1F,MAAM,CACb,SAAC4E,CAAC,CAAEjS,CAAC,E,OAAM,OACNiS,GACH,KAACjS,EAAE6E,IAAI,CAAG,OAAK7E,GAAA,CAAG4D,OAAQ,CAAC,CAAC5D,EAAEwD,MAAM,A,MAEtC,CAAC,GAGP,EACF,EACF,G,EACF,E,sLA1CEkB,CAAM,CACN2N,CAAK,CACLC,CAAK,E,4PCfA,IAAMQ,G,KAAa,SACxBjO,CAAI,CACJwN,CAAK,CACLC,CAAK,E,yjCAEL,MAAO,C,EAAA,IAAIvO,QAAwB,SAACC,CAAO,EACzC,IAAMgP,EAAa,GAAW,OAATX,EAAM,KAAQ,OAALxN,GAC9B,GAAIyN,EAAMW,GAAG,CAACD,GAEZhP,EAAQ,CAAEa,KAAAA,EAAMwN,MAAAA,EAAO7O,OADR8O,EAAMrQ,GAAG,CAAC+Q,EACK,OACzB,CAGL,IAAME,EAAUC,WAAW,WACzBnP,EAAQ,CAAEa,KAAAA,EAAMwN,MAAAA,EAAO7O,OAAQpE,KAAAA,CAAU,EAC3C,EAjBe,KAmBf,KAAAgU,UAAA,EAAY,GAAU,OAARvO,EAAK,KAAkB,OAAfwN,EAAMgB,KAAK,CAAC,KAC/BvF,IAAI,CAAC,SAACtK,CAAM,EACX8O,EAAMvQ,GAAG,CAACiR,EAAWxP,GACrBQ,EAAQ,CAAEa,KAAAA,EAAMwN,MAAAA,EAAO7O,OAAQA,CAAiB,GAChD8P,aAAaJ,EACf,GACCK,KAAK,CAAC,WACLvP,EAAQ,CAAEa,KAAAA,EAAMwN,MAAAA,EAAO7O,OAAQpE,KAAAA,CAAU,GACzCkU,aAAaJ,EACf,EACJ,CACF,G,EACF,E,sLA5BErO,CAAI,CACJwN,CAAK,CACLC,CAAK,E,wOCZP,I,IAAMkB,EAAa,IAAIC,IAEhB,IAAMd,G,KAAa,SAAOxG,CAAG,CAAUtH,CAAI,E,yjCAChD,MAAO,C,EAAA,IAAId,QAAuB,SAACC,CAAO,EAExC,GADI,CAACmI,GAAKnI,EAAQ,CAAEJ,OAAQ,GAAOuI,IAAAA,EAAKtH,KAAAA,CAAK,GACzC2O,EAAWP,GAAG,CAAC9G,GAAM,CACvBnI,EAAQ,CAAEJ,OAAQ,GAAMuI,IAAAA,EAAKtH,KAAAA,CAAK,GAClC,MACF,CACA,IAAM6O,EAAUvR,SAASqH,aAAa,CAAC,SACvCkK,CAAAA,EAAQnS,GAAG,CAAG4K,EACduH,EAAQzH,IAAI,CAAG,kBACfyH,EAAQC,KAAK,CAAG,GAChBD,EAAQE,KAAK,CAAG,GAChBF,EAAQG,MAAM,CAAG,WACfL,EAAWM,GAAG,CAAC3H,GACfnI,EAAQ,CAAEJ,OAAQ,GAAMuI,IAAAA,EAAKtH,KAAAA,CAAK,EACpC,EACA6O,EAAQK,OAAO,CAAG,SAAC/T,CAAC,E,OAAKgE,EAAQ,CAAEJ,OAAQ,GAAOuI,IAAAA,EAAKtH,KAAAA,EAAM7E,EAAAA,CAAE,E,EAE/DmC,SAAS6R,IAAI,CAACC,WAAW,CAACP,EAC5B,G,EACF,E,sLApBiCvH,CAAG,CAAUtH,CAAI,E,68ECSlD,IAAMwF,G,EAAQ,a,IAGL7L,EAIEwB,E,iDAJM,O,EAAMkU,UAAUC,GAAG,CAACC,UAAU,G,QAAtC5V,EAAQ,yB,GAAA,I,iBAEb,O,sBAAA,C,EAAMA,EAAK6V,MAAM,G,QACjB,OADA,SACA,C,EAAM7V,EAAK6L,KAAK,G,sBAAhB,S,yBAIJ,G,4CAEMO,EAAW,SAAC0J,CAAO,CAAUhL,CAAQ,EACzClC,MAAMC,IAAI,CAAC,CAAEjL,OAAQkY,GAAW,CAAE,GAAG9B,OAAO,CAAC,SAACjL,CAAC,CAAEgN,CAAK,EACpDjL,EAASiL,EACX,EACF,EAEO,IAAM9J,G,EAAkB,a,IACtBjM,E,iDAAQ,O,EAAM,KAAAgW,cAAA,I,QACrB,GADOhW,EAAQ,yB,GAAA,IAKb,OAHAA,EAAK6L,KAAK,CAAGA,EACZ7L,EAAsBoM,QAAQ,CAAG,SAACtB,CAAQ,E,OACzCsB,EAASpM,EAAK8I,QAAQ,CAAEgC,E,EACnB,C,GAAC9K,E,EAEV,MAAO,C,QACT,G,4CAEO,IAAM0L,G,EAAsB,a,IAC1B1L,E,iDAAQ,O,EAAM,KAAAiW,kBAAA,I,QACrB,GADOjW,EAAQ,yB,GAAA,IAKb,OAHAA,EAAK6L,KAAK,CAAGA,EACZ7L,EAAsBoM,QAAQ,CAAG,SAACtB,CAAQ,E,OACzCsB,EAASpM,EAAK8I,QAAQ,CAAEgC,E,EACnB,C,GAAC9K,E,EAEV,MAAO,C,QACT,G,4KC1CA,IAAMyP,EAAc,cAEd5D,EAAQ,WACZ8D,aAAauG,UAAU,CAACzG,EAC1B,EAEMvJ,EAAsC,CAC1C4J,QAAS,CACPrH,aAAc,kBACdK,SAAU,EACVH,YAAa,EACbwN,SAAU,EACVlL,UAAW,GACXY,MAAAA,CACF,CACF,EAEaK,EAAiB,WAC5B,I,IAAMkK,EAAczG,aAAaC,OAAO,CAACH,GACzC,GAAI2G,EACF,QAAO,E,EAAC,A,6aAAA,GAAKnS,KAAK4L,KAAK,CAACuG,I,KAAA,CAAcvK,MAAAA,C,iVAAQ,CAEhD,MAAO,EAAE,AACX,EAEaD,EAAsB,W,IACjC9N,EAAA,uDAA2B,UAErBsY,EAAclQ,CAAM,CAACpI,EAAI,CAE/B,OADA6R,aAAaK,OAAO,CAACP,EAAaxL,KAAKC,SAAS,CAACkS,IAC1C,CAAClQ,CAAM,CAACpI,EAAI,CAAC,AACtB,C"}