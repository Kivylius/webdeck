{"version":3,"file":"18.js","sources":["./node_modules/@svgr/webpack/dist/index.js!./src/icons/disconnect.svg","./src/App.styles.tsx","./src/App.tsx","./src/bootstrap.tsx","./src/components/Controller/Debugger/Debugger.tsx","./src/components/Controller/Header/Header.styles.tsx","./src/components/Controller/Header/Header.tsx","./src/components/Controller/Plugin/Plugin.tsx","./src/components/Controller/Plugins/Plugins.tsx","./src/components/Controller/Profiles/Profiles.styles.tsx","./src/components/Controller/Profiles/Profiles.tsx","./src/components/Deck/Deck.styles.tsx","./src/components/Deck/Deck.tsx","./src/components/Deck/DeckButtonView/DeckButtonView.tsx","./src/components/Deck/DeckFooterText/DeckFooterText.tsx","./src/components/SubSubTitle/SubSubTitle.tsx","./src/components/SubTitle/SubTitle.tsx","./src/contexts/AppContext.tsx","./src/hooks/useDeck.ts","./src/hooks/usePlugins.ts","./src/hooks/useProfiles.ts","./src/hooks/useStorage.ts","./src/reportWebVitals.ts","./src/utils/drawKey.ts","./src/utils/fetchPlugin.ts","./src/utils/initalise.ts","./src/utils/loadModule.ts","./src/utils/loadScript.ts","./src/utils/virtualDeck.ts"],"sourcesContent":["var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nconst SvgDisconnect = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  className: \"disconnect_svg__icon\",\n  viewBox: \"0 0 1024 1024\"\n}, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1M446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51zM260.3 209.4a8.03 8.03 0 0 0-11.3 0L209.4 249a8.03 8.03 0 0 0 0 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3z\"\n})));\nexport default SvgDisconnect;","import styled from \"styled-components\";\n\nexport const Wrapper = styled(\"div\")(() => ({\n  textAlign: \"center\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  height: \"100vh\",\n  width: \"100vw\",\n}));\n\n//@ts-expect-error styled ignore\nexport const Controller = styled(\"div\")<{ $isOpen: boolean }>({\n  display: ({ $isOpen }: { $isOpen: boolean }) => ($isOpen ? \"block\" : \"none\"),\n  marginLeft: 50,\n  padding: \"50px\",\n  paddingTop: \"30px\",\n  border: \"2px inset black\",\n  background: \"rgb(21 21 21)\",\n  borderRadius: \"20px\",\n  color: \"white\",\n  maxHeight: \"80vh\",\n  overflow: \"auto\",\n  maxWidth: 350,\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n});\n\nexport const Settings = styled(\"div\")({\n  color: \"white\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  padding: \"2px 0px\",\n});\n","import { Buffer } from \"buffer\";\nimport { Controller, Settings, Wrapper } from \"./App.styles\";\n\nimport { Deck } from \"./components/Deck/Deck\";\nimport { SubSubTitle } from \"./components/SubSubTitle/SubSubTitle\";\nimport { Profiles } from \"./components/Controller/Profiles/Profiles\";\nimport { Header } from \"./components/Controller/Header/Header\";\nimport { Debugger } from \"./components/Controller/Debugger/Debugger\";\nimport { useAppContext } from \"./contexts/AppContext\";\nimport { Plugins } from \"./components/Controller/Plugins/Plugins\";\nimport { Plugin } from \"./components/Controller/Plugin/Plugin\";\nimport classNames from \"classnames\";\n\n// injected Buffer\nwindow.Buffer = Buffer;\n\nconst App = () => {\n  const { deck, profiles } = useAppContext();\n\n  return (\n    <div\n      className={classNames({\n        wrapper: true,\n        hasDeck: !!deck.current,\n      })}\n      style={{\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n      }}\n    >\n      <Wrapper>\n        {deck.current ? (\n          <>\n            <Deck />\n            <Controller\n              $isOpen={deck.selectedKey !== undefined && deck.editMode}\n            >\n              <Header />\n              <Profiles />\n              {deck.selectedKey !== undefined && (\n                <>\n                  <Settings>\n                    <SubSubTitle>Currently selected key</SubSubTitle>\n                    <button className=\"s\" disabled>\n                      {deck.selectedKey}\n                    </button>\n                  </Settings>\n                  {/* TODO: <Settings>\n                    <SubSubTitle>Icon</SubSubTitle>\n                    <select required name=\"\" value=\"\" onChange={() => {}}>\n                      <option value=\"\" disabled hidden>\n                        inherit\n                      </option>\n                      <option value=\"1\" disabled>\n                        coming soon\n                      </option>\n                    </select>\n                  </Settings> */}\n                  <Settings>\n                    <SubSubTitle>Subtitle</SubSubTitle>\n                    <input\n                      value={\n                        profiles.profile.keys[deck.selectedKey]?.title || \"\"\n                      }\n                      onChange={(e) =>\n                        profiles.setTitle(deck.selectedKey!, e.target.value)\n                      }\n                      placeholder=\"key subtitle\"\n                    />\n                  </Settings>\n                  <Settings>\n                    <SubSubTitle>Plugin</SubSubTitle>\n                    <Plugins />\n                  </Settings>\n                  <Settings>\n                    <Plugin />\n                  </Settings>\n                </>\n              )}\n              <small style={{ opacity: 0.5 }}>\n                All changes are saved automaticly.\n              </small>\n              {window.location.search.includes(\"debug\") && <Debugger />}\n            </Controller>\n          </>\n        ) : (\n          <div style={{ color: \"white\" }}>\n            <div>\n              <h1>WEB DECK</h1>\n              <p>Connect you usb device or create a virtual device.</p>\n              <br />\n            </div>\n            <button onClick={deck.tryGetStreamDeck}>Connect</button>\n            <small> -or- </small>\n            <button onClick={deck.tryCreateVirtualDeck}>\n              Create Virtual Device\n            </button>\n          </div>\n        )}\n      </Wrapper>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { AppContext } from \"./contexts/AppContext\";\nimport { usePlugins } from \"./hooks/usePlugins\";\nimport { useProfiles } from \"./hooks/useProfiles\";\nimport { useDeck } from \"./hooks/useDeck\";\n\nexport type AppContainerType = {\n  deck: ReturnType<typeof useDeck>;\n  profiles: ReturnType<typeof useProfiles>;\n  plugins: ReturnType<typeof usePlugins>;\n};\n\nexport const Container = () => {\n  const profiles = useProfiles();\n  const plugins = usePlugins();\n  const deck = useDeck(profiles, plugins);\n\n  return (\n    <AppContext.Provider value={{ deck, profiles, plugins }}>\n      {window.location.search.includes(\"debug\") && (\n        <>\n          <div>{!plugins.initalised && <>initialising plugins...</>}</div>\n          <img\n            id=\"prev\"\n            src=\"\"\n            style={{ margin: 10, border: \"1px solid red\" }}\n          />\n        </>\n      )}\n\n      <App />\n    </AppContext.Provider>\n  );\n};\n\nconst root = ReactDOM.createRoot(\n  document.getElementById(\"root\") as HTMLElement\n);\n\nroot.render(<Container />);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { FC, useState } from \"react\";\nimport { SubSubTitle } from \"../../SubSubTitle/SubSubTitle\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\n// TODO: remove depedancy for subtitle\nexport const Debugger: FC = () => {\n  const { profiles, plugins } = useAppContext();\n  const [open, setIsOpen] = useState(false);\n  return (\n    <div>\n      <div\n        style={{\n          justifyContent: \"space-between\",\n          display: \"flex\",\n          alignItems: \"center\",\n          padding: \"0 0 8px 0\",\n        }}\n      >\n        <SubSubTitle>debugging</SubSubTitle>\n        <button className=\"s\" onClick={() => setIsOpen(!open)}>\n          {open ? \" close\" : \"open\"}\n        </button>\n      </div>\n      <div style={{ display: open ? \"block\" : \"none\", textAlign: \"left\" }}>\n        <span>Profiles:</span>\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\n          {JSON.stringify(profiles.profiles, null, 4)}\n        </pre>\n        <span>Plugins:</span>\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\n          {JSON.stringify(plugins.plugins, null, 4)}\n        </pre>\n        <span>Manifest:</span>\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\n          {JSON.stringify(plugins.manifest, null, 4)}\n        </pre>\n      </div>\n    </div>\n  );\n};\n","import { styled } from \"styled-components\";\n\nexport const HeaderWrapper = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  minWidth: 350,\n  paddingBottom: \"8px\",\n  marginBottom: \"10px\",\n  borderBottom: \"1px solid #474747\",\n});\n","import { HeaderWrapper } from \"./Header.styles\";\nimport { SubTitle } from \"../../SubTitle/SubTitle\";\nimport { FC } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Header: FC = () => {\n  const { deck } = useAppContext();\n  return (\n    <HeaderWrapper>\n      <SubTitle>Settings</SubTitle>\n      <button\n        title=\"close\"\n        className=\"s\"\n        onClick={() => deck.setSelectedKey(undefined)}\n      >\n        ×\n      </button>\n    </HeaderWrapper>\n  );\n};\n","import { FC, lazy, useEffect, useState, Suspense } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\ntype FederatedComponent = FC<{\n  key: string;\n  config: unknown;\n  setConfig: (config: Record<string | number | symbol, unknown>) => void;\n  icon?: string;\n  setIcon?: (icon: string) => void;\n}>;\n\nexport const Plugin: FC = () => {\n  const { plugins, profiles, deck } = useAppContext();\n  const [Plugin, setPlugin] = useState<FederatedComponent | null>(null);\n\n  const key = deck.selectedKey!;\n  const keyConfig = profiles.profile.keys[key];\n  const module = plugins.getModule(keyConfig?.plugin);\n  const status = plugins.status[keyConfig?.plugin];\n\n  useEffect(() => {\n    if (module) {\n      const Component = lazy(() => {\n        return Promise.resolve(module);\n      });\n      setPlugin(Component);\n    } else {\n      setPlugin(null);\n    }\n  }, [module]);\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        maxHeight: \"400px\",\n        minHeight: \"100px\",\n        outline: \"none\",\n        margin: \"8px 0\",\n        border: \"2px solid black\",\n        position: \"relative\",\n        textAlign: \"left\",\n        borderRadius: 10,\n        overflow: \"hidden\",\n      }}\n    >\n      <Suspense fallback=\"Loading System\">\n        {Plugin && keyConfig?.config && module ? (\n          <Plugin\n            key={keyConfig.plugin + key}\n            config={keyConfig.config}\n            setConfig={(config: Record<string | number | symbol, unknown>) => {\n              profiles.setConfig(key, config);\n            }}\n          />\n        ) : status?.loaded === false ? (\n          <div\n            style={{\n              display: \"flex\",\n              textAlign: \"center\",\n              width: \"100%\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              height: \"100px\",\n              color: \"#cb0000\",\n              background: \"#f7a5a5\",\n            }}\n          >\n            Failed to load {keyConfig.plugin} plugin!\n          </div>\n        ) : (\n          <div></div>\n        )}\n      </Suspense>\n    </div>\n  );\n};\n","import { FC } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Plugins: FC = () => {\n  const { profiles, deck, plugins } = useAppContext();\n  const selectedPlugin = profiles.profile.keys[deck.selectedKey!]?.plugin;\n  return (\n    <div>\n      <select\n        name=\"plugins\"\n        id=\"plugins\"\n        title=\"select plugin\"\n        value={selectedPlugin || \"\"}\n        onChange={(e) => profiles.setPlugin(e.target.value, deck.selectedKey!)}\n      >\n        <option value=\"\">select...</option>\n        {plugins.plugins.map((plugin) => {\n          return (\n            <option key={plugin.name} value={plugin.name}>\n              {plugin.name} {plugin.creator && `@${plugin.creator}`}\n            </option>\n          );\n        })}\n      </select>\n      <button\n        title=\"remove plugin\"\n        className=\"s\"\n        onClick={() =>\n          plugins.promptRemovePlugin(selectedPlugin, () => {\n            // once pluging removed remove bindings\n            profiles.removePlugin(selectedPlugin);\n          })\n        }\n        disabled={!selectedPlugin}\n      >\n        -\n      </button>\n      <button\n        title=\"add plugin\"\n        className=\"s\"\n        onClick={plugins.promptAddPlugin}\n      >\n        +\n      </button>\n    </div>\n  );\n};\n","import styled from \"styled-components\";\n\nexport const ProfilesWrapper = styled(\"div\")({\n  color: \"white\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  paddingBottom: \"8px\",\n  marginBottom: \"5px\",\n  borderBottom: \"1px solid #474747\",\n});\n","import { FC } from \"react\";\nimport { SubTitle } from \"../../SubTitle/SubTitle\";\nimport { ProfilesWrapper } from \"./Profiles.styles\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const Profiles: FC = () => {\n  const { profiles } = useAppContext();\n  return (\n    <ProfilesWrapper>\n      <SubTitle>Profiles</SubTitle>\n      <div>\n        <select\n          name=\"profile\"\n          id=\"profile\"\n          title=\"select profile\"\n          value={profiles.profileName}\n          onChange={(e) => profiles.setProfileName(e.target.value)}\n        >\n          {Object.keys(profiles.profiles).map((profileKey) => {\n            return (\n              <option key={profileKey} value={profileKey}>\n                {profileKey}\n              </option>\n            );\n          })}\n        </select>\n        <button\n          disabled={profiles.profileName === \"default\"}\n          title=\"remove profile\"\n          className=\"s\"\n          onClick={profiles.promptRemoveProfile}\n        >\n          -\n        </button>\n        <button\n          title=\"new profile\"\n          className=\"s\"\n          onClick={profiles.promptAddProfile}\n        >\n          +\n        </button>\n        <button\n          title=\"export profile\"\n          className=\"s\"\n          onClick={profiles.promptExportProfile}\n        >\n          ↗\n        </button>\n      </div>\n    </ProfilesWrapper>\n  );\n};\n","import styled from \"styled-components\";\nimport Disconnect from \"../../icons/disconnect.svg\";\n\nexport const DeckWrapper = styled(\"div\")({\n  padding: \"50px\",\n  paddingTop: \"30px\",\n  border: \"2px inset black\",\n  background: \"rgb(21 21 21)\",\n  borderRadius: \"20px\",\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n  position: \"relative\",\n});\n\nexport const DeckTitle = styled(\"h1\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 20,\n  paddingBottom: 20,\n  paddingTop: 0,\n  margin: 0,\n  color: \"white\",\n  textTransform: \"uppercase\",\n});\n\nexport const DeckLayout = styled(\"div\")<{ $columns: number }>(\n  ({ $columns }) => ({\n    display: \"grid\",\n    gap: \"20px\",\n    gridTemplateColumns: `repeat(${$columns}, min-content)`,\n  })\n);\n\nexport const DeckButton = styled(\"button\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  border: \"2px solid #888888\",\n  width: \"77px\",\n  height: \"77px\",\n  borderRadius: 10,\n  // testing\n  background: \"red\",\n  position: \"relative\",\n  padding: \"0\",\n  backgroundColor: \"rgb(37 37 37)\",\n  outline: \"4px solid black\",\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n  transition: \".13s ease-in-out\",\n  cursor: \"pointer\",\n  // active\n  \"&:active:not(.editMode), &.active\": {\n    boxShadow: \"none\",\n    border: \"0px solid\",\n    backgroundColor: \"rgb(35 35 35)\",\n    \"& > div\": {\n      boxShadow: \"none\",\n      border: \"0px solid\",\n      \"& > *\": {\n        transition: \".13s ease-in-out\",\n        transform: \"scale(0.9)\",\n      },\n    },\n  },\n  \"&.active\": {\n    //backgroundColor: \"rgb(255 0 0)\",\n  },\n  \"&.selected\": {\n    outline: \"2px dotted #ffffff\",\n    outlineOffset: \"8px\",\n  },\n  color: \"white\",\n});\n\nexport const DisconnectButton = styled(Disconnect)({\n  marginLeft: 16,\n  marginTop: 3,\n  height: 18,\n  width: 18,\n  fill: \"white\",\n  opacity: 0.5,\n  cursor: \"pointer\",\n  transition: \"all 300ms\",\n  \"&:hover\": {\n    opacity: 1,\n    fill: \"red\",\n  },\n});\n\nexport const DeckButtonContent = styled(\"div\")({\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  boxShadow:\n    \"rgb(221, 221, 221) 0px 0px 0px inset, rgb(47 47 47) -2px -2px 0px\",\n  borderRadius: 10,\n  transition: \".13s ease-in-out\",\n  zIndex: 1,\n  overflow: \"hidden\",\n  \"& > *\": {\n    transition: \".13s ease-in-out\",\n    transform: \"scale(1)\",\n  },\n});\n","import { FC } from \"react\";\nimport classNames from \"classnames\";\nimport {\n  DeckButton,\n  DeckButtonContent,\n  DeckLayout,\n  DeckTitle,\n  DeckWrapper,\n  DisconnectButton,\n} from \"./Deck.styles\";\nimport { useAppContext } from \"../../contexts/AppContext\";\nimport { DeckFooterText } from \"./DeckFooterText/DeckFooterText\";\nimport { DeckButtonView } from \"./DeckButtonView/DeckButtonView\";\n\nexport const Deck: FC = () => {\n  const { deck } = useAppContext();\n\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <DeckWrapper>\n        <DeckTitle>\n          {deck.current?.PRODUCT_NAME}{\" \"}\n          <span title=\"Disconect device\">\n            <DisconnectButton onClick={() => deck.disconect()} />\n          </span>\n        </DeckTitle>\n        <DeckLayout $columns={deck.current?.KEY_COLUMNS || 0}>\n          {Array.from({ length: deck.current?.NUM_KEYS || 0 }).map(\n            (_, keyIndex) => (\n              <DeckButton\n                key={keyIndex}\n                onMouseDown={() => deck.onMouseDown(keyIndex)}\n                onMouseUp={() => deck.onMouseUp(keyIndex)}\n                onClick={() => {\n                  if (deck.editMode) {\n                    deck.setSelectedKey(keyIndex);\n                  }\n                }}\n                className={classNames({\n                  active: deck.pressedMap[keyIndex],\n                  selected: deck.editMode && deck.selectedKey === keyIndex,\n                  editMode: deck.editMode,\n                })}\n              >\n                <DeckButtonContent>\n                  <DeckButtonView keyIndex={keyIndex} />\n                </DeckButtonContent>\n              </DeckButton>\n            )\n          )}\n        </DeckLayout>\n      </DeckWrapper>\n      <DeckFooterText />\n    </div>\n  );\n};\n","import { useEffect, useRef } from \"react\";\nimport { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const DeckButtonView = ({ keyIndex }: { keyIndex: number }) => {\n  const {\n    profiles: { profile },\n    plugins,\n  } = useAppContext();\n\n  const ref = useRef<SVGSVGElement>(null);\n  const plugin = profile.keys[keyIndex]?.plugin;\n  const icon =\n    plugins.manifest[plugin]?.icons?.[profile.keys[keyIndex]?.icon].icon;\n  const title = profile.keys[keyIndex]?.title;\n  const loading = profile.keys[keyIndex]?.loading;\n  const status = plugins.status[plugin];\n\n  // fix height of svgs\n  useEffect(() => {\n    if (ref.current && !ref.current.getAttribute(\"viewBox\")) {\n      const bb = ref.current?.querySelector(\"path\")?.getBoundingClientRect();\n      ref.current.setAttribute(\"viewBox\", `0 0 ${bb?.width} ${bb?.height}`);\n    }\n  }, [ref, icon]);\n\n  return (\n    <div\n      key={icon}\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n        width: \"100%\",\n        height: \"100%\",\n      }}\n    >\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 4,\n          display: \"flex\",\n          width: \"calc(100% - 8px)\",\n          justifyContent: \"space-between\",\n          color: \"gray\",\n        }}\n      >\n        {plugin && (\n          <div style={{ width: \"100%\" }}>\n            {loading ? (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                height={16}\n                viewBox=\"0 0 200 200\"\n              >\n                <circle\n                  fill=\"#FFF\"\n                  stroke=\"#FFF\"\n                  strokeWidth=\"2\"\n                  r=\"15\"\n                  cx=\"35\"\n                  cy=\"100\"\n                >\n                  <animate\n                    attributeName=\"cx\"\n                    calcMode=\"spline\"\n                    dur=\"1.4\"\n                    values=\"35;165;165;35;35\"\n                    keySplines=\"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1\"\n                    repeatCount=\"indefinite\"\n                    begin=\"0\"\n                  />\n                </circle>\n                <circle\n                  fill=\"#FFF\"\n                  stroke=\"#FFF\"\n                  strokeWidth=\"2\"\n                  opacity=\".8\"\n                  r=\"15\"\n                  cx=\"35\"\n                  cy=\"100\"\n                >\n                  <animate\n                    attributeName=\"cx\"\n                    calcMode=\"spline\"\n                    dur=\"1.4\"\n                    values=\"35;165;165;35;35\"\n                    keySplines=\"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1\"\n                    repeatCount=\"indefinite\"\n                    begin=\"0.05\"\n                  />\n                </circle>\n                <circle\n                  fill=\"#FFF\"\n                  stroke=\"#FFF\"\n                  strokeWidth=\"2\"\n                  opacity=\".6\"\n                  r=\"15\"\n                  cx=\"35\"\n                  cy=\"100\"\n                >\n                  <animate\n                    attributeName=\"cx\"\n                    calcMode=\"spline\"\n                    dur=\"1.4\"\n                    values=\"35;165;165;35;35\"\n                    keySplines=\"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1\"\n                    repeatCount=\"indefinite\"\n                    begin=\".1\"\n                  />\n                </circle>\n                <circle\n                  fill=\"#FFF\"\n                  stroke=\"#FFF\"\n                  strokeWidth=\"2\"\n                  opacity=\".4\"\n                  r=\"15\"\n                  cx=\"35\"\n                  cy=\"100\"\n                >\n                  <animate\n                    attributeName=\"cx\"\n                    calcMode=\"spline\"\n                    dur=\"1.4\"\n                    values=\"35;165;165;35;35\"\n                    keySplines=\"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1\"\n                    repeatCount=\"indefinite\"\n                    begin=\".15\"\n                  />\n                </circle>\n                <circle\n                  fill=\"#FFF\"\n                  stroke=\"#FFF\"\n                  strokeWidth=\"2\"\n                  opacity=\".2\"\n                  r=\"15\"\n                  cx=\"35\"\n                  cy=\"100\"\n                >\n                  <animate\n                    attributeName=\"cx\"\n                    calcMode=\"spline\"\n                    dur=\"1.4\"\n                    values=\"35;165;165;35;35\"\n                    keySplines=\"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1\"\n                    repeatCount=\"indefinite\"\n                    begin=\".2\"\n                  />\n                </circle>\n              </svg>\n            ) : (\n              <span\n                style={{\n                  color: status?.loaded ? \"#04df04\" : !status ? \"gray\" : \"red\",\n                }}\n                title={`${keyIndex + 1}`}\n              >\n                •\n              </span>\n            )}\n          </div>\n        )}\n      </div>\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          position: \"relative\",\n          height: title ? 36 : 44,\n          width: title ? 36 : 44,\n          marginBottom: icon ? 4 : 0,\n        }}\n      >\n        {icon ? (\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"currentColor\"\n            width=\"100%\"\n            height=\"100%\"\n            preserveAspectRatio=\"xMidYMid meet\"\n            ref={ref}\n            key={icon}\n          >\n            <path d={icon} />\n          </svg>\n        ) : plugin ? (\n          plugin\n        ) : (\n          keyIndex + 1\n        )}\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          bottom: 4,\n          left: 4,\n          width: \"calc(100% - 8px)\",\n          fontSize: 10,\n        }}\n      >\n        {title ? <small>{title}</small> : null}\n      </div>\n    </div>\n  );\n};\n","import { useAppContext } from \"../../../contexts/AppContext\";\n\nexport const DeckFooterText = () => {\n  const { deck } = useAppContext();\n  if (!deck.isVirtual) return null;\n\n  return (\n    <small\n      style={{\n        color: \"white\",\n        paddingTop: 20,\n        opacity: 0.2,\n        fontSize: 12,\n      }}\n    >\n      You are currently in {deck.editMode ? \"Edit Mode\" : \"Preview Mode\"}.\n      Switch to{\" \"}\n      <a\n        className=\"a\"\n        href=\"#\"\n        onClick={(e) => {\n          e.preventDefault();\n          deck.setEditMode(!deck.editMode);\n        }}\n      >\n        {deck.editMode ? \"Preview Mode\" : \"Edit Mode\"}\n      </a>{\" \"}\n      to {deck.editMode ? \"test\" : \"edit\"} it.\n    </small>\n  );\n};\n","import styled from \"styled-components\";\n\nexport const SubSubTitle = styled(\"h3\")({\n  display: \"inline-block\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 14,\n  padding: 0,\n  margin: 0,\n  color: \"white\",\n});\n","import styled from \"styled-components\";\n\nexport const SubTitle = styled(\"h2\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  fontSize: 16,\n  padding: 0,\n  margin: 0,\n  color: \"white\",\n  textTransform: \"uppercase\",\n});\n","import { createContext, useContext } from \"react\";\nimport { AppContainerType } from \"../bootstrap\";\n\nexport const AppContext = createContext({} as AppContainerType);\n\nexport const useAppContext = () => {\n  return useContext(AppContext);\n};\n","import { useCallback, useEffect, useState } from \"react\";\nimport {\n  StreamDeckWeb,\n  getStreamDecks,\n  requestStreamDecks,\n} from \"@elgato-stream-deck/webhid\";\nimport {\n  VirtualDeck,\n  getVirtualDeck,\n  requestVirtualDecks,\n} from \"../utils/virtualDeck\";\nimport { usePlugins } from \"./usePlugins\";\nimport { useProfiles } from \"./useProfiles\";\nimport { drawKey } from \"../utils/drawKey\";\n\nexport const useDeck = (\n  profiles: ReturnType<typeof useProfiles>,\n  plugins: ReturnType<typeof usePlugins>\n) => {\n  const [editMode, setEditMode] = useState(true);\n  const [selectedKey, setSelectedKey] = useState<number | undefined>(0);\n  const [virtualDeck, setVirtualDeck] = useState<VirtualDeck | null>();\n  const [streamDeck, setStreamDeck] = useState<StreamDeckWeb | null>();\n  const [pressedMap, setPressedMap] = useState<{ [key: number]: boolean }>({});\n\n  const onMouseDown = (keyIndex: number) => {\n    if (streamDeck) {\n      // streamDeck!.fillKeyColor(keyIndex, 255, 0, 0);\n    } else {\n      console.log(\"pressed key\", keyIndex);\n    }\n  };\n\n  const onMouseUp = (keyIndex: number) => {\n    if (editMode) {\n      // TODO\n    } else {\n      const key = profiles.profile.keys[keyIndex];\n      if (key?.plugin) {\n        const module = plugins.getModule(key.plugin);\n        try {\n          module!.onPress!({\n            ...key,\n            keyIndex,\n            setIcon: (icon: string) => profiles.setIcon(keyIndex, icon),\n          });\n        } catch (e) {\n          console.warn(\n            `Webdeck: Failed to execute ${key.plugin}. Have you added and exported onPress() functions in you plugin?`,\n            e\n          );\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    const execute = async () => {\n      const [_streamDeck] = await getStreamDecks();\n      if (_streamDeck) {\n        setStreamDeck(_streamDeck);\n        return;\n      } else {\n        const [_virtualdeck] = getVirtualDeck();\n        if (_virtualdeck) {\n          setVirtualDeck(_virtualdeck);\n        }\n      }\n    };\n    execute();\n  }, []);\n\n  const tryGetStreamDeck = useCallback(async () => {\n    const [_streamDeck] = await requestStreamDecks();\n    if (!_streamDeck) {\n      console.error(\"Couldn’t get a Stream Deck\");\n    } else {\n      setStreamDeck(_streamDeck);\n      _streamDeck.clearPanel();\n    }\n  }, []);\n\n  const tryCreateVirtualDeck = useCallback(() => {\n    const [_virtualdeck] = requestVirtualDecks();\n    if (!_virtualdeck) {\n      console.error(\"Couldn’t get a Virtual Deck\");\n    } else {\n      setVirtualDeck(_virtualdeck);\n    }\n    console.log(_virtualdeck);\n  }, []);\n\n  const disconect = useCallback(async () => {\n    if (streamDeck) {\n      //TODO: temporary solution, untill forget is added\n      //@ISSUE: https://github.com/Julusian/node-elgato-stream-deck/issues/79\n      const [deck] = await navigator.hid.getDevices();\n      try {\n        await deck.forget();\n        await deck.close();\n      } catch (e) {\n        /*suppress error */\n      }\n      setStreamDeck(null);\n    } else if (virtualDeck) {\n      virtualDeck.close();\n      setVirtualDeck(null);\n    }\n  }, [streamDeck, virtualDeck]);\n\n  useEffect(() => {\n    const _onPressDown = (keyIndex: number) => {\n      setPressedMap((old) => ({\n        ...old,\n        [keyIndex]: true,\n      }));\n    };\n\n    const _onPressUp = (keyIndex: number) => {\n      setPressedMap((old) => ({\n        ...old,\n        [keyIndex]: false,\n      }));\n\n      // callback from plugin\n      const key = profiles.profile.keys[keyIndex];\n      if (key?.plugin) {\n        const module = plugins.getModule(key.plugin);\n        try {\n          module!.onPress!({\n            ...key,\n            keyIndex,\n            setIcon: (icon: string) => profiles.setIcon(keyIndex, icon),\n          });\n        } catch (e) {\n          console.warn(\n            `Webdeck: Failed to execute ${key.plugin}. Have you added and exported onPress() functions in you plugin?`,\n            e\n          );\n        }\n      }\n    };\n\n    // draw keys to steamdeck\n    if (streamDeck) {\n      Object.keys(profiles.profile.keys).forEach((key) =>\n        drawKey(\n          streamDeck,\n          key,\n          profiles.profile.keys[key],\n          plugins.status[profiles.profile.keys[key].plugin],\n          selectedKey,\n          plugins.manifest[profiles.profile.keys[key].plugin]?.icons?.[\n            profiles.profile.keys[key]?.icon\n          ].icon\n        )\n      );\n    }\n\n    if (streamDeck) {\n      streamDeck.on(\"down\", _onPressDown);\n      streamDeck.on(\"up\", _onPressUp);\n    }\n    return () => {\n      streamDeck?.off(\"down\", _onPressDown);\n      streamDeck?.off(\"up\", _onPressUp);\n    };\n  }, [streamDeck, profiles.profile.keys, selectedKey]);\n\n  const current = streamDeck || virtualDeck;\n\n  return {\n    current,\n    initalised: !!current,\n    onMouseDown,\n    onMouseUp,\n    selectedKey,\n    setSelectedKey,\n    disconect,\n\n    // virtual deck stuff\n    tryCreateVirtualDeck,\n    isVirtual: !!virtualDeck,\n\n    // steam deck stuff\n    tryGetStreamDeck,\n    pressedMap,\n\n    // preview mode\n    editMode,\n    setEditMode,\n  };\n};\n","import { useEffect, useState } from \"react\";\nimport { Module, ModuleManifest } from \"../types/Module\";\nimport { ModulesResolution, initalise } from \"../utils/initalise\";\nimport { Plugin } from \"../types/Plugin\";\nimport { useStorage } from \"./useStorage\";\nimport { fetchPlugin } from \"../utils/fetchPlugin\";\n\nconst PLUGIN_SCOPE = \"./Plugin\";\nconst STORAGE_KEY_PLUGINS = \"plugins\";\nconst STORAGE_KEY_CONFIG = \"manifest\";\nconst MODULE_CATCHE = new Map<string, Module>();\n\nexport const usePlugins = () => {\n  const [plugins, setPlugins] = useStorage<Plugin[]>(STORAGE_KEY_PLUGINS);\n  const [manifest, setManifest] = useStorage<Record<string, ModuleManifest>>(\n    STORAGE_KEY_CONFIG,\n    {} as never[]\n  );\n  const [initalised, setInitalised] = useState(false);\n  const [status, setStatus] = useState<ModulesResolution>({});\n  const pluginsById = plugins.reduce(\n    (prev, current) => ({ ...prev, [current.name]: current }),\n    {} as Record<string, Plugin>\n  );\n\n  const addPlugin = (plugin: Plugin) => {\n    setPlugins([...plugins, plugin]);\n  };\n\n  const promptAddPlugin = async () => {\n    const input = prompt(\n      \"Add url to plugin. List of plugins: https://github.com/search?q=topic:webdeck-plugin\"\n    );\n    if (input) {\n      const plugin = await fetchPlugin(input);\n      if (plugin) addPlugin(plugin);\n    }\n  };\n\n  const promptRemovePlugin = (name: string, callback: () => void) => {\n    const resp = confirm(\n      \"Are you sure you want to remove this plugin and everywhere where it was used? This action is not reversable.\"\n    );\n    if (resp) {\n      setPlugins(plugins.filter((plugin) => plugin.name !== name));\n      callback();\n    }\n  };\n\n  const getModule = (name: string) => {\n    const moduleKey = `${PLUGIN_SCOPE}-${name?.replaceAll(\"-\", \"_\")}`;\n    return MODULE_CATCHE.get(moduleKey);\n  };\n\n  const getModules = () => {\n    return MODULE_CATCHE;\n  };\n\n  // initalise plugins\n  useEffect(() => {\n    setInitalised(false);\n    // module federation config\n    const config = {\n      name: \"webdeck\",\n      remotes: plugins.map((plugin) => {\n        return {\n          name: plugin.name.replaceAll(\"-\", \"_\"),\n          entry: `${plugin.url}remoteEntry.js`,\n        };\n      }),\n    };\n    // configure all plugins\n    initalise(config, PLUGIN_SCOPE, MODULE_CATCHE).then((modules) => {\n      console.log(\"sucess\", modules);\n      setStatus(modules);\n      setInitalised(true);\n      setManifest(\n        Object.keys(modules).reduce(\n          (prev, key) => ({\n            ...prev,\n            [key]: modules[key]?.module?.manifest || {},\n          }),\n          {}\n        )\n      );\n    });\n  }, [plugins]);\n\n  return {\n    initalised,\n    plugins,\n    pluginsById,\n    status,\n    manifest,\n    setPlugins,\n    addPlugin,\n    promptAddPlugin,\n    promptRemovePlugin,\n    getModule,\n    getModules,\n  };\n};\n","import { useState } from \"react\";\n\nexport type Config = Record<string | number | symbol, unknown>;\n\nexport type Key = {\n  plugin: string;\n  config: Config;\n  icon: string;\n  title: string;\n  loading: boolean;\n};\n\ntype Profiles = {\n  [key: string]: Profile;\n};\n\nexport type Profile = {\n  keys: {\n    [key: string]: Key;\n  };\n};\n\nconst STORAGE_KEY = \"profiles\";\n\nconst getProfiles = () => {\n  const plugins = localStorage.getItem(STORAGE_KEY);\n  if (plugins) {\n    return { ...JSON.parse(plugins) };\n  }\n  return { default: { keys: {} } };\n};\n\nconst storeProfiles = (profiles: Profiles) => {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(profiles));\n};\n\nconst getProfileName = () => {\n  return \"default\";\n};\n\nexport const useProfiles = () => {\n  const [profiles, setProfiles] = useState<Profiles>(getProfiles());\n  const [profileName, setProfileName] = useState<string>(getProfileName);\n  const profile = profiles[profileName];\n\n  const updateProfile = (obj: Profile) => {\n    setProfiles((old) => {\n      const nextProfiles = {\n        ...old,\n        [profileName]: {\n          ...old[profileName],\n          ...obj,\n        },\n      };\n      storeProfiles(nextProfiles);\n      return nextProfiles;\n    });\n  };\n\n  const setPlugin = (name: string, keyIndex: number) => {\n    updateProfile({\n      keys: {\n        ...profile.keys,\n        [keyIndex]: {\n          plugin: name,\n          config: {}, //reset config for next\n          icon: \"\",\n          title: \"\",\n          loading: false,\n        },\n      },\n    });\n  };\n\n  const removePlugin = (name: string) => {\n    updateProfile({\n      keys: {\n        ...Object.keys(profile.keys).reduce((prev, key) => {\n          const config = profile.keys[key];\n          const match = name === config.plugin;\n          return {\n            ...prev,\n            [key]: {\n              plugin: match ? \"\" : config.plugin,\n              config: match ? {} : config.config,\n              icon: match ? \"\" : config.icon,\n              title: match ? \"\" : config.title,\n              loading: match ? false : config.loading,\n            },\n          };\n        }, {}),\n      },\n    });\n  };\n\n  const addProfile = (name: string, obj: Profile = { keys: {} }) => {\n    setProfiles((old) => {\n      const nextProfiles = {\n        ...old,\n        [name]: obj,\n      };\n      storeProfiles(nextProfiles);\n      return nextProfiles;\n    });\n  };\n\n  const promptAddProfile = () => {\n    const _name = prompt(\n      \"What the name of the profile? Using names that already exists, will overwirte you old profile! You can use a pipe (`|`) after the name, to provide the config.\"\n    );\n    if (_name) {\n      const [name, config] = _name.split(\"|\");\n      let parseedConfig;\n      try {\n        const _p = JSON.parse(config);\n        if (_p) {\n          parseedConfig = _p;\n        }\n      } catch (e) {\n        console.log(\"invalid config provided\");\n      }\n      console.log({ name, config });\n      addProfile(name, parseedConfig);\n      setProfileName(name);\n    }\n  };\n\n  const promptRemoveProfile = () => {\n    const resp = confirm(\n      \"Are you sure you want to delete this profile? These changes are inreversable.\"\n    );\n    if (resp) {\n      setProfiles((old) => {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { [profileName]: _, ...rest } = old;\n        setProfileName(\"default\");\n        return { ...rest };\n      });\n    }\n  };\n\n  const promptExportProfile = () => {\n    prompt(\"Profile:\", `${profileName}|${JSON.stringify(profile)}`);\n  };\n\n  const setConfig = (key: number, config: Config) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          config,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  const setIcon = (key: number, icon: string) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          icon,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  const setTitle = (key: number, title: string) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          title,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  const setLoading = (key: number, loading: boolean) => {\n    const next = {\n      ...profile,\n      keys: {\n        ...profile.keys,\n        [key]: {\n          ...profile.keys[key],\n          loading,\n        },\n      },\n    };\n    updateProfile(next);\n  };\n\n  return {\n    profiles,\n    profile,\n    profileName,\n\n    setProfileName,\n    setPlugin,\n    removePlugin,\n    updateProfile,\n    addProfile,\n    promptAddProfile,\n    promptRemoveProfile,\n    promptExportProfile,\n    setConfig,\n    setIcon,\n    setTitle,\n    setLoading,\n  };\n};\n","import { useState } from \"react\";\n\nexport const useStorage = <T>(storageKey: string, initType = []) => {\n  const get = (): T => {\n    const items = localStorage.getItem(storageKey);\n    if (items) {\n      // array,\n      if (initType.length !== undefined) {\n        // @ts-expect-error dynamic-values\n        return [...JSON.parse(items)];\n      }\n      return { ...JSON.parse(items) };\n    }\n    // @ts-expect-error dynamic-values\n    return initType;\n  };\n\n  const set = (data: T) => {\n    setItems(data); // TODO: double check RLC on this.\n    localStorage.setItem(storageKey, JSON.stringify(data));\n    return data;\n  };\n\n  const [items, setItems] = useState<T>(get());\n  return [items, set] as const;\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { Buffer } from \"buffer\";\nimport { Key } from \"../hooks/useProfiles\";\nimport { StreamDeckWeb } from \"@elgato-stream-deck/webhid\";\n\nexport const drawKey = (\n  streamDeck: StreamDeckWeb,\n  key: string,\n  keyConf: Key,\n  status: Record<string, unknown>,\n  selectedKey?: number,\n  icon?: string\n) => {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = streamDeck?.ICON_SIZE || 0;\n  canvas.height = streamDeck?.ICON_SIZE || 0;\n  const ctx = canvas.getContext(\"2d\")!;\n  ctx.save();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  // print the text\n  ctx.textRendering = \"geometricPrecision\";\n  ctx.letterSpacing = \"1px\";\n  const fontSize = 10;\n  ctx.font = `${fontSize}px \"Arial\"`;\n  ctx.fillStyle = \"white\";\n  ctx.textAlign = \"center\";\n  const center = canvas.width / 2;\n  ctx.fillText(keyConf.title, center, canvas.height - 8, canvas.width);\n  ctx.save();\n  ctx.restore();\n\n  // print the icon if its there\n  if (icon) {\n    const heightOffset = keyConf.title ? 8 : 0;\n    const scale = keyConf.title ? 1.5 : 2;\n    const imageWidth = 24 * scale;\n    const imageHeight = 24 * scale;\n    ctx.strokeStyle = \"#FFF\";\n    // ctx.lineWidth = 1;\n    ctx.fillStyle = \"#FFF\";\n    const cw = center - imageWidth / 2;\n    const ch = center - imageHeight / 2 - heightOffset;\n    const p = new Path2D(icon);\n    ctx.translate(cw, ch);\n    ctx.scale(scale, scale);\n    ctx.stroke(p);\n    ctx.fill(p);\n    ctx.save();\n    ctx.restore();\n  } else {\n    // if no icon print name of plugin at least\n    ctx.textRendering = \"geometricPrecision\";\n    ctx.letterSpacing = \"1px\";\n    const fontSize = 14;\n    ctx.font = `${fontSize}px \"Arial\"`;\n    (ctx.fontKerning = \"none\"), (ctx.fillStyle = \"white\");\n    ctx.textAlign = \"center\";\n    const center = canvas.width / 2;\n    ctx.fillText(keyConf.plugin, center, canvas.height - 32, canvas.width);\n    ctx.save();\n    ctx.restore();\n  }\n\n  if (status?.loaded === false) {\n    console.log(\"not loaded\");\n  }\n\n  const id = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  streamDeck?.fillKeyBuffer(parseInt(key), Buffer.from(id.data), {\n    format: \"rgba\",\n  });\n\n  if (window.location.search.includes(\"debug\")) {\n    if (key == selectedKey?.toString()) {\n      const data = canvas.toDataURL();\n      document.getElementById(\"prev\")?.setAttribute(\"src\", data);\n    }\n  }\n\n  ctx.restore();\n};\n","import queryString from \"query-string\";\nimport { Plugin } from \"../types/Plugin\";\n\nexport const fetchPlugin = async (input: string): Promise<Plugin | null> => {\n  // eslint-disable-next-line no-async-promise-executor\n  return new Promise(async (resolve) => {\n    try {\n      if (input.includes(\"github.com\")) {\n        // the provided a github.com link\n        const url = input.replace(\n          \"https://github.com/\",\n          \"https://api.github.com/repos/\"\n        );\n        const resp = await fetch(url);\n        const data = await resp.json();\n        if (data && data.has_pages) {\n          const homepage = data.homepage;\n          const [creator, name] = data.full_name.split(\"/\");\n          resolve({ name, creator, versions: [\"1.0.0\"], url: homepage });\n        } else {\n          throw new Error(\"\");\n        }\n      } else if (input.includes(\"remoteEntry.js\")) {\n        const [_url, query] = input.split(\"?\");\n        const { name, creator, v } = queryString.parse(query);\n        if (name) {\n          resolve({\n            name: name as string,\n            creator: creator as string,\n            versions: [v as string],\n            url: _url.replace(\"remoteEntry.js\", \"\"),\n          });\n        } else throw new Error(\"\");\n      } else {\n        throw new Error(\"\");\n      }\n    } catch (e) {\n      alert(\"Cound not add plugin, invalid url or repo provided.\");\n      console.error(e);\n      resolve(null);\n    }\n  });\n};\n","import { init } from \"@module-federation/runtime/.\";\nimport { RemotePromise } from \"../types/RemotePromise\";\nimport { loadScript } from \"./loadScript\";\nimport { ModuleResolver, loadModule } from \"./loadModule\";\nimport { Module } from \"../types/Module\";\n\ntype Config = {\n  name: string;\n  remotes: {\n    name: string;\n    entry: string;\n  }[];\n};\n\nexport type ModulesResolution = {\n  [key: string]: {\n    name: string;\n    scope: string;\n    module?: Module;\n    loaded: boolean;\n  };\n};\n\nexport const initalise = async (\n  config: Config,\n  scope: string,\n  cache: Map<string, Module>\n) => {\n  return new Promise<ModulesResolution>((resolve) => {\n    init(config);\n\n    const scripts: Promise<RemotePromise>[] = [];\n    config.remotes.forEach((script) => {\n      scripts.push(loadScript(script.entry, script.name));\n    });\n\n    Promise.all(scripts).then((remotes) => {\n      const modules: Promise<ModuleResolver>[] = [];\n      remotes.forEach((remote) => {\n        if (!remote.loaded) {\n          console.error(\n            `Webdeck: Could not load script \"${remote.name}\" at ${remote.url}`,\n            remote.e\n          );\n          // returned a empty module as we could not resolve it.\n          modules.push(\n            Promise.resolve({ name: remote.name, scope, module: undefined })\n          );\n        } else {\n          modules.push(loadModule(remote.name, scope, cache));\n        }\n      });\n\n      Promise.all(modules).then((elements) => {\n        resolve(\n          elements.reduce(\n            (p, e) => ({\n              ...p,\n              [e.name]: { ...e, loaded: !!e.module },\n            }),\n            {} as ModulesResolution\n          )\n        );\n      });\n    });\n  });\n};\n","import { loadRemote } from \"@module-federation/runtime/.\";\nimport { Module } from \"../types/Module\";\n\nexport type ModuleResolver = {\n  name: string;\n  scope: string;\n  module: Module | undefined;\n};\n\nexport const loadModule = async (\n  name: string,\n  scope: string,\n  cache: Map<string, Module>\n) => {\n  return new Promise<ModuleResolver>((resolve) => {\n    const moduleKey = `${scope}-${name}`;\n    if (cache.has(moduleKey)) {\n      const module = cache.get(moduleKey);\n      resolve({ name, scope, module });\n    } else {\n      loadRemote(`${name.replaceAll(\"-\", \"_\")}/${scope.slice(2)}`)\n        .then((module) => {\n          cache.set(moduleKey, module as Module);\n          resolve({ name, scope, module: module as Module });\n        })\n        .catch(() => {\n          resolve({ name, scope, module: undefined });\n        });\n    }\n  });\n};\n","import { RemotePromise } from \"../types/RemotePromise\";\n\nconst URL_CATCHE = new Set<string>();\n\nexport const loadScript = async (url: string, name: string) => {\n  return new Promise<RemotePromise>((resolve) => {\n    if (!url) resolve({ loaded: false, url, name });\n    if (URL_CATCHE.has(url)) {\n      resolve({ loaded: true, url, name });\n      return;\n    }\n    const element = document.createElement(\"script\");\n    element.src = url;\n    element.type = \"text/javascript\";\n    element.async = true;\n    element.defer = true;\n    element.onload = () => {\n      URL_CATCHE.add(url);\n      resolve({ loaded: true, url, name });\n    };\n    element.onerror = (e) => resolve({ loaded: false, url, name, e });\n\n    document.head.appendChild(element);\n  });\n};\n","export type VirtualDeck = {\n  PRODUCT_NAME: string;\n  NUM_KEYS: number;\n  KEY_COLUMNS: number;\n  KEY_ROWS: number;\n  close(): void;\n};\n\nconst STORAGE_KEY = \"virtualdeck\";\n\nconst close = () => {\n  localStorage.removeItem(STORAGE_KEY);\n};\n\nconst config: Record<string, VirtualDeck> = {\n  default: {\n    PRODUCT_NAME: \"VirtualDeck 2x3\",\n    NUM_KEYS: 6,\n    KEY_COLUMNS: 3,\n    KEY_ROWS: 2,\n    close,\n  },\n};\n\nexport const getVirtualDeck = (): VirtualDeck[] => {\n  const virtualdeck = localStorage.getItem(STORAGE_KEY);\n  if (virtualdeck) {\n    return [{ ...JSON.parse(virtualdeck), close }];\n  }\n  return [];\n};\n\nexport const requestVirtualDecks = (\n  key: keyof typeof config = \"default\"\n): VirtualDeck[] => {\n  const virtualdeck = config[key];\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(virtualdeck));\n  return [config[key]];\n};\n"],"names":["_path","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","props","xmlns","className","viewBox","d","Wrapper","textAlign","display","alignItems","justifyContent","height","width","Controller","$isOpen","marginLeft","padding","paddingTop","border","background","borderRadius","color","maxHeight","overflow","maxWidth","boxShadow","Settings","window","Buffer","useAppContext","deck","profiles","wrapper","hasDeck","current","style","position","top","left","right","bottom","Deck","undefined","selectedKey","editMode","Header","Profiles","SubSubTitle","disabled","value","profile","keys","title","onChange","e","setTitle","placeholder","Plugins","Plugin","opacity","location","search","includes","Debugger","onClick","tryGetStreamDeck","tryCreateVirtualDeck","Container","useProfiles","plugins","usePlugins","useDeck","AppContext","initalised","id","src","margin","root","document","getElementById","render","useState","open","setIsOpen","JSON","stringify","manifest","HeaderWrapper","styled","minWidth","paddingBottom","marginBottom","borderBottom","SubTitle","setSelectedKey","setPlugin","keyConfig","module","getModule","plugin","status","useEffect","lazy","Promise","resolve","minHeight","outline","Suspense","fallback","config","setConfig","loaded","selectedPlugin","name","map","creator","promptRemovePlugin","removePlugin","promptAddPlugin","ProfilesWrapper","profileName","setProfileName","profileKey","promptRemoveProfile","promptAddProfile","promptExportProfile","DeckWrapper","DeckTitle","fontSize","textTransform","DeckLayout","$columns","gap","gridTemplateColumns","DeckButton","backgroundColor","transition","cursor","transform","outlineOffset","DisconnectButton","marginTop","fill","DeckButtonContent","zIndex","flexDirection","PRODUCT_NAME","disconect","KEY_COLUMNS","Array","from","NUM_KEYS","_","keyIndex","onMouseDown","onMouseUp","active","pressedMap","selected","DeckButtonView","DeckFooterText","ref","useRef","icon","icons","loading","getAttribute","bb","querySelector","getBoundingClientRect","setAttribute","stroke","strokeWidth","r","cx","cy","attributeName","calcMode","dur","values","keySplines","repeatCount","begin","preserveAspectRatio","isVirtual","href","preventDefault","setEditMode","createContext","useContext","virtualDeck","setVirtualDeck","streamDeck","setStreamDeck","setPressedMap","execute","_streamDeck","_virtualdeck","getStreamDecks","getVirtualDeck","useCallback","requestStreamDecks","clearPanel","console","error","requestVirtualDecks","log","navigator","hid","getDevices","forget","close","_onPressDown","old","_onPressUp","onPress","setIcon","warn","forEach","drawKey","on","off","PLUGIN_SCOPE","MODULE_CATCHE","Map","useStorage","setPlugins","setManifest","setInitalised","setStatus","pluginsById","reduce","prev","addPlugin","input","prompt","fetchPlugin","remotes","replaceAll","entry","url","initalise","then","modules","callback","confirm","filter","moduleKey","get","getModules","STORAGE_KEY","getProfiles","localStorage","getItem","parse","default","storeProfiles","setItem","getProfileName","setProfiles","updateProfile","obj","nextProfiles","addProfile","match","_name","parseedConfig","split","_p","rest","setLoading","storageKey","initType","items","setItems","data","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","keyConf","canvas","createElement","ICON_SIZE","ctx","getContext","save","clearRect","textRendering","letterSpacing","font","fillStyle","center","fillText","restore","heightOffset","scale","imageWidth","imageHeight","strokeStyle","p","Path2D","translate","fontKerning","getImageData","fillKeyBuffer","parseInt","format","toString","toDataURL","homepage","_url","query","v","replace","fetch","resp","json","has_pages","full_name","versions","Error","alert","scope","cache","init","scripts","script","push","loadScript","all","remote","loadModule","elements","has","loadRemote","slice","set","catch","URL_CATCHE","Set","element","type","async","defer","onload","add","onerror","head","appendChild","removeItem","KEY_ROWS","virtualdeck"],"mappings":"wJAAIA,E,YACJ,SAASC,IAAiS,MAAOA,AAA3RA,CAAAA,EAAWC,OAAOC,MAAM,CAAGD,OAAOC,MAAM,CAACC,IAAI,GAAK,SAAUC,CAAM,EAAI,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,MAAM,CAAEF,IAAK,CAAE,IAAIG,EAASF,SAAS,CAACD,EAAE,CAAE,IAAK,IAAII,KAAOD,EAAcP,OAAOS,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,EAAQC,IAAQL,CAAAA,CAAM,CAACK,EAAI,CAAGD,CAAM,CAACC,EAAI,AAAD,CAAO,CAAE,OAAOL,CAAQ,GAAmBS,KAAK,CAAC,IAAI,CAAEP,UAAY,CASlV,MAPsB,AAAAQ,GAAsB,eAAmB,CAAC,MAAOd,EAAS,CAC9Ee,MAAO,6BACPC,UAAW,uBACXC,QAAS,eACX,EAAGH,GAAQf,GAAUA,CAAAA,EAAqB,eAAmB,CAAC,OAAQ,CACpEmB,EAAG,geACL,EAAC,E,+JCPYC,EAAU,cAAO,OAAO,W,MAAO,CAC1CC,UAAW,SACXC,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBC,OAAQ,QACRC,MAAO,OACT,C,GAGaC,EAAa,cAAO,OAA6B,CAC5DL,QAAS,Y,OAAwCM,AAArC,EAAAA,OAAA,CAA+C,QAAU,M,EACrEC,WAAY,GACZC,QAAS,OACTC,WAAY,OACZC,OAAQ,kBACRC,WAAY,gBACZC,aAAc,OACdC,MAAO,QACPC,UAAW,OACXC,SAAU,OACVC,SAAU,IACVC,UACE,iIACJ,GAEaC,EAAW,cAAO,OAAO,CACpCL,MAAO,QACPb,QAAS,OACTE,eAAgB,gBAChBD,WAAY,SACZO,QAAS,SACX,E,6OCpBAW,CAAAA,OAAOC,MAAM,CAAG,EAAAA,MAAM,CA6FtB,MA3FY,WACV,IAgDsB,EAhDK,OAAAC,aAAA,IAAnBC,EAAmB,EAAnBA,IAAI,CAAEC,EAAa,EAAbA,QAAQ,CAEtB,MACE,UAAC,OACC5B,UAAW,IAAW,CACpB6B,QAAS,GACTC,QAAS,CAAC,CAACH,EAAKI,OAAO,AACzB,GACAC,MAAO,CACLC,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,CACV,E,SAEA,UAAC,EAAAlC,OAAO,E,SACLwB,EAAKI,OAAO,CACX,uB,UACE,UAAC,EAAAO,IAAI,KACL,WAAC,EAAA5B,UAAU,EACTC,QAASgB,AAAqBY,KAAAA,IAArBZ,EAAKa,WAAW,EAAkBb,EAAKc,QAAQ,C,UAExD,UAAC,EAAAC,MAAM,KACP,UAAC,EAAAC,QAAQ,KACRhB,AAAqBY,KAAAA,IAArBZ,EAAKa,WAAW,EACf,uB,UACE,WAAC,EAAAjB,QAAQ,E,UACP,UAAC,EAAAqB,WAAW,E,SAAC,wB,GACb,UAAC,UAAO5C,UAAU,IAAI6C,SAAQ,G,SAC3BlB,EAAKa,WAAW,A,MAcrB,WAAC,EAAAjB,QAAQ,E,UACP,UAAC,EAAAqB,WAAW,E,SAAC,U,GACb,UAAC,SACCE,MACE,CAAuC,OAAvC,GAAAlB,EAASmB,OAAO,CAACC,IAAI,CAACrB,EAAKa,WAAW,CAAC,AAAD,GAAtC,oBAAyCS,KAAK,AAAD,GAAK,GAEpDC,SAAU,SAACC,CAAC,E,OACVvB,EAASwB,QAAQ,CAACzB,EAAKa,WAAW,CAAGW,EAAE/D,MAAM,CAAC0D,KAAK,C,EAErDO,YAAY,c,MAGhB,WAAC,EAAA9B,QAAQ,E,UACP,UAAC,EAAAqB,WAAW,E,SAAC,Q,GACb,UAAC,EAAAU,OAAO,K,GAEV,UAAC,EAAA/B,QAAQ,E,SACP,UAAC,EAAAgC,MAAM,I,MAIb,UAAC,SAAMvB,MAAO,CAAEwB,QAAS,EAAI,E,SAAG,oC,GAG/BhC,OAAOiC,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC,UAAY,UAAC,EAAAC,QAAQ,K,MAI1D,WAAC,OAAI5B,MAAO,CAAEd,MAAO,OAAQ,E,UAC3B,WAAC,O,UACC,UAAC,M,SAAG,U,GACJ,UAAC,K,SAAE,oD,GACH,UAAC,S,GAEH,UAAC,UAAO2C,QAASlC,EAAKmC,gBAAgB,C,SAAE,S,GACxC,UAAC,S,SAAM,Q,GACP,UAAC,UAAOD,QAASlC,EAAKoC,oBAAoB,C,SAAE,uB,SAQxD,C,mMCzFaC,EAAY,WACvB,IAAMpC,EAAW,KAAAqC,WAAA,IACXC,EAAU,KAAAC,UAAA,IACVxC,EAAO,KAAAyC,OAAA,EAAQxC,EAAUsC,GAE/B,MACE,WAAC,EAAAG,UAAA,SAAmB,EAACvB,MAAO,CAAEnB,KAAAA,EAAMC,SAAAA,EAAUsC,QAAAA,CAAQ,E,UACnD1C,OAAOiC,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC,UAC/B,uB,UACE,UAAC,O,SAAK,CAACO,EAAQI,UAAU,EAAI,sB,SAAE,yB,KAC/B,UAAC,OACCC,GAAG,OACHC,IAAI,GACJxC,MAAO,CAAEyC,OAAQ,GAAI1D,OAAQ,eAAgB,C,MAKnD,UAAC,SAAG,K,EAGV,EAMA2D,AAJa,YAAmB,CAC9BC,SAASC,cAAc,CAAC,SAGrBC,MAAM,CAAC,UAACb,EAAA,KAKb,e,4OC3CO,IAAMJ,EAAe,WAC1B,I,IAA8B,OAAAlC,aAAA,IAAtBE,EAAsB,EAAtBA,QAAQ,CAAEsC,EAAY,EAAZA,OAAO,CACzB,IAA0B,G,EAAA,KAAAY,QAAA,EAAS,I,EAAA,E,m0BAA5BC,EAAmB,KAAbC,EAAa,KAC1B,MACE,WAAC,O,UACC,WAAC,OACChD,MAAO,CACLzB,eAAgB,gBAChBF,QAAS,OACTC,WAAY,SACZO,QAAS,WACX,E,UAEA,UAAC,EAAA+B,WAAW,E,SAAC,W,GACb,UAAC,UAAO5C,UAAU,IAAI6D,QAAS,W,OAAMmB,EAAU,CAACD,E,WAC7CA,EAAO,SAAW,M,MAGvB,WAAC,OAAI/C,MAAO,CAAE3B,QAAS0E,EAAO,QAAU,OAAQ3E,UAAW,MAAO,E,UAChE,UAAC,Q,SAAK,W,GACN,UAAC,OAAI4B,MAAO,CAAEvB,MAAO,IAAKL,UAAW,OAAQY,WAAY,OAAQ,E,SAC9DiE,KAAKC,SAAS,CAACtD,EAASA,QAAQ,CAAE,KAAM,E,GAE3C,UAAC,Q,SAAK,U,GACN,UAAC,OAAII,MAAO,CAAEvB,MAAO,IAAKL,UAAW,OAAQY,WAAY,OAAQ,E,SAC9DiE,KAAKC,SAAS,CAAChB,EAAQA,OAAO,CAAE,KAAM,E,GAEzC,UAAC,Q,SAAK,W,GACN,UAAC,OAAIlC,MAAO,CAAEvB,MAAO,IAAKL,UAAW,OAAQY,WAAY,OAAQ,E,SAC9DiE,KAAKC,SAAS,CAAChB,EAAQiB,QAAQ,CAAE,KAAM,E,QAKlD,C,uFCrCO,IAAMC,EAAgB,G,UAAAC,MAAA,EAAO,OAAO,CACzChF,QAAS,OACTE,eAAgB,gBAChBD,WAAY,SACZgF,SAAU,IACVC,cAAe,MACfC,aAAc,OACdC,aAAc,mBAChB,E,mICLa/C,EAAa,WACxB,IAAQf,EAAS,KAAAD,aAAA,IAATC,IAAI,CACZ,MACE,WAAC,EAAAyD,aAAa,E,UACZ,UAAC,EAAAM,QAAQ,E,SAAC,U,GACV,UAAC,UACCzC,MAAM,QACNjD,UAAU,IACV6D,QAAS,W,OAAMlC,EAAKgE,cAAc,CAACpD,KAAAA,E,WACpC,M,KAKP,C,8NCRO,IAAMgB,EAAa,WACxB,I,IAAoC,OAAA7B,aAAA,IAA5BwC,EAA4B,EAA5BA,OAAO,CAAEtC,EAAmB,EAAnBA,QAAQ,CAAED,EAAS,EAATA,IAAI,CAC/B,IAA4B,G,EAAA,KAAAmD,QAAA,EAAoC,M,EAAA,E,m0BAAzDvB,EAAqB,KAAbqC,EAAa,KAEtBnG,EAAMkC,EAAKa,WAAW,CACtBqD,EAAYjE,EAASmB,OAAO,CAACC,IAAI,CAACvD,EAAI,CACtCqG,EAAS5B,EAAQ6B,SAAS,CAACF,MAAAA,EAAA,OAAAA,EAAWG,MAAM,EAC5CC,EAAS/B,EAAQ+B,MAAM,CAACJ,MAAAA,EAAA,OAAAA,EAAWG,MAAM,CAAC,CAahD,MAXA,KAAAE,SAAA,EAAU,WACJJ,EAIFF,EAHkB,KAAAO,IAAA,EAAK,WACrB,OAAOC,QAAQC,OAAO,CAACP,EACzB,IAGAF,EAAU,KAEd,EAAG,CAACE,EAAO,EAGT,UAAC,OACC9D,MAAO,CACLvB,MAAO,OACPU,UAAW,QACXmF,UAAW,QACXC,QAAS,OACT9B,OAAQ,QACR1D,OAAQ,kBACRkB,SAAU,WACV7B,UAAW,OACXa,aAAc,GACdG,SAAU,QACZ,E,SAEA,UAAC,EAAAoF,QAAQ,EAACC,SAAS,iB,SAChBlD,GAAUsC,CAAAA,MAAAA,EAAA,OAAAA,EAAWa,MAAM,AAAD,GAAKZ,EAC9B,UAACvC,EAAA,CAECmD,OAAQb,EAAUa,MAAM,CACxBC,UAAW,SAACD,CAAM,EAChB9E,EAAS+E,SAAS,CAAClH,EAAKiH,EAC1B,C,EAJKb,EAAUG,MAAM,CAAGvG,GAMxB,AAAAwG,CAAAA,MAAAA,EAAA,OAAAA,EAAQW,MAAM,AAAD,IAAM,GACrB,WAAC,OACC5E,MAAO,CACL3B,QAAS,OACTD,UAAW,SACXK,MAAO,OACPF,eAAgB,SAChBD,WAAY,SACZE,OAAQ,QACRU,MAAO,UACPF,WAAY,SACd,E,UACD,kBACiB6E,EAAUG,MAAM,CAAC,W,GAGnC,UAAC,S,IAKX,C,6GCzEa1C,EAAc,WACzB,IACuB,EADa,OAAA5B,aAAA,IAA5BE,EAA4B,EAA5BA,QAAQ,CAAED,EAAkB,EAAlBA,IAAI,CAAEuC,EAAY,EAAZA,OAAO,CACzB2C,EAAiB,AAAwC,OAAxC,GAAAjF,EAASmB,OAAO,CAACC,IAAI,CAACrB,EAAKa,WAAW,CAAE,AAAF,GAAtC,oBAA0CwD,MAAM,CACvE,MACE,WAAC,O,UACC,WAAC,UACCc,KAAK,UACLvC,GAAG,UACHtB,MAAM,gBACNH,MAAO+D,GAAkB,GACzB3D,SAAU,SAACC,CAAC,E,OAAKvB,EAASgE,SAAS,CAACzC,EAAE/D,MAAM,CAAC0D,KAAK,CAAEnB,EAAKa,WAAW,C,YAEpE,UAAC,UAAOM,MAAM,G,SAAG,W,GAChBoB,EAAQA,OAAO,CAAC6C,GAAG,CAAC,SAACf,CAAM,EAC1B,MACE,WAAC,UAAyBlD,MAAOkD,EAAOc,IAAI,C,UACzCd,EAAOc,IAAI,CAAC,IAAEd,EAAOgB,OAAO,EAAK,IAAkB,OAAfhB,EAAOgB,OAAO,E,EADxChB,EAAOc,IAAI,CAI5B,G,GAEF,UAAC,UACC7D,MAAM,gBACNjD,UAAU,IACV6D,QAAS,W,OACPK,EAAQ+C,kBAAkB,CAACJ,EAAgB,WAEzCjF,EAASsF,YAAY,CAACL,EACxB,E,EAEFhE,SAAU,CAACgE,E,SACZ,G,GAGD,UAAC,UACC5D,MAAM,aACNjD,UAAU,IACV6D,QAASK,EAAQiD,eAAe,C,SACjC,G,KAKP,C,yFC5CO,IAAMC,EAAkB,G,UAAA,SAAO,OAAO,CAC3ClG,MAAO,QACPb,QAAS,OACTE,eAAgB,gBAChBD,WAAY,SACZiF,cAAe,MACfC,aAAc,MACdC,aAAc,mBAChB,E,qICLa9C,EAAe,WAC1B,IAAQf,EAAa,KAAAF,aAAA,IAAbE,QAAQ,CAChB,MACE,WAAC,EAAAwF,eAAe,E,UACd,UAAC,EAAA1B,QAAQ,E,SAAC,U,GACV,WAAC,O,UACC,UAAC,UACCoB,KAAK,UACLvC,GAAG,UACHtB,MAAM,iBACNH,MAAOlB,EAASyF,WAAW,CAC3BnE,SAAU,SAACC,CAAC,E,OAAKvB,EAAS0F,cAAc,CAACnE,EAAE/D,MAAM,CAAC0D,KAAK,C,WAEtD7D,OAAO+D,IAAI,CAACpB,EAASA,QAAQ,EAAEmF,GAAG,CAAC,SAACQ,CAAU,EAC7C,MACE,UAAC,UAAwBzE,MAAOyE,E,SAC7BA,C,EADUA,EAIjB,E,GAEF,UAAC,UACC1E,SAAUjB,AAAyB,YAAzBA,EAASyF,WAAW,CAC9BpE,MAAM,iBACNjD,UAAU,IACV6D,QAASjC,EAAS4F,mBAAmB,C,SACtC,G,GAGD,UAAC,UACCvE,MAAM,cACNjD,UAAU,IACV6D,QAASjC,EAAS6F,gBAAgB,C,SACnC,G,GAGD,UAAC,UACCxE,MAAM,iBACNjD,UAAU,IACV6D,QAASjC,EAAS8F,mBAAmB,C,SACtC,G,QAMT,C,0RChDaC,EAAc,cAAO,OAAO,CACvC9G,QAAS,OACTC,WAAY,OACZC,OAAQ,kBACRC,WAAY,gBACZC,aAAc,OACdK,UACE,kIACFW,SAAU,UACZ,GAEa2F,EAAY,cAAO,MAAM,CACpCvH,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBsH,SAAU,GACVtC,cAAe,GACfzE,WAAY,EACZ2D,OAAQ,EACRvD,MAAO,QACP4G,cAAe,WACjB,GAEaC,EAAa,cAAO,OAC/B,Y,IAAGC,EAAA,EAAAA,QAAA,C,MAAgB,CACjB3H,QAAS,OACT4H,IAAK,OACLC,oBAAsB,UAAkB,OAATF,EAAS,iBAC1C,C,GAGWG,EAAa,cAAO,UAAU,CACzC9H,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBQ,OAAQ,oBACRN,MAAO,OACPD,OAAQ,OACRS,aAAc,GAEdD,WAAY,MACZiB,SAAU,WACVpB,QAAS,IACTuH,gBAAiB,gBACjB7B,QAAS,kBACTjF,UACE,kIACF+G,WAAY,mBACZC,OAAQ,UAER,oCAAqC,CACnChH,UAAW,OACXP,OAAQ,YACRqH,gBAAiB,gBACjB,UAAW,CACT9G,UAAW,OACXP,OAAQ,YACR,QAAS,CACPsH,WAAY,mBACZE,UAAW,YACb,CACF,CACF,EACA,WAAY,CAEZ,EACA,aAAc,CACZhC,QAAS,qBACTiC,cAAe,KACjB,EACAtH,MAAO,OACT,GAEauH,EAAmB,cAAO,SAAU,EAAE,CACjD7H,WAAY,GACZ8H,UAAW,EACXlI,OAAQ,GACRC,MAAO,GACPkI,KAAM,QACNnF,QAAS,GACT8E,OAAQ,UACRD,WAAY,YACZ,UAAW,CACT7E,QAAS,EACTmF,KAAM,KACR,CACF,GAEaC,EAAoB,cAAO,OAAO,CAC7C3G,SAAU,WACVxB,MAAO,OACPD,OAAQ,OACRc,UACE,oEACFL,aAAc,GACdoH,WAAY,mBACZQ,OAAQ,EACRzH,SAAU,SACV,QAAS,CACPiH,WAAY,mBACZE,UAAW,UACb,CACF,E,iKC3FajG,EAAW,WACtB,IAMS,EAKmB,EACE,EAZtBX,EAAS,KAAAD,aAAA,IAATC,IAAI,CAEZ,MACE,WAAC,OAAIK,MAAO,CAAE3B,QAAS,OAAQyI,cAAe,QAAS,E,UACrD,WAAC,EAAAnB,WAAW,E,UACV,WAAC,EAAAC,SAAS,E,UACK,OAAZ,GAAAjG,EAAKI,OAAO,AAAD,GAAX,oBAAcgH,YAAY,CAAE,IAC7B,UAAC,QAAK9F,MAAM,mB,SACV,UAAC,EAAAwF,gBAAgB,EAAC5E,QAAS,W,OAAMlC,EAAKqH,SAAS,E,SAGnD,UAAC,EAAAjB,UAAU,EAACC,SAAU,CAAY,OAAZ,GAAArG,EAAKI,OAAO,AAAD,GAAX,oBAAckH,WAAW,AAAD,GAAK,E,SAChDC,MAAMC,IAAI,CAAC,CAAE5J,OAAQ,CAAY,OAAZ,GAAAoC,EAAKI,OAAO,AAAD,GAAX,oBAAcqH,QAAQ,AAAD,GAAK,CAAE,GAAGrC,GAAG,CACtD,SAACsC,CAAC,CAAEC,CAAQ,E,MACV,UAAC,EAAAnB,UAAU,EAEToB,YAAa,W,OAAM5H,EAAK4H,WAAW,CAACD,E,EACpCE,UAAW,W,OAAM7H,EAAK6H,SAAS,CAACF,E,EAChCzF,QAAS,WACHlC,EAAKc,QAAQ,EACfd,EAAKgE,cAAc,CAAC2D,EAExB,EACAtJ,UAAW,IAAW,CACpByJ,OAAQ9H,EAAK+H,UAAU,CAACJ,EAAS,CACjCK,SAAUhI,EAAKc,QAAQ,EAAId,EAAKa,WAAW,GAAK8G,EAChD7G,SAAUd,EAAKc,QAAQ,AACzB,G,SAEA,UAAC,EAAAmG,iBAAiB,E,SAChB,UAAC,EAAAgB,cAAc,EAACN,SAAUA,C,MAfvBA,E,QAsBf,UAAC,EAAAO,cAAc,K,EAGrB,C,gICpDaD,EAAiB,Y,IAOb,EAEqB,EAAlC,IACY,EACE,EAXeN,EAAA,EAAAA,QAAA,CAI3B,OAAA5H,aAAA,IAFUqB,EAEV,EAFFnB,QAAQ,CAAImB,OAAO,CACnBmB,EACE,EADFA,OAAO,CAGH4F,EAAM,KAAAC,MAAA,EAAsB,MAC5B/D,EAAS,AAAsB,OAAtB,GAAAjD,EAAQC,IAAI,CAACsG,EAAS,AAAD,GAArB,oBAAwBtD,MAAM,CACvCgE,EAAA,AACoB,OAAxB,GAAA9F,EAAQiB,QAAQ,CAACa,EAAO,AAAD,GAAvB,kBAA+B,OAA/B,KAA0BiE,KAAK,AAAD,GAA9B,mBAAiC,CAAC,AAAsB,OAAtB,GAAAlH,EAAQC,IAAI,CAACsG,EAAS,AAAD,GAArB,oBAAwBU,IAAI,CAAC,CAACA,IAAI,CAChE/G,EAAQ,AAAsB,OAAtB,GAAAF,EAAQC,IAAI,CAACsG,EAAS,AAAD,GAArB,oBAAwBrG,KAAK,CACrCiH,EAAU,AAAsB,OAAtB,GAAAnH,EAAQC,IAAI,CAACsG,EAAS,AAAD,GAArB,oBAAwBY,OAAO,CACzCjE,EAAS/B,EAAQ+B,MAAM,CAACD,EAAO,CAUrC,MAPA,KAAAE,SAAA,EAAU,WACR,GAAI4D,EAAI/H,OAAO,EAAI,CAAC+H,EAAI/H,OAAO,CAACoI,YAAY,CAAC,WAAY,CACvD,IAAW,IAALC,EAAK,AAAW,OAAX,GAAAN,EAAI/H,OAAO,AAAD,GAAV,kBAA2B,OAA3B,KAAasI,aAAa,CAAC,OAAM,GAAjC,oBAAoCC,qBAAqB,GACpER,EAAI/H,OAAO,CAACwI,YAAY,CAAC,UAAY,cAAMH,MAAAA,EAAA,OAAAA,EAAI3J,KAAK,CAAC,KAAc,OAAX2J,MAAAA,EAAA,OAAAA,EAAI5J,MAAM,EACpE,CACF,EAAG,CAACsJ,EAAKE,EAAK,EAGZ,WAAC,OAEChI,MAAO,CACL3B,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBuI,cAAe,SACfrI,MAAO,OACPD,OAAQ,MACV,E,UAEA,UAAC,OACCwB,MAAO,CACLC,SAAU,WACVC,IAAK,EACLC,KAAM,EACN9B,QAAS,OACTI,MAAO,mBACPF,eAAgB,gBAChBW,MAAO,MACT,E,SAEC8E,GACC,UAAC,OAAIhE,MAAO,CAAEvB,MAAO,MAAO,E,SACzByJ,EACC,WAAC,OACCnK,MAAM,6BACNS,OAAQ,GACRP,QAAQ,c,UAER,UAAC,UACC0I,KAAK,OACL6B,OAAO,OACPC,YAAY,IACZC,EAAE,KACFC,GAAG,KACHC,GAAG,M,SAEH,UAAC,WACCC,cAAc,KACdC,SAAS,SACTC,IAAI,MACJC,OAAO,mBACPC,WAAW,0CACXC,YAAY,aACZC,MAAM,G,KAGV,UAAC,UACCxC,KAAK,OACL6B,OAAO,OACPC,YAAY,IACZjH,QAAQ,KACRkH,EAAE,KACFC,GAAG,KACHC,GAAG,M,SAEH,UAAC,WACCC,cAAc,KACdC,SAAS,SACTC,IAAI,MACJC,OAAO,mBACPC,WAAW,0CACXC,YAAY,aACZC,MAAM,M,KAGV,UAAC,UACCxC,KAAK,OACL6B,OAAO,OACPC,YAAY,IACZjH,QAAQ,KACRkH,EAAE,KACFC,GAAG,KACHC,GAAG,M,SAEH,UAAC,WACCC,cAAc,KACdC,SAAS,SACTC,IAAI,MACJC,OAAO,mBACPC,WAAW,0CACXC,YAAY,aACZC,MAAM,I,KAGV,UAAC,UACCxC,KAAK,OACL6B,OAAO,OACPC,YAAY,IACZjH,QAAQ,KACRkH,EAAE,KACFC,GAAG,KACHC,GAAG,M,SAEH,UAAC,WACCC,cAAc,KACdC,SAAS,SACTC,IAAI,MACJC,OAAO,mBACPC,WAAW,0CACXC,YAAY,aACZC,MAAM,K,KAGV,UAAC,UACCxC,KAAK,OACL6B,OAAO,OACPC,YAAY,IACZjH,QAAQ,KACRkH,EAAE,KACFC,GAAG,KACHC,GAAG,M,SAEH,UAAC,WACCC,cAAc,KACdC,SAAS,SACTC,IAAI,MACJC,OAAO,mBACPC,WAAW,0CACXC,YAAY,aACZC,MAAM,I,QAKZ,UAAC,QACCnJ,MAAO,CACLd,MAAO,AAAA+E,CAAAA,MAAAA,EAAA,OAAAA,EAAQW,MAAM,AAAD,EAAI,UAAY,AAACX,EAAkB,MAAT,MAChD,EACAhD,MAAQ,GAAe,OAAbqG,EAAW,G,SACtB,G,OAOT,UAAC,OACCtH,MAAO,CACL3B,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChB0B,SAAU,WACVzB,OAAQyC,EAAQ,GAAK,GACrBxC,MAAOwC,EAAQ,GAAK,GACpBuC,aAAcwE,EAAO,EAAI,CAC3B,E,SAECA,EACC,UAAC,OACCjK,MAAM,6BACN4I,KAAK,eACLlI,MAAM,OACND,OAAO,OACP4K,oBAAoB,gBACpBtB,IAAKA,E,SAGL,UAAC,QAAK5J,EAAG8J,C,IAFJA,GAILhE,GAGFsD,EAAW,C,GAGf,UAAC,OACCtH,MAAO,CACLC,SAAU,WACVI,OAAQ,EACRF,KAAM,EACN1B,MAAO,mBACPoH,SAAU,EACZ,E,SAEC5E,EAAQ,UAAC,S,SAAOA,C,GAAiB,I,KA/K/B+G,EAmLX,C,oHC5MaH,EAAiB,WAC5B,IAAQlI,EAAS,KAAAD,aAAA,IAATC,IAAI,QACZ,AAAKA,EAAK0J,SAAS,CAGjB,WAAC,SACCrJ,MAAO,CACLd,MAAO,QACPJ,WAAY,GACZ0C,QAAS,GACTqE,SAAU,EACZ,E,UACD,wBACuBlG,EAAKc,QAAQ,CAAG,YAAc,eAAe,cACzD,IACV,UAAC,KACCzC,UAAU,IACVsL,KAAK,IACLzH,QAAS,SAACV,CAAC,EACTA,EAAEoI,cAAc,GAChB5J,EAAK6J,WAAW,CAAC,CAAC7J,EAAKc,QAAQ,CACjC,E,SAECd,EAAKc,QAAQ,CAAG,eAAiB,W,GAC/B,IAAI,MACLd,EAAKc,QAAQ,CAAG,OAAS,OAAO,O,GAvBZ,IA0B9B,C,qFC5BO,IAAMG,EAAc,G,UAAA,SAAO,MAAM,CACtCvC,QAAS,eACTC,WAAY,SACZC,eAAgB,SAChBsH,SAAU,GACVhH,QAAS,EACT4D,OAAQ,EACRvD,MAAO,OACT,E,iFCRO,IAAMwE,EAAW,G,UAAA,SAAO,MAAM,CACnCrF,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBsH,SAAU,GACVhH,QAAS,EACT4D,OAAQ,EACRvD,MAAO,QACP4G,cAAe,WACjB,E,uICRazD,EAAa,KAAAoH,aAAA,EAAc,CAAC,GAE5B/J,EAAgB,WAC3B,MAAO,KAAAgK,UAAA,EAAWrH,EACpB,C,wsGCQO,IAAMD,EAAU,SACrBxC,CAAQ,CACRsC,CAAO,EAEP,IAAgC,SAAAY,QAAA,EAAS,OAAlCrC,EAAyB,KAAf+I,EAAe,KACM,SAAA1G,QAAA,EAA6B,MAA5DtC,EAA+B,KAAlBmD,EAAkB,KACA,SAAAb,QAAA,IAAQ,GAAvC6G,EAA+B,KAAlBC,EAAkB,KACF,SAAA9G,QAAA,IAAQ,GAArC+G,EAA6B,KAAjBC,EAAiB,KACA,SAAAhH,QAAA,EAAqC,CAAC,MAAnE4E,EAA6B,KAAjBqC,EAAiB,KAiCpC,KAAA7F,SAAA,EAAU,W,MAaR8F,C,EAZgB,a,IACPC,EAKEC,E,iDALa,O,EAAM,KAAAC,cAAA,I,cAArBF,CAAAA,EAAe,yB,GAAA,KAEpBH,EAAcG,GAGPC,CAAAA,EAAgB,OAAAE,cAAA,IAAc,EAAd,MAErBR,EAAeM,G,MAGrB,G,6CAEF,EAAG,EAAE,EAEL,IAAMpI,EAAmB,KAAAuI,WAAA,EAAY,a,IAC5BJ,E,iDAAe,O,EAAM,KAAAK,kBAAA,I,cAArBL,CAAAA,EAAe,yB,GAAA,MAIpBH,EAAcG,GACdA,EAAYM,UAAU,IAHtBC,QAAQC,KAAK,CAAC,8B,MAKlB,GAAG,EAAE,EAEC1I,EAAuB,KAAAsI,WAAA,EAAY,WACvC,IAAOH,EAAgB,OAAAQ,mBAAA,IAAmB,EAAnB,IAClBR,EAGHN,EAAeM,GAFfM,QAAQC,KAAK,CAAC,+BAIhBD,QAAQG,GAAG,CAACT,EACd,EAAG,EAAE,EAEClD,EAAY,KAAAqD,WAAA,EAAY,a,IAInB1K,EAIEwB,E,qDAPP0I,EAAY,MAAZ,C,KAGa,O,EAAMe,UAAUC,GAAG,CAACC,UAAU,G,QAAtCnL,EAAQ,yB,GAAA,I,iBAEb,O,sBAAA,C,EAAMA,EAAKoL,MAAM,G,QACjB,OADA,SACA,C,EAAMpL,EAAKqL,KAAK,G,sBAAhB,S,oBAIFlB,EAAc,M,aACLH,IACTA,EAAYqB,KAAK,GACjBpB,EAAe,O,6BAEnB,GAAG,CAACC,EAAYF,EAAY,EAE5B,KAAAzF,SAAA,EAAU,WACR,IAAM+G,EAAe,SAAC3D,CAAQ,EAC5ByC,EAAc,SAACmB,CAAG,E,OAAM,OACnBA,GACH,KAAC5D,EAAW,I,EAEhB,EAEM6D,EAAa,SAAC7D,CAAQ,EAC1ByC,EAAc,SAACmB,CAAG,E,OAAM,OACnBA,GACH,KAAC5D,EAAW,I,GAId,IAAM7J,EAAMmC,EAASmB,OAAO,CAACC,IAAI,CAACsG,EAAS,CAC3C,GAAI7J,MAAAA,EAAA,OAAAA,EAAKuG,MAAM,CAAE,CACf,IAAMF,EAAS5B,EAAQ6B,SAAS,CAACtG,EAAIuG,MAAM,EAC3C,GAAI,CACFF,EAAQsH,OAAO,CAAE,OACZ3N,GAAA,CACH6J,SAAAA,EACA+D,QAAS,SAACrD,CAAI,E,OAAapI,EAASyL,OAAO,CAAC/D,EAAUU,E,IAE1D,CAAE,MAAO7G,EAAG,CACVqJ,QAAQc,IAAI,CACT,8BAAwC,OAAX7N,EAAIuG,MAAM,CAAC,oEACzC7C,EAEJ,CACF,CACF,EAsBA,OAnBI0I,GACF5M,OAAO+D,IAAI,CAACpB,EAASmB,OAAO,CAACC,IAAI,EAAEuK,OAAO,CAAC,SAAC9N,CAAG,E,IAQzC,EADF,I,MANF,KAAA+N,OAAA,EACE3B,EACApM,EACAmC,EAASmB,OAAO,CAACC,IAAI,CAACvD,EAAI,CAC1ByE,EAAQ+B,MAAM,CAACrE,EAASmB,OAAO,CAACC,IAAI,CAACvD,EAAI,CAACuG,MAAM,CAAC,CACjDxD,EAAA,AACmD,OAAnD,GAAA0B,EAAQiB,QAAQ,CAACvD,EAASmB,OAAO,CAACC,IAAI,CAACvD,EAAI,CAACuG,MAAM,CAAC,AAAD,GAAlD,kBAA0D,OAA1D,KAAqDiE,KAAK,AAAD,GAAzD,mBAA4D,CAAC,AACjC,OAA1B,GAAArI,EAASmB,OAAO,CAACC,IAAI,CAACvD,EAAI,AAAD,GAAzB,oBAA4BuK,IAAI,CACjC,CAACA,IAAI,C,GAKR6B,IACFA,EAAW4B,EAAE,CAAC,OAAQR,GACtBpB,EAAW4B,EAAE,CAAC,KAAMN,IAEf,WACLtB,MAAAA,GAAAA,EAAY6B,GAAG,CAAC,OAAQT,GACxBpB,MAAAA,GAAAA,EAAY6B,GAAG,CAAC,KAAMP,EACxB,CACF,EAAG,CAACtB,EAAYjK,EAASmB,OAAO,CAACC,IAAI,CAAER,EAAY,EAEnD,IAAMT,EAAU8J,GAAcF,EAE9B,MAAO,CACL5J,QAAAA,EACAuC,WAAY,CAAC,CAACvC,EACdwH,YArJkB,SAACD,CAAQ,EACvBuC,GAGFW,QAAQG,GAAG,CAAC,cAAerD,EAE/B,EAgJEE,UA9IgB,SAACF,CAAQ,EACzB,GAAI7G,OAEG,CACL,IAAMhD,EAAMmC,EAASmB,OAAO,CAACC,IAAI,CAACsG,EAAS,CAC3C,GAAI7J,MAAAA,EAAA,OAAAA,EAAKuG,MAAM,CAAE,CACf,IAAMF,EAAS5B,EAAQ6B,SAAS,CAACtG,EAAIuG,MAAM,EAC3C,GAAI,CACFF,EAAQsH,OAAO,CAAE,OACZ3N,GAAA,CACH6J,SAAAA,EACA+D,QAAS,SAACrD,CAAI,E,OAAapI,EAASyL,OAAO,CAAC/D,EAAUU,E,IAE1D,CAAE,MAAO7G,EAAG,CACVqJ,QAAQc,IAAI,CACT,8BAAwC,OAAX7N,EAAIuG,MAAM,CAAC,oEACzC7C,EAEJ,CACF,CACF,CACF,EA0HEX,YAAAA,EACAmD,eAAAA,EACAqD,UAAAA,EAGAjF,qBAAAA,EACAsH,UAAW,CAAC,CAACM,EAGb7H,iBAAAA,EACA4F,WAAAA,EAGAjH,SAAAA,EACA+I,YAAAA,CACF,CACF,C,2+DCzLA,IAAMmC,EAAe,WAGfC,EAAgB,IAAIC,IAEb1J,EAAa,WACxB,I,IAA8B,SAAA2J,UAAA,EALJ,WAKyB,GAA5C5J,EAAuB,KAAd6J,EAAc,KACE,SAAAD,UAAA,EALP,WAOvB,CAAC,MAFI3I,EAAyB,KAAf6I,EAAe,KAII,SAAAlJ,QAAA,EAAS,OAAtCR,EAA6B,KAAjB2J,EAAiB,KACR,SAAAnJ,QAAA,EAA4B,CAAC,MAAlDmB,EAAqB,KAAbiI,EAAa,KACtBC,EAAcjK,EAAQkK,MAAM,CAChC,SAACC,CAAI,CAAEtM,CAAO,E,OAAM,OAAKsM,GAAM,KAACtM,EAAQ+E,IAAI,CAAG/E,G,EAC/C,CAAC,GAGGuM,EAAY,SAACtI,CAAM,M,EACvB+H,EAAY,A,kDAAG7J,I,mSAAA,OAAJ,CAAa8B,EAAO,EACjC,EAEA,IAAMmB,G,KAAkB,W,IAChBoH,EAIEvI,E,olCAJFuI,CAAAA,EAAQC,OACZ,uFAAsF,EAE7E,MAAP,C,KACa,O,EAAM,KAAAC,WAAA,EAAYF,G,QAA3BvI,CAAAA,EAAS,WACHsI,EAAUtI,G,6BAE1B,E,yNAmDA,MA7BA,KAAAE,SAAA,EAAU,WACR+H,EAAc,IAEd,IAAMvH,EAAS,CACbI,KAAM,UACN4H,QAASxK,EAAQ6C,GAAG,CAAC,SAACf,CAAM,EAC1B,MAAO,CACLc,KAAMd,EAAOc,IAAI,CAAC6H,UAAU,CAAC,IAAK,KAClCC,MAAQ,GAAa,OAAX5I,EAAO6I,GAAG,CAAC,iBACvB,CACF,EACF,EAEA,KAAAC,SAAA,EAAUpI,EAAQiH,EAAcC,GAAemB,IAAI,CAAC,SAACC,CAAO,EAC1DxC,QAAQG,GAAG,CAAC,SAAUqC,GACtBd,EAAUc,GACVf,EAAc,IACdD,EACE/O,OAAO+D,IAAI,CAACgM,GAASZ,MAAM,CACzB,SAACC,CAAI,CAAE5O,CAAG,E,IAED,I,OAFO,OACX4O,GACH,KAAC5O,EAAM,CAAY,OAAZ,GAAAuP,CAAO,CAACvP,EAAI,AAAD,GAAX,kBAAoB,OAApB,KAAcqG,MAAM,AAAD,GAAnB,oBAAsBX,QAAQ,AAAD,GAAK,CAAC,G,EAE5C,CAAC,GAGP,EACF,EAAG,CAACjB,EAAQ,EAEL,CACLI,WAAAA,EACAJ,QAAAA,EACAiK,YAAAA,EACAlI,OAAAA,EACAd,SAAAA,EACA4I,WAAAA,EACAO,UAAAA,EACAnH,gBAAAA,EACAF,mBA1DyB,SAACH,CAAI,CAAUmI,CAAQ,EACnCC,QACX,kHAGAnB,EAAW7J,EAAQiL,MAAM,CAAC,SAACnJ,CAAM,E,OAAKA,EAAOc,IAAI,GAAKA,C,IACtDmI,IAEJ,EAmDElJ,UAjDgB,SAACe,CAAI,EACrB,IAAMsI,EAAa,UAAEzB,EAAa,KAA8B,OAA3B7G,MAAAA,EAAA,OAAAA,EAAM6H,UAAU,CAAC,IAAK,MAC3D,OAAOf,EAAcyB,GAAG,CAACD,EAC3B,EA+CEE,WA7CiB,WACjB,OAAO1B,CACT,CA4CA,CACF,C,+uEC/EA,IAAM2B,EAAc,WAEdC,EAAc,WAClB,IAAMtL,EAAUuL,aAAaC,OAAO,CAACH,UACrC,AAAIrL,EACK,KAAKe,KAAK0K,KAAK,CAACzL,IAElB,CAAE0L,QAAS,CAAE5M,KAAM,CAAC,CAAE,CAAE,CACjC,EAEM6M,EAAgB,SAACjO,CAAQ,EAC7B6N,aAAaK,OAAO,CAACP,EAAatK,KAAKC,SAAS,CAACtD,GACnD,EAEMmO,EAAiB,WACrB,MAAO,SACT,EAEa9L,EAAc,WACzB,IAAgC,SAAAa,QAAA,EAAmB0K,KAAA,GAA5C5N,EAAyB,KAAfoO,EAAe,KACM,SAAAlL,QAAA,EAAiBiL,GAAA,GAAhD1I,EAA+B,KAAlBC,EAAkB,KAChCvE,EAAUnB,CAAQ,CAACyF,EAAY,CAE/B4I,EAAgB,SAACC,CAAG,EACxBF,EAAY,SAAC9C,CAAG,EACd,IAAMiD,EAAe,OAChBjD,GACH,KAAC7F,EAAc,KACV6F,CAAG,CAAC7F,EAAY,CAChB6I,KAIP,OADAL,EAAcM,GACPA,CACT,EACF,EAsCMC,EAAa,SAACtJ,CAAI,E,IAAUoJ,EAAA,uDAAe,CAAElN,KAAM,CAAC,CAAE,EAC1DgN,EAAY,SAAC9C,CAAG,EACd,IAAMiD,EAAe,OAChBjD,GACH,KAACpG,EAAOoJ,IAGV,OADAL,EAAcM,GACPA,CACT,EACF,EAiGA,MAAO,CACLvO,SAAAA,EACAmB,QAAAA,EACAsE,YAAAA,EAEAC,eAAAA,EACA1B,UApJgB,SAACkB,CAAI,CAAUwC,CAAQ,EACvC2G,EAAc,CACZjN,KAAM,OACDD,EAAQC,IAAI,EACf,KAACsG,EAAW,CACVtD,OAAQc,EACRJ,OAAQ,CAAC,EACTsD,KAAM,GACN/G,MAAO,GACPiH,QAAS,EACX,GAEJ,EACF,EAwIEhD,aAtImB,SAACJ,CAAI,EACxBmJ,EAAc,CACZjN,KAAM,KACD/D,OAAO+D,IAAI,CAACD,EAAQC,IAAI,EAAEoL,MAAM,CAAC,SAACC,CAAI,CAAE5O,CAAG,EAC5C,IAAMiH,EAAS3D,EAAQC,IAAI,CAACvD,EAAI,CAC1B4Q,EAAQvJ,IAASJ,EAAOV,MAAM,CACpC,OAAO,OACFqI,GACH,KAAC5O,EAAM,CACLuG,OAAQqK,EAAQ,GAAK3J,EAAOV,MAAM,CAClCU,OAAQ2J,EAAQ,CAAC,EAAI3J,EAAOA,MAAM,CAClCsD,KAAMqG,EAAQ,GAAK3J,EAAOsD,IAAI,CAC9B/G,MAAOoN,EAAQ,GAAK3J,EAAOzD,KAAK,CAChCiH,QAASmG,CAAAA,GAAgB3J,EAAOwD,OAAO,AACzC,GAEJ,EAAG,CAAC,GAER,EACF,EAoHE+F,cAAAA,EACAG,WAAAA,EACA3I,iBAzGuB,WACvB,IAAM6I,EAAQ9B,OACZ,kKAEF,GAAI8B,EAAO,CACT,IACIC,EADmB,IAAAD,EAAME,KAAK,CAAC,QAA5B1J,EAAgB,KAAVJ,EAAU,KAEvB,GAAI,CACF,IAAM+J,EAAKxL,KAAK0K,KAAK,CAACjJ,GAClB+J,GACFF,CAAAA,EAAgBE,CAAC,CAErB,CAAE,MAAOtN,EAAG,CACVqJ,QAAQG,GAAG,CAAC,0BACd,CACAH,QAAQG,GAAG,CAAC,CAAE7F,KAAAA,EAAMJ,OAAAA,CAAO,GAC3B0J,EAAWtJ,EAAMyJ,GACjBjJ,EAAeR,EACjB,CACF,EAuFEU,oBArF0B,WACb0H,QACX,kFAGAc,EAAY,SAAC9C,CAAG,EAEwBA,CAAG,CAAhC7F,EAAY,CAArB,IAA6BqJ,EAAA,A,6XAASxD,EAAA,CAA7B7F,E,SAET,OADAC,EAAe,WACR,KAAKoJ,EACd,EAEJ,EA0EEhJ,oBAxE0B,WAC1B8G,OAAO,WAAa,GAAiB,OAAfnH,EAAY,KAA2B,OAAxBpC,KAAKC,SAAS,CAACnC,IACtD,EAuEE4D,UArEgB,SAAClH,CAAG,CAAUiH,CAAM,EAWpCuJ,EAVa,OACRlN,GAAA,CACHC,KAAM,OACDD,EAAQC,IAAI,EACf,KAACvD,EAAM,OACFsD,EAAQC,IAAI,CAACvD,EAAI,GACpBiH,OAAAA,C,OAKR,EA0DE2G,QAxDc,SAAC5N,CAAG,CAAUuK,CAAI,EAWhCiG,EAVa,OACRlN,GAAA,CACHC,KAAM,OACDD,EAAQC,IAAI,EACf,KAACvD,EAAM,OACFsD,EAAQC,IAAI,CAACvD,EAAI,GACpBuK,KAAAA,C,OAKR,EA6CE5G,SA3Ce,SAAC3D,CAAG,CAAUwD,CAAK,EAWlCgN,EAVa,OACRlN,GAAA,CACHC,KAAM,OACDD,EAAQC,IAAI,EACf,KAACvD,EAAM,OACFsD,EAAQC,IAAI,CAACvD,EAAI,GACpBwD,MAAAA,C,OAKR,EAgCE0N,WA9BiB,SAAClR,CAAG,CAAUyK,CAAO,EAWtC+F,EAVa,OACRlN,GAAA,CACHC,KAAM,OACDD,EAAQC,IAAI,EACf,KAACvD,EAAM,OACFsD,EAAQC,IAAI,CAACvD,EAAI,GACpByK,QAAAA,C,OAKR,CAmBA,CACF,C,+eCzNO,IAAM4D,EAAa,SAAI8C,CAAU,E,QAAUC,EAAW,UAAX,6CAAW,EAAE,CAqB7D,IAA0B,G,EAAA,KAAA/L,QAAA,EAAYuK,AApB1B,WACV,I,EAAMyB,EAAQrB,aAAaC,OAAO,CAACkB,GACnC,GAAIE,EAAO,CAET,GAAID,AAAoBtO,KAAAA,IAApBsO,EAAStR,MAAM,CAEjB,S,+CAAW0F,KAAK0K,KAAK,CAACmB,K,iSAAA,CAExB,OAAO,A,6aAAA,GAAK7L,KAAK0K,KAAK,CAACmB,GACzB,CAEA,OAAOD,CACT,K,EAQsC,E,iiBAA/BC,EAAmB,KAAZC,EAAY,KAC1B,MAAO,CAACD,EAPI,SAACE,CAAI,EAGf,OAFAD,EAASC,GACTvB,aAAaK,OAAO,CAACc,EAAY3L,KAAKC,SAAS,CAAC8L,IACzCA,CACT,EAGmB,AACrB,C,gFCXA,MAZwB,SAACC,CAAW,M,IAClC,GAAIA,I,EAAeA,E,SAAuBC,W,6FACxC,2CAAqBnC,IAAI,CAAC,Y,IAAGoC,EAAA,EAAAA,MAAA,CAAQC,EAAA,EAAAA,MAAA,CAAQC,EAAA,EAAAA,MAAA,CAAQC,EAAA,EAAAA,MAAA,CAAQC,EAAA,EAAAA,OAAA,CAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,EACV,EAEJ,C,iGCRazD,EAAU,SACrB3B,CAAU,CACVpM,CAAG,CACH+R,CAAO,CACPvL,CAAM,CACNzD,CAAW,CACXwH,CAAI,EAEJ,IAAMyH,EAAS9M,SAAS+M,aAAa,CAAC,SACtCD,CAAAA,EAAOhR,KAAK,CAAG,AAAAoL,CAAAA,MAAAA,EAAA,OAAAA,EAAY8F,SAAS,AAAD,GAAK,EACxCF,EAAOjR,MAAM,CAAG,AAAAqL,CAAAA,MAAAA,EAAA,OAAAA,EAAY8F,SAAS,AAAD,GAAK,EACzC,IAAMC,EAAMH,EAAOI,UAAU,CAAC,MAC9BD,EAAIE,IAAI,GACRF,EAAIG,SAAS,CAAC,EAAG,EAAGN,EAAOhR,KAAK,CAAEgR,EAAOjR,MAAM,EAG/CoR,EAAII,aAAa,CAAG,qBACpBJ,EAAIK,aAAa,CAAG,KAEpBL,CAAAA,EAAIM,IAAI,CAAI,GAAW,OADN,GACM,cACvBN,EAAIO,SAAS,CAAG,QAChBP,EAAIxR,SAAS,CAAG,SAChB,IAAMgS,EAASX,EAAOhR,KAAK,CAAG,EAM9B,GALAmR,EAAIS,QAAQ,CAACb,EAAQvO,KAAK,CAAEmP,EAAQX,EAAOjR,MAAM,CAAG,EAAGiR,EAAOhR,KAAK,EACnEmR,EAAIE,IAAI,GACRF,EAAIU,OAAO,GAGPtI,EAAM,CACR,IAAMuI,EAAef,EAAQvO,KAAK,CAAG,EAAI,EACnCuP,EAAQhB,EAAQvO,KAAK,CAAG,IAAM,EAC9BwP,EAAa,GAAKD,EAClBE,EAAc,GAAKF,CACzBZ,CAAAA,EAAIe,WAAW,CAAG,OAElBf,EAAIO,SAAS,CAAG,OAGhB,IAAMS,EAAI,IAAIC,OAAO7I,GACrB4H,EAAIkB,SAAS,CAHFV,EAASK,EAAa,EACtBL,EAASM,EAAc,EAAIH,GAGtCX,EAAIY,KAAK,CAACA,EAAOA,GACjBZ,EAAIpH,MAAM,CAACoI,GACXhB,EAAIjJ,IAAI,CAACiK,GACThB,EAAIE,IAAI,GACRF,EAAIU,OAAO,EACb,KAAO,CAELV,EAAII,aAAa,CAAG,qBACpBJ,EAAIK,aAAa,CAAG,KAEpBL,CAAAA,EAAIM,IAAI,CAAI,GAAW,OADN,GACM,cACtBN,EAAImB,WAAW,CAAG,OAAUnB,EAAIO,SAAS,CAAG,QAC7CP,EAAIxR,SAAS,CAAG,SAChB,IAAM,EAASqR,EAAOhR,KAAK,CAAG,EAC9BmR,EAAIS,QAAQ,CAACb,EAAQxL,MAAM,CAAE,EAAQyL,EAAOjR,MAAM,CAAG,GAAIiR,EAAOhR,KAAK,EACrEmR,EAAIE,IAAI,GACRF,EAAIU,OAAO,EACb,CAEIrM,CAAAA,MAAAA,EAAA,OAAAA,EAAQW,MAAM,AAAD,IAAM,IACrB4F,QAAQG,GAAG,CAAC,cAGd,IAAMpI,EAAKqN,EAAIoB,YAAY,CAAC,EAAG,EAAGvB,EAAOhR,KAAK,CAAEgR,EAAOjR,MAAM,EAK7D,GAJAqL,MAAAA,GAAAA,EAAYoH,aAAa,CAACC,SAASzT,GAAM,EAAAgC,MAAA,KAAW,CAAC8C,EAAGyM,IAAI,EAAG,CAC7DmC,OAAQ,MACV,GAEI3R,OAAOiC,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC,UAC9BlE,GAAO+C,CAAAA,MAAAA,EAAA,OAAAA,EAAa4Q,QAAQ,EAAC,EAAG,CAClC,IACA,EADMpC,EAAOS,EAAO4B,SAAS,E,AACL,QAAxB,GAAA1O,SAASC,cAAc,CAAC,OAAM,GAA9B,cAAiC2F,YAAY,CAAC,MAAOyG,EACvD,CAGFY,EAAIU,OAAO,EACb,C,63EC7EO,IAAM7D,G,EAAc,WAAOF,CAAK,E,gCAErC,MAAO,C,EAAA,IAAInI,S,EAAQ,WAAOC,CAAO,E,IAIrBwI,EAKAmC,EAEEsC,EACkB,EAAjBtM,EAMa,EAAfuM,EAAMC,EACgB,EAArB,EAAM,EAASC,EAYlBtQ,E,2EA7BHoL,EAAM5K,QAAQ,CAAC,cAAf,O,KAMW,OAJPkL,EAAMN,EAAMmF,OAAO,CACvB,sBACA,iCAEW,C,EAAMC,MAAM9E,G,QACZ,O,EAAM+E,AADN,SACWC,IAAI,G,QAC5B,GAAI7C,AADEA,CAAAA,EAAO,WACDA,EAAK8C,SAAS,CAClBR,EAAWtC,EAAKsC,QAAQ,CACvBtM,EAAiB,KAAAgK,EAAK+C,SAAS,CAACvD,KAAK,CAAC,QAArB,IACxBnK,EAAQ,CAAES,KADc,KACRE,QAAAA,EAASgN,SAAU,CAAC,Q,CAAUnF,IAAKyE,CAAS,QAE5D,MAAM,AAAIW,MAAM,I,mBAEb,GAAI1F,EAAM5K,QAAQ,CAAC,mBAGxB,GAFO4P,EAAe,KAAAhF,EAAMiC,KAAK,CAAC,QAAZ,IAATgD,EAAS,KACd,EAAqB,kBAAiB,CAACA,EAAK,EAA5C1M,IAAI,CAAE,EAAe,EAAfE,OAAO,CAAEyM,EAAM,EAANA,CAAC,CACpB,EACFpN,EAAQ,CACNS,KAAM,EACNE,QAAS,EACTgN,SAAU,CAACP,E,CACX5E,IAAK0E,EAAKG,OAAO,CAAC,iBAAkB,GACtC,QACK,MAAM,AAAIO,MAAM,SAEvB,MAAM,AAAIA,MAAM,G,4CAEX9Q,EAAA,SACP+Q,MAAM,uDACN1H,QAAQC,KAAK,CAACtJ,GACdkD,EAAQ,M,yBAEZ,G,SApC0BA,CAAO,E,oCAqCnC,G,SAvCkCkI,CAAK,E,gkCCoBhC,IAAMO,G,KAAY,SACvBpI,CAAM,CACNyN,CAAK,CACLC,CAAK,E,yjCAEL,MAAO,C,EAAA,IAAIhO,QAA2B,SAACC,CAAO,EAC5C,KAAAgO,IAAA,EAAK3N,GAEL,IAAM4N,EAAoC,EAAE,CAC5C5N,EAAOgI,OAAO,CAACnB,OAAO,CAAC,SAACgH,CAAM,EAC5BD,EAAQE,IAAI,CAAC,KAAAC,UAAA,EAAWF,EAAO3F,KAAK,CAAE2F,EAAOzN,IAAI,EACnD,GAEAV,QAAQsO,GAAG,CAACJ,GAASvF,IAAI,CAAC,SAACL,CAAO,EAChC,IAAMM,EAAqC,EAAE,CAC7CN,EAAQnB,OAAO,CAAC,SAACoH,CAAM,EAChBA,EAAO/N,MAAM,CAUhBoI,EAAQwF,IAAI,CAAC,KAAAI,UAAA,EAAWD,EAAO7N,IAAI,CAAEqN,EAAOC,KAT5C5H,QAAQC,KAAK,CACV,mCAAqD,OAAnBkI,EAAO7N,IAAI,CAAC,SAAkB,OAAX6N,EAAO9F,GAAG,EAChE8F,EAAOxR,CAAC,EAGV6L,EAAQwF,IAAI,CACVpO,QAAQC,OAAO,CAAC,CAAES,KAAM6N,EAAO7N,IAAI,CAAEqN,MAAAA,EAAOrO,OAAQvD,KAAAA,CAAU,IAKpE,GAEA6D,QAAQsO,GAAG,CAAC1F,GAASD,IAAI,CAAC,SAAC8F,CAAQ,EACjCxO,EACEwO,EAASzG,MAAM,CACb,SAACwE,CAAC,CAAEzP,CAAC,E,OAAM,OACNyP,GACH,KAACzP,EAAE2D,IAAI,CAAG,OAAK3D,GAAA,CAAGyD,OAAQ,CAAC,CAACzD,EAAE2C,MAAM,A,MAEtC,CAAC,GAGP,EACF,EACF,G,EACF,E,sLA1CEY,CAAM,CACNyN,CAAK,CACLC,CAAK,E,4PCjBA,IAAMQ,G,KAAa,SACxB9N,CAAI,CACJqN,CAAK,CACLC,CAAK,E,yjCAEL,MAAO,C,EAAA,IAAIhO,QAAwB,SAACC,CAAO,EACzC,IAAM+I,EAAa,GAAW,OAAT+E,EAAM,KAAQ,OAALrN,GAC1BsN,EAAMU,GAAG,CAAC1F,GAEZ/I,EAAQ,CAAES,KAAAA,EAAMqN,MAAAA,EAAOrO,OADRsO,EAAM/E,GAAG,CAACD,EACK,GAE9B,KAAA2F,UAAA,EAAY,GAA+B,OAA7BjO,EAAK6H,UAAU,CAAC,IAAK,KAAK,KAAkB,OAAfwF,EAAMa,KAAK,CAAC,KACpDjG,IAAI,CAAC,SAACjJ,CAAM,EACXsO,EAAMa,GAAG,CAAC7F,EAAWtJ,GACrBO,EAAQ,CAAES,KAAAA,EAAMqN,MAAAA,EAAOrO,OAAQA,CAAiB,EAClD,GACCoP,KAAK,CAAC,WACL7O,EAAQ,CAAES,KAAAA,EAAMqN,MAAAA,EAAOrO,OAAQvD,KAAAA,CAAU,EAC3C,EAEN,G,EACF,E,sLApBEuE,CAAI,CACJqN,CAAK,CACLC,CAAK,E,wOCVP,I,IAAMe,EAAa,IAAIC,IAEhB,IAAMX,G,KAAa,SAAO5F,CAAG,CAAU/H,CAAI,E,yjCAChD,MAAO,C,EAAA,IAAIV,QAAuB,SAACC,CAAO,EAExC,GADI,CAACwI,GAAKxI,EAAQ,CAAEO,OAAQ,GAAOiI,IAAAA,EAAK/H,KAAAA,CAAK,GACzCqO,EAAWL,GAAG,CAACjG,GAAM,CACvBxI,EAAQ,CAAEO,OAAQ,GAAMiI,IAAAA,EAAK/H,KAAAA,CAAK,GAClC,MACF,CACA,IAAMuO,EAAU1Q,SAAS+M,aAAa,CAAC,SACvC2D,CAAAA,EAAQ7Q,GAAG,CAAGqK,EACdwG,EAAQC,IAAI,CAAG,kBACfD,EAAQE,KAAK,CAAG,GAChBF,EAAQG,KAAK,CAAG,GAChBH,EAAQI,MAAM,CAAG,WACfN,EAAWO,GAAG,CAAC7G,GACfxI,EAAQ,CAAEO,OAAQ,GAAMiI,IAAAA,EAAK/H,KAAAA,CAAK,EACpC,EACAuO,EAAQM,OAAO,CAAG,SAACxS,CAAC,E,OAAKkD,EAAQ,CAAEO,OAAQ,GAAOiI,IAAAA,EAAK/H,KAAAA,EAAM3D,EAAAA,CAAE,E,EAE/DwB,SAASiR,IAAI,CAACC,WAAW,CAACR,EAC5B,G,EACF,E,sLApBiCxG,CAAG,CAAU/H,CAAI,E,iKCIlD,IAAMyI,EAAc,cAEdvC,EAAQ,WACZyC,aAAaqG,UAAU,CAACvG,EAC1B,EAEM7I,EAAsC,CAC1CkJ,QAAS,CACP7G,aAAc,kBACdK,SAAU,EACVH,YAAa,EACb8M,SAAU,EACV/I,MAAAA,CACF,CACF,EAEaZ,EAAiB,WAC5B,I,IAAM4J,EAAcvG,aAAaC,OAAO,CAACH,GACzC,GAAIyG,EACF,QAAO,E,EAAC,A,6aAAA,GAAK/Q,KAAK0K,KAAK,CAACqG,I,KAAA,CAAchJ,MAAAA,C,iVAAQ,CAEhD,MAAO,EAAE,AACX,EAEaN,EAAsB,W,IACjCjN,EAAA,uDAA2B,UAErBuW,EAActP,CAAM,CAACjH,EAAI,CAE/B,OADAgQ,aAAaK,OAAO,CAACP,EAAatK,KAAKC,SAAS,CAAC8Q,IAC1C,CAACtP,CAAM,CAACjH,EAAI,CAAC,AACtB,C"}