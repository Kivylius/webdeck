{"version":3,"file":"17.js","sources":["./src/App.styles.tsx","./src/App.tsx","./src/bootstrap.tsx","./src/components/Controller/Debugger/Debugger.tsx","./src/components/Controller/Header/Header.styles.tsx","./src/components/Controller/Header/Header.tsx","./src/components/Controller/Plugin/Plugin.tsx","./src/components/Controller/Plugins/Plugins.tsx","./src/components/Controller/Profiles/Profiles.styles.tsx","./src/components/Controller/Profiles/Profiles.tsx","./src/components/Deck/Deck.styles.tsx","./src/components/Deck/Deck.tsx","./src/components/SubSubTitle/SubSubTitle.tsx","./src/components/SubTitle/SubTitle.tsx","./src/contexts/AppContext.tsx","./src/hooks/useDeck.ts","./src/hooks/usePlugins.ts","./src/hooks/useProfiles.ts","./src/reportWebVitals.ts","./src/utils/virtualDeck.ts"],"sourcesContent":["import styled from \"styled-components\";\n\nexport const Wrapper = styled(\"div\")({\n  textAlign: \"center\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  height: \"100vh\",\n  width: \"100vw\",\n});\n\n//@ts-expect-error styled ignore\nexport const Controller = styled(\"div\")<{ $isOpen: boolean }>({\n  display: ({ $isOpen }: { $isOpen: boolean }) => ($isOpen ? \"block\" : \"none\"),\n  marginLeft: 50,\n  padding: \"50px\",\n  paddingTop: \"30px\",\n  border: \"2px inset black\",\n  background: \"rgb(21 21 21)\",\n  borderRadius: \"20px\",\n  color: \"white\",\n  minHeight: \"80vh\",\n  maxHeight: \"80vh\",\n  overflow: \"auto\",\n  boxShadow:\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\n});\n\nexport const Settings = styled(\"div\")({\n  color: \"white\",\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\",\n  padding: \"2px 0px\",\n});\n","import { Buffer } from \"buffer\";\nimport { Controller, Settings, Wrapper } from \"./App.styles\";\n\nimport { Deck } from \"./components/Deck/Deck\";\nimport { SubSubTitle } from \"./components/SubSubTitle/SubSubTitle\";\nimport { Profiles } from \"./components/Controller/Profiles/Profiles\";\nimport { Header } from \"./components/Controller/Header/Header\";\nimport { Debugger } from \"./components/Controller/Debugger/Debugger\";\nimport { useAppContext } from \"./contexts/AppContext\";\nimport { Plugins } from \"./components/Controller/Plugins/Plugins\";\nimport { Plugin } from \"./components/Controller/Plugin/Plugin\";\n\n// injected Buffer\nwindow.Buffer = Buffer;\n\nconst App = () => {\n  const { deck } = useAppContext();\n\n  return (\n    <Wrapper>\n      {deck.current ? (\n        <>\n          <Deck />\n          <Controller $isOpen={deck.selectedKey !== undefined}>\n            <Header />\n            <Profiles />\n            {deck.selectedKey !== undefined && (\n              <>\n                <Settings>\n                  <SubSubTitle>currently selected key</SubSubTitle>\n                  <span>{deck.selectedKey}</span>\n                </Settings>\n                <Settings>\n                  <SubSubTitle>plugin</SubSubTitle>\n                  <Plugins />\n                </Settings>\n                <Settings>\n                  <Plugin />\n                </Settings>\n              </>\n            )}\n            <Debugger />\n          </Controller>\n        </>\n      ) : (\n        <>\n          <button onClick={deck.tryGetStreamDeck}>Connect</button>\n          <small>-or-</small>\n          <button onClick={deck.tryCreateVirtualDeck}>\n            Create Virtual Device\n          </button>\n        </>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default App;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nimport { AppContext } from \"./contexts/AppContext\";\r\nimport { usePlugins } from \"./hooks/usePlugins\";\r\nimport { useProfiles } from \"./hooks/useProfiles\";\r\nimport { useDeck } from \"./hooks/useDeck\";\r\n\r\nexport type AppContainerType = {\r\n  deck: ReturnType<typeof useDeck>;\r\n  profiles: ReturnType<typeof useProfiles>;\r\n  plugins: ReturnType<typeof usePlugins>;\r\n};\r\n\r\nexport const Container = () => {\r\n  const profiles = useProfiles();\r\n  const plugins = usePlugins();\r\n  const deck = useDeck(profiles, plugins);\r\n\r\n  return (\r\n    <AppContext.Provider value={{ deck, profiles, plugins }}>\r\n      <div>{!plugins.initalised && <>initialising plugins...</>}</div>\r\n      <App />\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\nconst root = ReactDOM.createRoot(\r\n  document.getElementById(\"root\") as HTMLElement\r\n);\r\n\r\nroot.render(\r\n  <React.StrictMode>\r\n    <Container />\r\n  </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n\r\n// useEffect(() => {\r\n//   if (plugins.initalised && deck.initalised) {\r\n//     // once all plugins are loade, try initalise the modules.\r\n//     // console.log(\"plugins\", plugins);\r\n//     // const modules: Promise<unknown>[] = [];\r\n//     // Object.keys(profiles.profile.keys).forEach((keyIndex) => {\r\n//     //   const { plugin } = profiles.profile.keys[keyIndex];\r\n//     //   if (plugin) modules.push(plugins.loadModule(plugin));\r\n//     // });\r\n//     // Promise.all(modules).then((resp) => {\r\n//     //   console.log(\"!!! Modules Loaded\", resp);\r\n//     //   console.log(\"MODULE_CATCHE\", plugins.getModules());\r\n//     //   // setInitalised(true);\r\n//     // });\r\n//   }\r\n// }, [plugins.initalised, deck.initalised]);\r\n\r\n// if (!plugins.initalised) {\r\n//   return <>initialising plugin...</>;\r\n// }\r\n","import { FC, useState } from \"react\";\r\nimport { SubSubTitle } from \"../../SubSubTitle/SubSubTitle\";\r\nimport { useAppContext } from \"../../../contexts/AppContext\";\r\n\r\n// TODO: remove depedancy for subtitle\r\nexport const Debugger: FC = () => {\r\n  const { profiles, plugins } = useAppContext();\r\n  const [open, setIsOpen] = useState(false);\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          justifyContent: \"space-between\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          padding: \"0 0 8px 0\",\r\n        }}\r\n      >\r\n        <SubSubTitle>debugging</SubSubTitle>\r\n        <button className=\"s\" onClick={() => setIsOpen(!open)}>\r\n          {open ? \" close\" : \"open\"}\r\n        </button>\r\n      </div>\r\n      <div style={{ display: open ? \"block\" : \"none\" }}>\r\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\r\n          {JSON.stringify(profiles.profiles, null, 4)}\r\n        </pre>\r\n        <pre style={{ width: 350, textAlign: \"left\", background: \"black\" }}>\r\n          {JSON.stringify(plugins.plugins, null, 4)}\r\n        </pre>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { styled } from \"styled-components\";\r\n\r\nexport const HeaderWrapper = styled(\"div\")({\r\n  display: \"flex\",\r\n  justifyContent: \"space-between\",\r\n  alignItems: \"center\",\r\n  minWidth: 350,\r\n  paddingBottom: \"8px\",\r\n  marginBottom: \"10px\",\r\n  borderBottom: \"1px solid #474747\",\r\n});\r\n","import { HeaderWrapper } from \"./Header.styles\";\r\nimport { SubTitle } from \"../../SubTitle/SubTitle\";\r\nimport { FC } from \"react\";\r\nimport { useAppContext } from \"../../../contexts/AppContext\";\r\n\r\nexport const Header: FC = () => {\r\n  const { deck } = useAppContext();\r\n  return (\r\n    <HeaderWrapper>\r\n      <SubTitle>Settings</SubTitle>\r\n      <button\r\n        title=\"close\"\r\n        className=\"s\"\r\n        onClick={() => deck.setSelectedKey(undefined)}\r\n      >\r\n        ×\r\n      </button>\r\n    </HeaderWrapper>\r\n  );\r\n};\r\n","import { FC, lazy, useEffect, useState, Suspense } from \"react\";\r\nimport { useAppContext } from \"../../../contexts/AppContext\";\r\n\r\ntype FederatedComponent = FC<{\r\n  config: unknown;\r\n  setConfig: (config: Record<string | number | symbol, unknown>) => void;\r\n}>;\r\n\r\nexport const Plugin: FC = () => {\r\n  const { plugins, profiles, deck } = useAppContext();\r\n  const [Plugin, setPlugin] = useState<FederatedComponent | null>(null);\r\n\r\n  const key = deck.selectedKey!;\r\n  const keyConfig = profiles.profile.keys[key];\r\n  const module = plugins.getModule(\r\n    plugins.pluginsById[keyConfig?.plugin]?.name\r\n  );\r\n\r\n  console.log(\r\n    \"module\",\r\n    module,\r\n    plugins.pluginsById[keyConfig?.plugin]?.name,\r\n    plugins.getModules()\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (module) {\r\n      const Component = lazy(() => {\r\n        return Promise.resolve(module);\r\n      });\r\n      setPlugin(Component);\r\n    } else {\r\n      setPlugin(null);\r\n    }\r\n  }, [module]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100%\",\r\n        height: \"400px\",\r\n        outline: \"none\",\r\n        margin: \"8px 0\",\r\n        border: \"2px solid silver\",\r\n        position: \"relative\",\r\n        textAlign: \"left\",\r\n      }}\r\n    >\r\n      <Suspense fallback=\"Loading System\">\r\n        {Plugin && keyConfig?.config ? (\r\n          <Plugin\r\n            config={keyConfig.config}\r\n            setConfig={(config: Record<string | number | symbol, unknown>) => {\r\n              profiles.setConfig(key, config);\r\n            }}\r\n          />\r\n        ) : (\r\n          <div></div>\r\n        )}\r\n      </Suspense>\r\n    </div>\r\n  );\r\n};\r\n","import { FC } from \"react\";\r\nimport { useAppContext } from \"../../../contexts/AppContext\";\r\n\r\nexport const Plugins: FC = () => {\r\n  const { profiles, deck, plugins } = useAppContext();\r\n  const selectedPlugin = profiles.profile.keys[deck.selectedKey!]?.plugin;\r\n  console.log({ selectedPlugin });\r\n  return (\r\n    <div>\r\n      <select\r\n        name=\"plugins\"\r\n        id=\"plugins\"\r\n        title=\"select plugin\"\r\n        value={selectedPlugin || \"\"}\r\n        onChange={(e) => profiles.setPlugin(e.target.value, deck.selectedKey!)}\r\n      >\r\n        <option value=\"\">select...</option>\r\n        {plugins.plugins.map((plugin) => {\r\n          return (\r\n            <option key={plugin.name} value={plugin.name}>\r\n              {plugin.name} {plugin.creator && `@${plugin.creator}`}\r\n            </option>\r\n          );\r\n        })}\r\n      </select>\r\n      <button\r\n        title=\"remove plugin\"\r\n        className=\"s\"\r\n        onClick={() =>\r\n          plugins.promptRemovePlugin(selectedPlugin, () => {\r\n            // once pluging removed remove bindings\r\n            profiles.removePlugin(selectedPlugin);\r\n          })\r\n        }\r\n        disabled={!selectedPlugin}\r\n      >\r\n        -\r\n      </button>\r\n      <button\r\n        title=\"add plugin\"\r\n        className=\"s\"\r\n        onClick={plugins.promptAddPlugin}\r\n      >\r\n        +\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const ProfilesWrapper = styled(\"div\")({\r\n  color: \"white\",\r\n  display: \"flex\",\r\n  justifyContent: \"space-between\",\r\n  alignItems: \"center\",\r\n  paddingBottom: \"8px\",\r\n  marginBottom: \"5px\",\r\n  borderBottom: \"1px solid #474747\",\r\n});\r\n","import { FC } from \"react\";\r\nimport { SubTitle } from \"../../SubTitle/SubTitle\";\r\nimport { ProfilesWrapper } from \"./Profiles.styles\";\r\nimport { useAppContext } from \"../../../contexts/AppContext\";\r\n\r\nexport const Profiles: FC = () => {\r\n  const { profiles } = useAppContext();\r\n  return (\r\n    <ProfilesWrapper>\r\n      <SubTitle>Profiles</SubTitle>\r\n      <div>\r\n        <select\r\n          name=\"profile\"\r\n          id=\"profile\"\r\n          title=\"select profile\"\r\n          value={profiles.profileName}\r\n          onChange={(e) => profiles.setProfileName(e.target.value)}\r\n        >\r\n          {Object.keys(profiles.profiles).map((profileKey) => {\r\n            return (\r\n              <option key={profileKey} value={profileKey}>\r\n                {profileKey}\r\n              </option>\r\n            );\r\n          })}\r\n        </select>\r\n        <button\r\n          title=\"new profile\"\r\n          className=\"s\"\r\n          onClick={profiles.promptAddProfile}\r\n        >\r\n          +\r\n        </button>\r\n        <button\r\n          title=\"export profile\"\r\n          className=\"s\"\r\n          onClick={profiles.promptExportProfile}\r\n        >\r\n          ↗\r\n        </button>\r\n      </div>\r\n    </ProfilesWrapper>\r\n  );\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const DeckWrapper = styled(\"div\")({\r\n  padding: \"50px\",\r\n  paddingTop: \"30px\",\r\n  border: \"2px inset black\",\r\n  background: \"rgb(21 21 21)\",\r\n  borderRadius: \"20px\",\r\n  boxShadow:\r\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\r\n  position: \"relative\",\r\n});\r\n\r\nexport const DeckTitle = styled(\"h1\")({\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  fontSize: 20,\r\n  paddingBottom: 20,\r\n  paddingTop: 0,\r\n  margin: 0,\r\n  color: \"white\",\r\n  textTransform: \"uppercase\",\r\n});\r\n\r\nexport const DeckLayout = styled(\"div\")<{ $columns: number }>(\r\n  ({ $columns }) => ({\r\n    display: \"grid\",\r\n    gap: \"20px\",\r\n    gridTemplateColumns: `repeat(${$columns}, min-content)`,\r\n  })\r\n);\r\n\r\nexport const DeckButton = styled(\"button\")({\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  border: \"2px solid #888888\",\r\n  width: \"77px\",\r\n  height: \"77px\",\r\n  borderRadius: 10,\r\n  // testing\r\n  background: \"red\",\r\n  position: \"relative\",\r\n  padding: \"0\",\r\n  backgroundColor: \"rgb(37 37 37)\",\r\n  outline: \"4px solid black\",\r\n  boxShadow:\r\n    \"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)\",\r\n  transition: \".13s ease-in-out\",\r\n  cursor: \"pointer\",\r\n  // active\r\n  \"&:active:not(.editMode), &.active\": {\r\n    boxShadow: \"none\",\r\n    border: \"0px solid\",\r\n    backgroundColor: \"rgb(35 35 35)\",\r\n    \"& > div\": {\r\n      boxShadow: \"none\",\r\n      border: \"0px solid\",\r\n      \"& > *\": {\r\n        transition: \".13s ease-in-out\",\r\n        transform: \"translate3d(0px, 0px, 0px)\",\r\n      },\r\n    },\r\n  },\r\n  \"&.active\": {\r\n    //backgroundColor: \"rgb(255 0 0)\",\r\n  },\r\n  \"&.selected\": {\r\n    outline: \"2px dotted #ffffff9c\",\r\n    outlineOffset: \"5px\",\r\n  },\r\n});\r\n\r\nexport const DeckButtonContent = styled(\"div\")({\r\n  position: \"relative\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  boxShadow:\r\n    \"rgb(221, 221, 221) 0px 0px 0px inset, rgb(47 47 47) -2px -2px 0px\",\r\n  borderRadius: 10,\r\n  transition: \".13s ease-in-out\",\r\n  zIndex: 1,\r\n  \"& > *\": {\r\n    height: \"70%\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    transition: \".13s ease-in-out\",\r\n    transform: \"translate3d(0px, -4px, 0px)\",\r\n  },\r\n});\r\n","import { FC } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n  DeckButton,\r\n  DeckButtonContent,\r\n  DeckLayout,\r\n  DeckTitle,\r\n  DeckWrapper,\r\n} from \"./Deck.styles\";\r\nimport { useAppContext } from \"../../contexts/AppContext\";\r\n\r\nexport const Deck: FC = () => {\r\n  const { deck } = useAppContext();\r\n\r\n  return (\r\n    <DeckWrapper>\r\n      <DeckTitle>{deck.current?.PRODUCT_NAME}</DeckTitle>\r\n      <DeckLayout $columns={deck.current?.KEY_COLUMNS!}>\r\n        {Array.from({ length: deck.current?.NUM_KEYS! }).map((_, keyIndex) => (\r\n          <DeckButton\r\n            // $editMode={deck.editMode}\r\n            key={keyIndex}\r\n            onMouseDown={() => deck.onMouseDown(keyIndex)}\r\n            onMouseUp={() => deck.onMouseUp(keyIndex)}\r\n            onClick={() => {\r\n              if (deck.editMode) {\r\n                deck.setSelectedKey(keyIndex);\r\n              }\r\n            }}\r\n            className={classNames({\r\n              active: deck.pressedMap[keyIndex],\r\n              selected: deck.selectedKey === keyIndex,\r\n              editMode: deck.editMode,\r\n            })}\r\n          >\r\n            <DeckButtonContent>\r\n              <p>{keyIndex}</p>\r\n            </DeckButtonContent>\r\n          </DeckButton>\r\n        ))}\r\n      </DeckLayout>\r\n      <button\r\n        style={{\r\n          position: \"absolute\",\r\n          top: 0,\r\n          right: 0,\r\n          padding: \"20px 25px\",\r\n          background: \"none\",\r\n          border: \"none\",\r\n          color: \"gray\",\r\n          fontSize: \"16px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n        onClick={() => deck.disconect()}\r\n        title=\"Disconect device\"\r\n      >\r\n        <img src=\"disconect.svg\" alt=\"disconect device\" />\r\n      </button>\r\n      <button\r\n        style={{\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n          padding: \"20px 25px\",\r\n          background: \"none\",\r\n          border: \"none\",\r\n          color: \"gray\",\r\n          fontSize: \"12px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n        onClick={() => {\r\n          deck.setEditMode(!deck.editMode);\r\n          if (!deck.editMode === true) {\r\n            deck.setSelectedKey(0);\r\n          } else {\r\n            deck.setSelectedKey(undefined);\r\n          }\r\n        }}\r\n      >\r\n        Edit: {deck.editMode ? \"☑\" : \"☐\"}\r\n      </button>\r\n    </DeckWrapper>\r\n  );\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const SubSubTitle = styled(\"h3\")({\r\n  display: \"inline-block\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  fontSize: 14,\r\n  padding: 0,\r\n  margin: 0,\r\n  color: \"white\",\r\n});\r\n","import styled from \"styled-components\";\r\n\r\nexport const SubTitle = styled(\"h2\")({\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  fontSize: 16,\r\n  padding: 0,\r\n  margin: 0,\r\n  color: \"white\",\r\n  textTransform: \"uppercase\",\r\n});\r\n","import { createContext, useContext } from \"react\";\r\nimport { AppContainerType } from \"../bootstrap\";\r\n\r\nexport const AppContext = createContext({} as AppContainerType);\r\n\r\nexport const useAppContext = () => {\r\n  return useContext(AppContext);\r\n};\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport {\r\n  StreamDeckWeb,\r\n  getStreamDecks,\r\n  requestStreamDecks,\r\n} from \"@elgato-stream-deck/webhid\";\r\nimport {\r\n  VirtualDeck,\r\n  getVirtualDeck,\r\n  requestVirtualDecks,\r\n} from \"../utils/virtualDeck\";\r\nimport { usePlugins } from \"./usePlugins\";\r\nimport { useProfiles } from \"./useProfiles\";\r\n\r\nexport const useDeck = (\r\n  profiles: ReturnType<typeof useProfiles>,\r\n  plugins: ReturnType<typeof usePlugins>\r\n) => {\r\n  const [editMode, setEditMode] = useState(true);\r\n  const [selectedKey, setSelectedKey] = useState<number | undefined>(0);\r\n  const [virtualDeck, setVirtualDeck] = useState<VirtualDeck | null>();\r\n  const [streamDeck, setStreamDeck] = useState<StreamDeckWeb | null>();\r\n  const [pressedMap, setPressedMap] = useState<{ [key: number]: boolean }>({});\r\n\r\n  const onMouseDown = (keyIndex: number) => {\r\n    if (streamDeck) {\r\n      streamDeck!.fillKeyColor(keyIndex, 255, 0, 0);\r\n    } else {\r\n      console.log(\"pressed key\", keyIndex);\r\n    }\r\n  };\r\n\r\n  const onMouseUp = (keyIndex: number) => {\r\n    if (editMode) {\r\n      if (streamDeck) {\r\n        streamDeck!.fillKeyColor(keyIndex, 0, 0, 0);\r\n      } else {\r\n        console.log(\"pressed key\", keyIndex);\r\n      }\r\n    } else {\r\n      const key = profiles.profile.keys[keyIndex];\r\n      if (key?.plugin) {\r\n        const module = plugins.getModule(key.plugin);\r\n        try {\r\n          module?.onPress({ ...key, keyIndex });\r\n        } catch (e) {\r\n          console.warn(\r\n            `Webdeck: Failed to execute ${key.plugin}. Have you added and exported onPress() functions in you plugin?`,\r\n            e\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const execute = async () => {\r\n      const [_streamDeck] = await getStreamDecks();\r\n      if (_streamDeck) {\r\n        setStreamDeck(_streamDeck);\r\n        return;\r\n      } else {\r\n        const [_virtualdeck] = getVirtualDeck();\r\n        if (_virtualdeck) {\r\n          setVirtualDeck(_virtualdeck);\r\n        }\r\n      }\r\n    };\r\n    execute();\r\n  }, []);\r\n\r\n  const tryGetStreamDeck = useCallback(async () => {\r\n    const [_streamDeck] = await requestStreamDecks();\r\n    if (!_streamDeck) {\r\n      console.error(\"Couldn’t get a Stream Deck\");\r\n    } else {\r\n      setStreamDeck(_streamDeck);\r\n    }\r\n  }, []);\r\n\r\n  const tryCreateVirtualDeck = useCallback(() => {\r\n    const [_virtualdeck] = requestVirtualDecks();\r\n    if (!_virtualdeck) {\r\n      console.error(\"Couldn’t get a Virtual Deck\");\r\n    } else {\r\n      setVirtualDeck(_virtualdeck);\r\n    }\r\n    console.log(_virtualdeck);\r\n  }, []);\r\n\r\n  const disconect = useCallback(async () => {\r\n    if (streamDeck) {\r\n      //TODO: temporary solution, untill forget is added\r\n      //@ISSUE: https://github.com/Julusian/node-elgato-stream-deck/issues/79\r\n      const [deck] = await navigator.hid.getDevices();\r\n      try {\r\n        await deck.forget();\r\n        await deck.close();\r\n      } catch (e) {\r\n        /*suppress error */\r\n      }\r\n      setStreamDeck(null);\r\n    } else if (virtualDeck) {\r\n      virtualDeck.close();\r\n      setVirtualDeck(null);\r\n    }\r\n  }, [streamDeck, virtualDeck]);\r\n\r\n  useEffect(() => {\r\n    const _onPressDown = (keyIndex: number) => {\r\n      setPressedMap((old) => ({\r\n        ...old,\r\n        [keyIndex]: true,\r\n      }));\r\n    };\r\n\r\n    const _onPressUp = (keyIndex: number) => {\r\n      setPressedMap((old) => ({\r\n        ...old,\r\n        [keyIndex]: false,\r\n      }));\r\n\r\n      // callback from plugin\r\n      const key = profiles.profile.keys[keyIndex];\r\n      if (key?.plugin) {\r\n        const module = plugins.getModule(key.plugin);\r\n        try {\r\n          module?.onPress({ ...key, keyIndex });\r\n        } catch (e) {\r\n          console.warn(\r\n            `Webdeck: Failed to execute ${key.plugin}. Have you added and exported onPress() functions in you plugin?`,\r\n            e\r\n          );\r\n        }\r\n      }\r\n    };\r\n\r\n    if (streamDeck) {\r\n      streamDeck.on(\"down\", _onPressDown);\r\n      streamDeck.on(\"up\", _onPressUp);\r\n    }\r\n    return () => {\r\n      streamDeck?.off(\"down\", _onPressDown);\r\n      streamDeck?.off(\"up\", _onPressUp);\r\n    };\r\n  }, [streamDeck, profiles.profile.keys]);\r\n\r\n  const current = streamDeck || virtualDeck;\r\n\r\n  return {\r\n    current,\r\n    initalised: !!current,\r\n    onMouseDown,\r\n    onMouseUp,\r\n    selectedKey,\r\n    setSelectedKey,\r\n    disconect,\r\n\r\n    // virtual deck stuff\r\n    tryCreateVirtualDeck,\r\n    isVirtual: !!virtualDeck,\r\n\r\n    // steam deck stuff\r\n    tryGetStreamDeck,\r\n    pressedMap,\r\n\r\n    // preview mode\r\n    editMode,\r\n    setEditMode,\r\n  };\r\n};\r\n\r\n// const addEvents = (_streamDeck: StreamDeckWeb) => {\r\n//   _streamDeck.on(\"down\", (keyIndex) => {\r\n//     setPressedMap((old) => ({\r\n//       ...old,\r\n//       [keyIndex]: true,\r\n//     }));\r\n//   });\r\n//   _streamDeck.on(\"up\", (keyIndex) => {\r\n//     setPressedMap((old) => ({\r\n//       ...old,\r\n//       [keyIndex]: false,\r\n//     }));\r\n//     console.log(onPressMap);\r\n//     onPressMap[keyIndex]?.();\r\n//   });\r\n// };\r\n\r\n// useEffect(() => {}, []);\r\n","import { init, loadRemote } from \"@module-federation/runtime/.\";\r\nimport { FC, useEffect, useState } from \"react\";\r\nimport queryString from \"query-string\";\r\n\r\nexport type Plugin = {\r\n  name: string;\r\n  creator: string;\r\n  versions: string[];\r\n  url: string;\r\n};\r\n\r\nexport type RemotePromise = {\r\n  loaded: boolean;\r\n  url: string;\r\n  name: string;\r\n  e?: unknown;\r\n};\r\n\r\ntype ModuleOnPress = {\r\n  config: Record<string | number, unknown>;\r\n  keyIndex: number;\r\n};\r\n\r\nexport type Module = {\r\n  default: FC;\r\n  init: () => void;\r\n  onPress: (params: ModuleOnPress) => void;\r\n};\r\n\r\nconst PLUGIN_SCOPE = \"./Plugin\";\r\nconst URL_CATCHE = new Set<string>();\r\nconst STORAGE_KEY = \"plugins\";\r\nconst MODULE_CATCHE = new Map<string, Module>();\r\n\r\nconst getPlugins = () => {\r\n  const plugins = localStorage.getItem(STORAGE_KEY);\r\n  if (plugins) {\r\n    return [...JSON.parse(plugins)];\r\n  }\r\n  return [];\r\n};\r\n\r\nconst storePlugins = (plugins: Plugin[]) => {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(plugins));\r\n};\r\n\r\nexport const usePlugins = () => {\r\n  const [initalised, setInitalised] = useState(false);\r\n  const [plugins, setPlugins] = useState<Plugin[]>(getPlugins());\r\n\r\n  const addPlugin = (obj: Plugin) => {\r\n    setPlugins((old) => {\r\n      const next = [...old, obj];\r\n      storePlugins(next);\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const promptAddPlugin = async () => {\r\n    const input = prompt(\r\n      \"Add url to plugin. List of plugins: https://github.com/search?q=topic:webdeck-plugin\"\r\n    );\r\n    if (input) {\r\n      let name, homepage, creator;\r\n      try {\r\n        if (input.includes(\"github.com\")) {\r\n          // the provided a github.com link\r\n          const url = input.replace(\r\n            \"https://github.com/\",\r\n            \"https://api.github.com/repos/\"\r\n          );\r\n          const resp = await fetch(url);\r\n          const data = await resp.json();\r\n          if (data && data.has_pages) {\r\n            homepage = data.homepage;\r\n            [creator, name] = data.full_name.split(\"/\");\r\n            console.log({ homepage, name });\r\n            addPlugin({ name, creator, versions: [\"1.0.0\"], url: homepage });\r\n          } else {\r\n            throw new Error(\"\");\r\n          }\r\n        } else if (input.includes(\"remoteEntry.js\")) {\r\n          const [_url, query] = input.split(\"?\");\r\n          const { name, creator, v } = queryString.parse(query);\r\n          if (name) {\r\n            addPlugin({\r\n              name: name as string,\r\n              creator: creator as string,\r\n              versions: [v as string],\r\n              url: _url.replace(\"remoteEntry.js\", \"\"),\r\n            });\r\n          } else throw new Error(\"\");\r\n        } else {\r\n          console.log(\"input\", input);\r\n          // the provided some other link\r\n          throw new Error(\"\");\r\n        }\r\n      } catch (e) {\r\n        alert(\"Cound not add plugin, invalid url or repo provided.\");\r\n        console.error(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const promptRemovePlugin = (name: string, callback: () => void) => {\r\n    const resp = confirm(\r\n      \"Are you sure you want to remove this plugin and everywhere where it was used? This action is not reversable.\"\r\n    );\r\n    if (resp) {\r\n      setPlugins((_plugins) => {\r\n        const next = _plugins.filter((plugin) => plugin.name !== name);\r\n        storePlugins(next);\r\n        return next;\r\n      });\r\n      callback();\r\n    }\r\n  };\r\n\r\n  const loadScript = async (url: string, name: string) => {\r\n    return new Promise<RemotePromise>((resolve) => {\r\n      if (!url) resolve({ loaded: false, url, name });\r\n      if (URL_CATCHE.has(url)) {\r\n        resolve({ loaded: true, url, name });\r\n        return;\r\n      }\r\n      const element = document.createElement(\"script\");\r\n      element.src = url;\r\n      element.type = \"text/javascript\";\r\n      element.async = true;\r\n      element.onload = () => {\r\n        URL_CATCHE.add(url);\r\n        resolve({ loaded: true, url, name });\r\n      };\r\n      element.onerror = (e) => resolve({ loaded: false, url, name, e });\r\n\r\n      document.head.appendChild(element);\r\n    });\r\n  };\r\n\r\n  const loadModule = async (name: string) => {\r\n    let module;\r\n    const moduleKey = `${PLUGIN_SCOPE}-${name}`;\r\n    if (MODULE_CATCHE.has(moduleKey)) {\r\n      module = MODULE_CATCHE.get(moduleKey);\r\n      // console.log({ 1: true, module, name });\r\n    } else {\r\n      // console.log(\"begin loading\", name);\r\n      module = (await loadRemote(\r\n        `${name.replaceAll(\"-\", \"_\")}/${PLUGIN_SCOPE.slice(2)}`\r\n      )) as Module;\r\n      // console.log(\"loaded\", name);\r\n      MODULE_CATCHE.set(moduleKey, module);\r\n    }\r\n    return module;\r\n  };\r\n\r\n  const getModule = (name: string) => {\r\n    const moduleKey = `${PLUGIN_SCOPE}-${name}`;\r\n    return MODULE_CATCHE.get(moduleKey);\r\n  };\r\n\r\n  const getModules = () => {\r\n    return MODULE_CATCHE;\r\n  };\r\n\r\n  // initalise all plugins\r\n  useEffect(() => {\r\n    setInitalised(false);\r\n    // module federation config\r\n    const config = {\r\n      name: \"webdeck\",\r\n      remotes: plugins.map((plugin) => {\r\n        return {\r\n          name: plugin.name.replaceAll(\"-\", \"_\"),\r\n          entry: `${plugin.url}remoteEntry.js`,\r\n        };\r\n      }),\r\n    };\r\n\r\n    // configure all plugins\r\n    init(config);\r\n\r\n    // once plugin are configured, load them\r\n    const remotePromises: Promise<RemotePromise>[] = [];\r\n    config.remotes.forEach((remote) => {\r\n      remotePromises.push(loadScript(remote.entry, remote.name));\r\n    });\r\n\r\n    Promise.all(remotePromises).then((resolvedRemotePromises) => {\r\n      const remotesById = resolvedRemotePromises.reduce((prev, current) => {\r\n        if (!current.loaded) {\r\n          console.error(\r\n            `Webdeck: Could not load script \"${current.name}\" at ${current.url}`,\r\n            current.e\r\n          );\r\n        }\r\n        return {\r\n          ...prev,\r\n          [current.name]: current,\r\n        };\r\n      }, {} as { [key: string]: RemotePromise });\r\n\r\n      // load modules once script all loaded.\r\n      const modules: Promise<unknown>[] = [];\r\n      config.remotes.map((remote) => {\r\n        if (!remotesById?.[remote.name]) {\r\n          console.error(\r\n            `Webdeck: Cant initalise module \"${name}\" as script was not loaded succesfully!`\r\n          );\r\n          return module;\r\n        }\r\n        modules.push(loadModule(remote.name));\r\n      });\r\n\r\n      Promise.all(modules).then((resp) => {\r\n        console.log(\"!!! Modules Loaded\", resp);\r\n        console.log(\"MODULE_CATCHE\", getModules());\r\n        setInitalised(true);\r\n      });\r\n    });\r\n  }, [plugins]);\r\n\r\n  const pluginsById = plugins.reduce(\r\n    (prev, current) => ({ ...prev, [current.name]: current }),\r\n    {} as Record<string, Plugin>\r\n  );\r\n\r\n  return {\r\n    initalised,\r\n    plugins,\r\n    pluginsById,\r\n    loadScript,\r\n    setPlugins,\r\n    addPlugin,\r\n    promptAddPlugin,\r\n    promptRemovePlugin,\r\n    loadModule,\r\n    getModule,\r\n    getModules,\r\n  };\r\n};\r\n","import { useState } from \"react\";\r\n\r\nexport type Config = Record<string | number | symbol, unknown>;\r\n\r\ntype Profiles = {\r\n  [key: string]: Profile;\r\n};\r\n\r\nexport type Profile = {\r\n  keys: {\r\n    [key: string]: {\r\n      plugin: string;\r\n      config: Config;\r\n    };\r\n  };\r\n};\r\n\r\nconst STORAGE_KEY = \"profiles\";\r\n\r\nconst getProfiles = () => {\r\n  const plugins = localStorage.getItem(STORAGE_KEY);\r\n  if (plugins) {\r\n    return { ...JSON.parse(plugins) };\r\n  }\r\n  return { default: { keys: {} } };\r\n};\r\n\r\nconst storeProfiles = (profiles: Profiles) => {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(profiles));\r\n};\r\n\r\n// const getProfiles = () => {\r\n//   return { default: { keys: {} } };\r\n// };\r\n\r\nconst getProfileName = () => {\r\n  return \"default\";\r\n};\r\n\r\nexport const useProfiles = () => {\r\n  const [profiles, setProfiles] = useState<Profiles>(getProfiles());\r\n  const [profileName, setProfileName] = useState<string>(getProfileName);\r\n  const profile = profiles[profileName];\r\n\r\n  const updateProfile = (obj: Profile) => {\r\n    setProfiles((old) => {\r\n      const nextProfiles = {\r\n        ...old,\r\n        [profileName]: {\r\n          ...old[profileName],\r\n          ...obj,\r\n        },\r\n      };\r\n      storeProfiles(nextProfiles);\r\n      return nextProfiles;\r\n    });\r\n  };\r\n\r\n  const setPlugin = (name: string, keyIndex: number) => {\r\n    updateProfile({\r\n      keys: {\r\n        ...profile.keys,\r\n        [keyIndex]: {\r\n          plugin: name,\r\n          config: {}, //reset config for next\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  const removePlugin = (name: string) => {\r\n    updateProfile({\r\n      keys: {\r\n        ...Object.keys(profile.keys).reduce((prev, key) => {\r\n          const config = profile.keys[key];\r\n          const match = name === config.plugin;\r\n          return {\r\n            ...prev,\r\n            [key]: {\r\n              plugin: match ? \"\" : config.plugin,\r\n              config: match ? {} : config.config,\r\n            },\r\n          };\r\n        }, {}),\r\n      },\r\n    });\r\n  };\r\n\r\n  const addProfile = (name: string, obj: Profile = { keys: {} }) => {\r\n    setProfiles((old) => {\r\n      const nextProfiles = {\r\n        ...old,\r\n        [name]: obj,\r\n      };\r\n      storeProfiles(nextProfiles);\r\n      return nextProfiles;\r\n    });\r\n  };\r\n\r\n  const promptAddProfile = () => {\r\n    const _name = prompt(\r\n      \"What the name of the profile? Using names that already exists, will overwirte you old profile! You can use a pipe (`|`) after the name, to provide the config.\"\r\n    );\r\n    if (_name) {\r\n      const [name, config] = _name.split(\"|\");\r\n      let parseedConfig;\r\n      try {\r\n        const _p = JSON.parse(config);\r\n        if (_p) {\r\n          parseedConfig = _p;\r\n        }\r\n      } catch (e) {\r\n        console.log(\"invalid config provided\");\r\n      }\r\n      console.log({ name, config });\r\n      addProfile(name, parseedConfig);\r\n      setProfileName(name);\r\n    }\r\n  };\r\n\r\n  const promptExportProfile = () => {\r\n    prompt(\"Profile:\", `${profileName}|${JSON.stringify(profile)}`);\r\n  };\r\n\r\n  const setConfig = (key: number, config: Config) => {\r\n    const next = {\r\n      ...profile,\r\n      keys: {\r\n        ...profile.keys,\r\n        [key]: {\r\n          ...profile.keys[key],\r\n          config,\r\n        },\r\n      },\r\n    };\r\n    updateProfile(next);\r\n  };\r\n\r\n  return {\r\n    profiles,\r\n    profile,\r\n    profileName,\r\n\r\n    setProfileName,\r\n    setPlugin,\r\n    removePlugin,\r\n    updateProfile,\r\n    addProfile,\r\n    promptAddProfile,\r\n    promptExportProfile,\r\n    setConfig,\r\n  };\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export type VirtualDeck = {\r\n  PRODUCT_NAME: string;\r\n  NUM_KEYS: number;\r\n  KEY_COLUMNS: number;\r\n  KEY_ROWS: number;\r\n  close(): void;\r\n};\r\n\r\nconst STORAGE_KEY = \"virtualdeck\";\r\n\r\nconst close = () => {\r\n  localStorage.removeItem(STORAGE_KEY);\r\n};\r\n\r\nconst config: Record<string, VirtualDeck> = {\r\n  default: {\r\n    PRODUCT_NAME: \"VirtualDeck 2x3\",\r\n    NUM_KEYS: 6,\r\n    KEY_COLUMNS: 3,\r\n    KEY_ROWS: 2,\r\n    close,\r\n  },\r\n};\r\n\r\nexport const getVirtualDeck = (): VirtualDeck[] => {\r\n  const virtualdeck = localStorage.getItem(STORAGE_KEY);\r\n  if (virtualdeck) {\r\n    return [{ ...JSON.parse(virtualdeck), close }];\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const requestVirtualDecks = (\r\n  key: keyof typeof config = \"default\"\r\n): VirtualDeck[] => {\r\n  const virtualdeck = config[key];\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(virtualdeck));\r\n  return [config[key]];\r\n};\r\n"],"names":["Wrapper","textAlign","display","alignItems","justifyContent","height","width","Controller","$isOpen","marginLeft","padding","paddingTop","border","background","borderRadius","color","minHeight","maxHeight","overflow","boxShadow","Settings","window","Buffer","deck","useAppContext","current","Deck","undefined","selectedKey","Header","Profiles","SubSubTitle","Plugins","Plugin","Debugger","onClick","tryGetStreamDeck","tryCreateVirtualDeck","Container","profiles","useProfiles","plugins","usePlugins","useDeck","AppContext","value","initalised","root","document","getElementById","render","useState","open","setIsOpen","style","className","JSON","stringify","HeaderWrapper","styled","minWidth","paddingBottom","marginBottom","borderBottom","SubTitle","title","setSelectedKey","setPlugin","key","keyConfig","profile","keys","module","getModule","pluginsById","plugin","name","console","log","getModules","useEffect","lazy","Promise","resolve","outline","margin","position","Suspense","fallback","config","setConfig","selectedPlugin","id","onChange","e","target","map","creator","promptRemovePlugin","removePlugin","disabled","promptAddPlugin","ProfilesWrapper","profileName","setProfileName","Object","profileKey","promptAddProfile","promptExportProfile","DeckWrapper","DeckTitle","fontSize","textTransform","DeckLayout","$columns","gap","gridTemplateColumns","DeckButton","backgroundColor","transition","cursor","transform","outlineOffset","DeckButtonContent","zIndex","PRODUCT_NAME","KEY_COLUMNS","Array","from","length","NUM_KEYS","_","keyIndex","onMouseDown","onMouseUp","editMode","active","pressedMap","selected","top","right","disconect","src","alt","left","setEditMode","createContext","useContext","virtualDeck","setVirtualDeck","streamDeck","setStreamDeck","setPressedMap","execute","_streamDeck","_virtualdeck","getStreamDecks","getVirtualDeck","useCallback","requestStreamDecks","error","requestVirtualDecks","navigator","hid","getDevices","forget","close","_onPressDown","old","_onPressUp","onPress","warn","on","off","fillKeyColor","isVirtual","PLUGIN_SCOPE","URL_CATCHE","Set","STORAGE_KEY","MODULE_CATCHE","Map","getPlugins","localStorage","getItem","parse","storePlugins","setItem","setInitalised","setPlugins","addPlugin","obj","next","input","homepage","url","data","_url","query","v","prompt","includes","replace","fetch","resp","json","has_pages","full_name","split","versions","Error","alert","loadScript","loaded","has","element","createElement","type","async","onload","add","onerror","head","appendChild","loadModule","moduleKey","get","loadRemote","replaceAll","slice","set","remotes","entry","init","remotePromises","forEach","remote","push","all","then","resolvedRemotePromises","remotesById","reduce","prev","modules","callback","confirm","_plugins","filter","getProfiles","default","storeProfiles","getProfileName","setProfiles","updateProfile","nextProfiles","addProfile","match","_name","parseedConfig","_p","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","removeItem","KEY_ROWS","virtualdeck"],"mappings":"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"}