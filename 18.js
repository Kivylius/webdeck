(self.webpackChunkwebdeck=self.webpackChunkwebdeck||[]).push([["18"],{348:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r,o=n("7030");function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=e=>o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",className:"disconnect_svg__icon",viewBox:"0 0 1024 1024"},e),r||(r=o.createElement("path",{d:"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1M446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51zM260.3 209.4a8.03 8.03 0 0 0-11.3 0L209.4 249a8.03 8.03 0 0 0 0 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3z"})))},9937:function(e,t,n){"use strict";n.r(t),n.d(t,{Controller:function(){return i},Settings:function(){return l},Wrapper:function(){return o}});var r=n("1893"),o=(0,r.default)("div")(function(){return{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw"}}),i=(0,r.default)("div")({display:function(e){return e.$isOpen?"block":"none"},marginLeft:50,padding:"50px",paddingTop:"30px",border:"2px inset black",background:"rgb(21 21 21)",borderRadius:"20px",color:"white",maxHeight:"80vh",overflow:"auto",maxWidth:350,boxShadow:"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)"}),l=(0,r.default)("div")({color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"2px 0px"})},7059:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n("5893"),o=n("8764"),i=n("9937"),l=n("9540"),u=n("4089"),a=n("3468"),c=n("1418"),s=n("5854"),f=n("6720"),d=n("5701"),p=n("4540"),y=n("4184"),v=n.n(y);window.Buffer=o.Buffer;var b=function(){var e,t=(0,f.useAppContext)(),n=t.deck,o=t.profiles;return(0,r.jsx)("div",{className:v()({wrapper:!0,hasDeck:!!n.current}),style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:(0,r.jsx)(i.Wrapper,{children:n.current?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Deck,{}),(0,r.jsxs)(i.Controller,{$isOpen:void 0!==n.selectedKey&&n.editMode,children:[(0,r.jsx)(c.Header,{}),(0,r.jsx)(a.Profiles,{}),void 0!==n.selectedKey&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.Settings,{children:[(0,r.jsx)(u.SubSubTitle,{children:"Currently selected key"}),(0,r.jsx)("button",{className:"s",disabled:!0,children:n.selectedKey})]}),(0,r.jsxs)(i.Settings,{children:[(0,r.jsx)(u.SubSubTitle,{children:"Subtitle"}),(0,r.jsx)("input",{value:(null===(e=o.profile.keys[n.selectedKey])||void 0===e?void 0:e.title)||"",onChange:function(e){return o.setTitle(n.selectedKey,e.target.value)},placeholder:"key subtitle"})]}),(0,r.jsxs)(i.Settings,{children:[(0,r.jsx)(u.SubSubTitle,{children:"Plugin"}),(0,r.jsx)(d.Plugins,{})]}),(0,r.jsx)(i.Settings,{children:(0,r.jsx)(p.Plugin,{})})]}),(0,r.jsx)("small",{style:{opacity:.5},children:"All changes are saved automaticly."}),window.location.search.includes("debug")&&(0,r.jsx)(s.Debugger,{})]})]}):(0,r.jsxs)("div",{style:{color:"white"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"WEB DECK"}),(0,r.jsx)("p",{children:"Connect your usb device or create a virtual device."}),(0,r.jsx)("br",{})]}),(0,r.jsx)("button",{onClick:n.tryGetPhysicalDeck,children:"Connect"}),(0,r.jsx)("small",{children:" -or- "}),(0,r.jsx)("button",{onClick:n.tryCreateVirtualDeck,children:"Create Virtual Device"})]})})})}},8612:function(e,t,n){"use strict";n.r(t),n.d(t,{Container:function(){return d}});var r=n("5893");n("7030");var o=n("745"),i=n("7059"),l=n("407"),u=n("5589"),a=n("6720"),c=n("3896"),s=n("2632"),f=n("3522"),d=function(){var e=(0,s.useProfiles)(),t=(0,c.usePlugins)(),n=(0,f.useDeck)(e,t);return(0,r.jsxs)(a.AppContext.Provider,{value:{deck:n,profiles:e,plugins:t},children:[window.location.search.includes("debug")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:["version: ",u.version]}),(0,r.jsx)("div",{children:!t.initalised&&(0,r.jsx)(r.Fragment,{children:"initialising plugins..."})}),(0,r.jsx)("img",{id:"prev",src:"",style:{margin:10,border:"1px solid red"}})]}),(0,r.jsx)(i.default,{})]})};o.createRoot(document.getElementById("root")).render((0,r.jsx)(d,{})),(0,l.default)()},5854:function(e,t,n){"use strict";n.r(t),n.d(t,{Debugger:function(){return a}});var r=n("5893"),o=n("7030"),i=n("4089"),l=n("6720");function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=function(){var e,t,n=(0,l.useAppContext)(),a=n.profiles,c=n.plugins;var s=(e=(0,o.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,u=!1;try{for(o=o.call(e);!(l=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{!l&&null!=o.return&&o.return()}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1];return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",alignItems:"center",padding:"0 0 8px 0"},children:[(0,r.jsx)(i.SubSubTitle,{children:"debugging"}),(0,r.jsx)("button",{className:"s",onClick:function(){return d(!f)},children:f?" close":"open"})]}),(0,r.jsxs)("div",{style:{display:f?"block":"none",textAlign:"left"},children:[(0,r.jsx)("span",{children:"Profiles:"}),(0,r.jsx)("pre",{style:{width:350,textAlign:"left",background:"black"},children:JSON.stringify(a.profiles,null,4)}),(0,r.jsx)("span",{children:"Plugins:"}),(0,r.jsx)("pre",{style:{width:350,textAlign:"left",background:"black"},children:JSON.stringify(c.plugins,null,4)}),(0,r.jsx)("span",{children:"Manifest:"}),(0,r.jsx)("pre",{style:{width:350,textAlign:"left",background:"black"},children:JSON.stringify(c.manifests,null,4)})]})]})}},4700:function(e,t,n){"use strict";n.r(t),n.d(t,{HeaderWrapper:function(){return r}});var r=(0,n("1893").styled)("div")({display:"flex",justifyContent:"space-between",alignItems:"center",minWidth:350,paddingBottom:"8px",marginBottom:"10px",borderBottom:"1px solid #474747"})},1418:function(e,t,n){"use strict";n.r(t),n.d(t,{Header:function(){return u}});var r=n("5893"),o=n("4700"),i=n("501"),l=n("6720"),u=function(){var e=(0,l.useAppContext)().deck;return(0,r.jsxs)(o.HeaderWrapper,{children:[(0,r.jsx)(i.SubTitle,{children:"Settings"}),(0,r.jsx)("button",{title:"close",className:"s",onClick:function(){e.setSelectedKey(void 0),e.isVirtual&&e.setEditMode(!1)},children:"\xd7"})]})}},4540:function(e,t,n){"use strict";n.r(t),n.d(t,{Plugin:function(){return u}});var r=n("5893"),o=n("7030"),i=n("6720");function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=function(){var e,t,n=(0,i.useAppContext)(),u=n.plugins,a=n.profiles,c=n.deck;var s=(e=(0,o.useState)(null),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,u=!1;try{for(o=o.call(e);!(l=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{!l&&null!=o.return&&o.return()}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1],p=c.selectedKey,y=a.profile.keys[p],v=u.modules[null==y?void 0:y.plugin],b=null==v?void 0:v.loaded;return(0,o.useEffect)(function(){(null==v?void 0:v.module)?d((0,o.lazy)(function(){return Promise.resolve(v.module)})):d(null)},[v]),(0,r.jsx)("div",{style:{width:"100%",maxHeight:"400px",minHeight:"100px",outline:"none",margin:"8px 0",border:"2px solid black",position:"relative",textAlign:"left",borderRadius:10,overflow:"hidden"},children:(0,r.jsx)(o.Suspense,{fallback:"Loading System",children:f&&(null==y?void 0:y.config)&&v?(0,r.jsx)(f,{config:y.config,setConfig:function(e){a.setConfig(p,e)}},y.plugin+p):!1===b?(0,r.jsxs)("div",{style:{display:"flex",textAlign:"center",width:"100%",justifyContent:"center",alignItems:"center",height:"100px",color:"#cb0000",background:"#f7a5a5"},children:["Failed to load ",null==y?void 0:y.plugin," plugin!"]}):(0,r.jsx)("div",{})})})}},5701:function(e,t,n){"use strict";n.r(t),n.d(t,{Plugins:function(){return i}});var r=n("5893"),o=n("6720"),i=function(){var e,t=(0,o.useAppContext)(),n=t.profiles,i=t.deck,l=t.plugins,u=null===(e=n.profile.keys[i.selectedKey])||void 0===e?void 0:e.plugin;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("select",{name:"plugins",id:"plugins",title:"select plugin",value:u||"",onChange:function(e){n.setPlugin(e.target.value,i.selectedKey)},children:[(0,r.jsx)("option",{value:"",children:"select..."}),l.plugins.map(function(e){return(0,r.jsxs)("option",{value:e.enum||e.name,children:[e.name," ",e.creator&&"@".concat(e.creator)]},e.name)})]}),(0,r.jsx)("button",{title:"remove plugin",className:"s",onClick:function(){return l.promptRemovePlugin(u,function(){n.removePlugin(u)})},disabled:!u,children:"-"}),(0,r.jsx)("button",{title:"add plugin",className:"s",onClick:l.promptAddPlugin,children:"+"})]})}},9753:function(e,t,n){"use strict";n.r(t),n.d(t,{ProfilesWrapper:function(){return r}});var r=(0,n("1893").default)("div")({color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"8px",marginBottom:"5px",borderBottom:"1px solid #474747"})},3468:function(e,t,n){"use strict";n.r(t),n.d(t,{Profiles:function(){return u}});var r=n("5893"),o=n("501"),i=n("9753"),l=n("6720"),u=function(){var e=(0,l.useAppContext)().profiles;return(0,r.jsxs)(i.ProfilesWrapper,{children:[(0,r.jsx)(o.SubTitle,{children:"Profiles"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("select",{name:"profile",id:"profile",title:"select profile",value:e.profileName,onChange:function(t){return e.setProfileName(t.target.value)},children:Object.keys(e.profiles).map(function(e){return(0,r.jsx)("option",{value:e,children:e},e)})}),(0,r.jsx)("button",{disabled:"default"===e.profileName,title:"remove profile",className:"s",onClick:e.promptRemoveProfile,children:"-"}),(0,r.jsx)("button",{title:"new profile",className:"s",onClick:e.promptAddProfile,children:"+"}),(0,r.jsx)("button",{title:"export profile",className:"s",onClick:e.promptExportProfile,children:"↗"})]})]})}},56:function(e,t,n){"use strict";n.r(t),n.d(t,{DeckButton:function(){return a},DeckButtonContent:function(){return s},DeckLayout:function(){return u},DeckTitle:function(){return l},DeckWrapper:function(){return i},DisconnectButton:function(){return c}});var r=n("1893"),o=n("348"),i=(0,r.default)("div")({padding:"50px",paddingTop:"30px",border:"2px inset black",background:"rgb(21 21 21)",borderRadius:"20px",boxShadow:"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)",position:"relative"}),l=(0,r.default)("h1")({display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,paddingBottom:20,paddingTop:0,margin:0,color:"white",textTransform:"uppercase"}),u=(0,r.default)("div")(function(e){var t=e.$columns;return{display:"grid",gap:"20px",gridTemplateColumns:"repeat(".concat(t,", min-content)")}}),a=(0,r.default)("button")({display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #888888",width:"77px",height:"77px",borderRadius:10,background:"red",position:"relative",padding:"0",backgroundColor:"rgb(37 37 37)",outline:"4px solid black",boxShadow:"-6px -20px 20px rgba(0,0,0,0.2), -6px -10px 15px rgba(0,0,0,0.2), -20px 0px 20px rgba(0,0,0,0.2), 6px 20px 20px rgba(0,0,0,0.2)",transition:".13s ease-in-out",cursor:"pointer","&:active:not(.editMode), &.active":{boxShadow:"none",border:"0px solid",backgroundColor:"rgb(35 35 35)","& > div":{boxShadow:"none",border:"0px solid","& > *":{transition:".13s ease-in-out",transform:"scale(0.9)"}}},"&.active":{},"&.selected":{outline:"2px dotted #ffffff",outlineOffset:"8px"},color:"white"}),c=(0,r.default)(o.default)({marginLeft:16,marginTop:3,height:18,width:18,fill:"white",opacity:.5,cursor:"pointer",transition:"all 300ms","&:hover":{opacity:1,fill:"red"}}),s=(0,r.default)("div")({position:"relative",width:"100%",height:"100%",boxShadow:"rgb(221, 221, 221) 0px 0px 0px inset, rgb(47 47 47) -2px -2px 0px",borderRadius:10,transition:".13s ease-in-out",zIndex:1,overflow:"hidden","& > *":{transition:".13s ease-in-out",transform:"scale(1)"}})},9540:function(e,t,n){"use strict";n.r(t),n.d(t,{Deck:function(){return f}});var r=n("5893"),o=n("4184"),i=n.n(o),l=n("56"),u=n("6720"),a=n("4755"),c=n("6020"),s=n("7991"),f=function(){var e,t,n,o=(0,u.useAppContext)().deck,f=(0,c.useDrawKey)().getContext;return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(l.DeckWrapper,{children:[(0,r.jsxs)(l.DeckTitle,{children:[null===(e=o.current)||void 0===e?void 0:e.PRODUCT_NAME," ",(0,r.jsx)("span",{title:"Disconect device",children:(0,r.jsx)(l.DisconnectButton,{onClick:function(){return o.disconect()}})})]}),(0,r.jsx)(l.DeckLayout,{$columns:(null===(t=o.current)||void 0===t?void 0:t.KEY_COLUMNS)||0,children:Array.from({length:(null===(n=o.current)||void 0===n?void 0:n.NUM_KEYS)||0}).map(function(e,t){return(0,r.jsx)(l.DeckButton,{onMouseDown:function(){o.isVirtual&&!o.editMode&&o.onMouseDown(t)},onMouseUp:function(){o.isVirtual&&!o.editMode&&o.onMouseUp(t)},onClick:function(){o.editMode&&o.setSelectedKey(t)},className:i()({selected:o.editMode&&o.selectedKey===t,editMode:o.editMode}),children:(0,r.jsx)(l.DeckButtonContent,{children:(0,r.jsx)(s.DeckButtonView,{getContext:f,keyIndex:t})})},t)})})]}),(0,r.jsx)(a.DeckFooterText,{})]})}},7991:function(e,t,n){"use strict";n.r(t),n.d(t,{DeckButtonView:function(){return l}});var r=n("5893"),o=n("7030"),i=n("6720"),l=function(e){var t,n=e.getContext,l=e.keyIndex,u=(0,i.useAppContext)(),a=u.deck,c=u.plugins,s=u.profiles,f=n(l),d=s.profile.keys[l],p=null===(t=c.manifests[null==d?void 0:d.plugin])||void 0===t?void 0:t.bespoke;return(0,o.useEffect)(function(){if(a.isPhysical&&!p){var e;null===(e=a.physicalDeck)||void 0===e||e.fillKeyBuffer(l,Buffer.from(f.getData().data),{format:"rgba"})}},[a.isPhysical,null==d?void 0:d.title,null==d?void 0:d.icon,null==d?void 0:d.plugin,null==d?void 0:d.loading]),(0,r.jsx)("img",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r,o,i;r=e,o=t,i=n[t],o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})}return e}({id:"keyid-".concat(l)},p?{}:{src:f.getSrc()}))}},4755:function(e,t,n){"use strict";n.r(t),n.d(t,{DeckFooterText:function(){return i}});var r=n("5893"),o=n("6720"),i=function(){var e=(0,o.useAppContext)().deck;return e.isVirtual?(0,r.jsxs)("small",{style:{color:"white",paddingTop:20,opacity:.2,fontSize:12},children:["You are currently in ",e.editMode?"Edit Mode":"Preview Mode",". Switch to"," ",(0,r.jsx)("a",{className:"a",href:"#",onClick:function(t){t.preventDefault(),e.setEditMode(!e.editMode),!e.editMode&&!e.selectedKey&&e.setSelectedKey(0)},children:e.editMode?"Preview Mode":"Edit Mode"})," ","to ",e.editMode?"test":"edit"," it."]}):null}},4089:function(e,t,n){"use strict";n.r(t),n.d(t,{SubSubTitle:function(){return r}});var r=(0,n("1893").default)("h3")({display:"inline-block",alignItems:"center",justifyContent:"center",fontSize:14,padding:0,margin:0,color:"white"})},501:function(e,t,n){"use strict";n.r(t),n.d(t,{SubTitle:function(){return r}});var r=(0,n("1893").default)("h2")({display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,padding:0,margin:0,color:"white",textTransform:"uppercase"})},6720:function(e,t,n){"use strict";n.r(t),n.d(t,{AppContext:function(){return o},useAppContext:function(){return i}});var r=n("7030"),o=(0,r.createContext)({}),i=function(){return(0,r.useContext)(o)}},3522:function(e,t,n){"use strict";n.r(t),n.d(t,{useDeck:function(){return d}});var r=n("7030"),o=n("4778"),i=n("538"),l=n("6020");function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(e){n(e);return}u.done?t(a):Promise.resolve(a).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){a(i,r,o,l,u,"next",e)}function u(e){a(i,r,o,l,u,"throw",e)}l(void 0)})}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,u=!1;try{for(o=o.call(e);!(l=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{!l&&null!=o.return&&o.return()}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var d=function(e,t){var n=s((0,r.useState)(!0),2),u=n[0],a=n[1],d=s((0,r.useState)(0),2),p=d[0],y=d[1],v=s((0,r.useState)(),2),b=v[0],h=v[1],g=s((0,r.useState)(),2),m=g[0],x=g[1],w=s((0,r.useState)({}),2),j=w[0],S=w[1],k=(0,l.useDrawKey)().getContext,O=m||b,P=function(e){console.log("pressed key",e)},C=function(n){var r=e.profile.keys[n];if(null==r?void 0:r.plugin){var o,i,l,u=null===(l=t.modules[r.plugin])||void 0===l?void 0:l.module;try{;u.onPress((o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r,o,i;r=e,o=t,i=n[t],o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})}return e}({},r),i={keyIndex:n,setIcon:function(t){return e.setIcon(n,t)}},i=null!=i?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o))}catch(e){console.warn("Webdeck: Failed to execute ".concat(r.plugin,". Have you added and exported onPress() functions in you plugin?"),e)}}},A=function(e,t){var n,r=document.createElement("canvas");r.width=(null==O?void 0:O.ICON_SIZE)||72,r.height=(null==O?void 0:O.ICON_SIZE)||72;var o=r.getContext("2d");if(o.save(),o.clearRect(0,0,r.width,r.height),t({canvas:r,ctx:o}),m){var i=o.getImageData(0,0,r.width,r.height,{colorSpace:"srgb"}).data;null==m||m.fillKeyBuffer(e,Buffer.from(i),{format:"rgba"})}null===(n=document.getElementById("keyid-".concat(e)))||void 0===n||n.setAttribute("src",r.toDataURL())},D=(0,r.useCallback)(c(function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,(0,i.requestPhysicalDeck)()];case 1:return(e=s.apply(void 0,[t.sent(),1])[0])?x(e):console.error("Couldn't get a Physical Deck"),[2]}})}),[]),E=(0,r.useCallback)(function(){var e=s((0,o.requestVirtualDecks)(),1)[0];e?h(e):console.error("Couldn't get a Virtual Deck")},[]),I=(0,r.useCallback)(c(function(){return f(this,function(e){return m?(m.close(),x(void 0)):b&&(b.close(),h(void 0)),[2]})}),[m,b]);return(0,r.useEffect)(function(){var e;(e=c(function(){var e,t;return f(this,function(n){switch(n.label){case 0:return[4,(0,i.getPhysicalDeck)()];case 1:return(e=s.apply(void 0,[n.sent(),1])[0])?x(e):(t=s((0,o.getVirtualDeck)(),1)[0])&&h(t),[2]}})}),function(){return e.apply(this,arguments)})()},[]),(0,r.useEffect)(function(){return m&&(m.on("down",P),m.on("up",C),null==m||m.drawKeys(function(n){var r,o;if((null===(r=t.manifests[null===(o=e.profile.keys[n])||void 0===o?void 0:o.plugin])||void 0===r?void 0:r.bespoke)===!0)console.log("bespoke");else{var i=k(n,m,e,t).getData();null==m||m.fillKeyBuffer(n,Buffer.from(i.data),{format:"rgba"})}})),function(){null==m||m.off("down",P),null==m||m.off("up",C)}},[t.initalised,t,e]),(0,r.useEffect)(function(){if(t.initalised){var n={};Object.keys(e.profile.keys).map(function(r){var o,i,l,u,a,c=e.profile.keys[r],s=j[r],f=function(){return console.log("@destructor",c,r)},d=null===(i=t.modules)||void 0===i?void 0:null===(o=i[null==c?void 0:c.plugin])||void 0===o?void 0:o.module,p={drawKey:function(e){return A(parseInt(r),e)},config:null==c?void 0:c.config};s?s.plugin===(null==c?void 0:c.plugin)?n[r]=s:(null===(l=s.destructor)||void 0===l||l.call(s),c&&(n[r]={plugin:c.plugin,destructor:(null==d?void 0:null===(u=d.init)||void 0===u?void 0:u.call(d,p))||f})):c&&(n[r]={plugin:c.plugin,destructor:(null==d?void 0:null===(a=d.init)||void 0===a?void 0:a.call(d,p))||f})}),console.log({nextInited:n}),S(n)}},[t.initalised,e.profile.keys]),{isVirtual:!!b,isPhysical:!!m,initalised:!!O,physicalDeck:m,virtualDeck:b,current:O,selectedKey:p,editMode:u,inited:j,onMouseDown:P,onMouseUp:C,setSelectedKey:y,disconect:I,tryGetPhysicalDeck:D,tryCreateVirtualDeck:E,setEditMode:a}}},6020:function(e,t,n){"use strict";n.r(t),n.d(t,{useDrawKey:function(){return i}});var r=n("8546"),o=n("6720"),i=function(){var e=(0,o.useAppContext)(),t=e.deck,n=e.profiles,i=e.plugins;return{getContext:function(e){var o,l,u,a,c,s,f,d,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.current,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,b=y.profile.keys[e],h=null===(o=y.profile.keys[e])||void 0===o?void 0:o.plugin,g=(null===(c=v.manifests[h])||void 0===c?void 0:null===(a=c.icons)||void 0===a?void 0:null===(l=a[null===(u=y.profile.keys[e])||void 0===u?void 0:u.icon])||void 0===l?void 0:l.icon)||(null===(d=v.manifests[h])||void 0===d?void 0:null===(f=d.icons)||void 0===f?void 0:null===(s=f.default)||void 0===s?void 0:s.icon),m=(null==p?void 0:p.ICON_SIZE)||72,x=(null==p?void 0:p.ICON_SIZE)||72,w=null==i?void 0:i.modules[h],j=(0,r.getKeyImage)({width:m,height:x,key:e,config:b,icon:g,module:w});return{getSrc:function(){return j.canvas.toDataURL()},getData:function(){return j.ctx.getImageData(0,0,m,x,{colorSpace:"srgb"})},context:j}}}}},3896:function(e,t,n){"use strict";n.r(t),n.d(t,{usePlugins:function(){return v}});var r=n("7030"),o=n("3079"),i=n("7599"),l=n("8556");function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(e){n(e);return}u.done?t(a):Promise.resolve(a).then(r,o)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,u=!1;try{for(o=o.call(e);!(l=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{!l&&null!=o.return&&o.return()}finally{if(u)throw r}}return i}}(e,t)||p(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}var y=new Map,v=function(){var e,t,n=d((0,i.useStorage)("plugins"),2),v=n[0],b=n[1],h=d((0,i.useStorage)("manifest",{}),2),g=h[0],m=h[1],x=d((0,r.useState)(!1),2),w=x[0],j=x[1],S=d((0,r.useState)({}),2),k=S[0],O=S[1],P=v.reduce(function(e,t){return f(s({},e),c({},t.name,t))},{}),C=function(e){var t;b(((function(e){if(Array.isArray(e))return u(e)})(t=v)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||p(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([e]))};var A=(t=(e=function(){var e,t;return function(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(n){switch(n.label){case 0:if(!(e=prompt("Add url to plugin. List of plugins: https://github.com/search?q=topic:webdeck-plugin")))return[3,2];return[4,(0,l.fetchPlugin)(e)];case 1:(t=n.sent())&&C(t),n.label=2;case 2:return[2]}})},function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){a(i,r,o,l,u,"next",e)}function u(e){a(i,r,o,l,u,"throw",e)}l(void 0)})}),function(){return t.apply(this,arguments)});return(0,r.useEffect)(function(){console.log("non changed right?"),j(!1);var e={name:"webdeck",remotes:v.map(function(e){return{name:e.enum,entry:"".concat(e.url,"remoteEntry.js")}})};(0,o.initalise)(e,"./Plugin",y).then(function(e){O(e),j(!0),m(Object.keys(e).reduce(function(t,n){var r,o;return f(s({},t),c({},n,(null===(o=e[n])||void 0===o?void 0:null===(r=o.module)||void 0===r?void 0:r.manifest)||{}))},{}))})},[v]),{initalised:w,plugins:v,pluginsById:P,modules:k,manifests:g,setPlugins:b,addPlugin:C,promptAddPlugin:A,promptRemovePlugin:function(e,t){confirm("Are you sure you want to remove this plugin and everywhere where it was used? This action is not reversable.")&&(b(v.filter(function(t){return t.enum!==e})),t())}}}},2632:function(e,t,n){"use strict";n.r(t),n.d(t,{useProfiles:function(){return v}});var r=n("7030");function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,u=!1;try{for(o=o.call(e);!(l=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{!l&&null!=o.return&&o.return()}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}function s(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var f="profiles",d=function(){var e=localStorage.getItem(f);return e?l({},JSON.parse(e)):{default:{keys:{}}}},p=function(e){localStorage.setItem(f,JSON.stringify(e))},y=function(){return"default"},v=function(){var e=a((0,r.useState)(d()),2),t=e[0],n=e[1],o=a((0,r.useState)(y),2),s=o[0],f=o[1],v=t[s],b=function(e){n(function(t){var n=u(l({},t),i({},s,l({},t[s],e)));return p(n),n})},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:{}};n(function(n){var r=u(l({},n),i({},e,t));return p(r),r})};return{profiles:t,profile:v,profileName:s,setProfileName:f,setPlugin:function(e,t){var n,r=null===(n=v.keys[t])||void 0===n?void 0:n.config;if(r&&Object.values(r).length>0&&!1===confirm("You have previus configured a plugin in this slot, this action will replace and remove that config. This action is not reversable. Are you sure?"))return!1;b({keys:u(l({},v.keys),i({},t,e?{plugin:e,config:{},icon:"",title:"",loading:!1}:void 0))})},removePlugin:function(e){b({keys:l({},Object.keys(v.keys).reduce(function(t,n){var r=v.keys[n],o=e===r.plugin;return u(l({},t),i({},n,o?void 0:r))},{}))})},updateProfile:b,addProfile:h,promptAddProfile:function(){var e=prompt("What the name of the profile? Using names that already exists, will overwirte you old profile! You can use a pipe (`|`) after the name, to provide the config.");if(e){var t,n=a(e.split("|"),2),r=n[0],o=n[1];try{var i=JSON.parse(o);i&&(t=i)}catch(e){console.log("invalid config provided")}console.log({name:r,config:o}),h(r,t),f(r)}},promptRemoveProfile:function(){confirm("Are you sure you want to delete this profile? These changes are inreversable.")&&n(function(e){e[s];var t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){if(n=i[r],!(t.indexOf(n)>=0))Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}(e,[s].map(c));return f("default"),l({},t)})},promptExportProfile:function(){prompt("Profile:","".concat(s,"|").concat(JSON.stringify(v)))},setConfig:function(e,t){b(u(l({},v),{keys:u(l({},v.keys),i({},e,u(l({},v.keys[e]),{config:t})))}))},setIcon:function(e,t){b(u(l({},v),{keys:u(l({},v.keys),i({},e,u(l({},v.keys[e]),{icon:t})))}))},setTitle:function(e,t){b(u(l({},v),{keys:u(l({},v.keys),i({},e,u(l({},v.keys[e]),{title:t})))}))},setLoading:function(e,t){b(u(l({},v),{keys:u(l({},v.keys),i({},e,u(l({},v.keys[e]),{loading:t})))}))}}}},7599:function(e,t,n){"use strict";n.r(t),n.d(t,{useStorage:function(){return l}});var r=n("7030");function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}var l=function(e){var t,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var u=(t=(0,r.useState)(function(){var t,n=localStorage.getItem(e);if(n){if(void 0!==l.length){;return function(e){if(Array.isArray(e))return o(e)}(t=JSON.parse(n))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||i(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r,o,i;r=e,o=t,i=n[t],o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})}return e}({},JSON.parse(n))}return l}()),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,u=!1;try{for(o=o.call(e);!(l=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{!l&&null!=o.return&&o.return()}finally{if(u)throw r}}return i}}(t,n)||i(t,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],c=u[1];return[a,function(t){return c(t),localStorage.setItem(e,JSON.stringify(t)),t}]}},407:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(e){var t,r;if(e&&(t=e,null!=(r=Function)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](t):t instanceof r))n.el("407@309:329").then(n.bind(n,"2131")).then(function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,l=t.getTTFB;n(e),r(e),o(e),i(e),l(e)})}},8556:function(e,t,n){"use strict";n.r(t),n.d(t,{fetchPlugin:function(){return s}});var r,o=n("2869");function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(e){n(e);return}u.done?t(a):Promise.resolve(a).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){l(i,r,o,u,a,"next",e)}function a(e){l(i,r,o,u,a,"throw",e)}u(void 0)})}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,u=!1;try{for(o=o.call(e);!(l=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{!l&&null!=o.return&&o.return()}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var s=(r=u(function(e){return c(this,function(t){var n;return[2,new Promise((n=u(function(t){var n,r,i,l,u,s,f,d,p,y,v,b,h,g;return c(this,function(c){switch(c.label){case 0:if(c.trys.push([0,5,,6]),!e.includes("github.com"))return[3,3];return n=e.replace("https://github.com/","https://api.github.com/repos/"),[4,fetch(n)];case 1:return[4,c.sent().json()];case 2:if((r=c.sent())&&r.has_pages)i=r.homepage,u=(l=a(r.full_name.split("/"),2))[0],t({name:s=l[1],enum:s.replaceAll("-","_"),creator:u,versions:["1.0.0"],url:i});else throw Error("");return[3,4];case 3:if(e.includes("remoteEntry.js")){if(d=(f=a(e.split("?"),2))[0],p=f[1],v=(y=o.default.parse(p)).name,b=y.creator,h=y.v,v)t({name:v,enum:null==v?void 0:v.replaceAll("-","_"),creator:b,versions:[h],url:d.replace("remoteEntry.js","")});else throw Error("")}else throw Error("");c.label=4;case 4:return[3,6];case 5:return g=c.sent(),alert("Cound not add plugin, invalid url or repo provided."),console.error(g),t(null),[3,6];case 6:return[2]}})}),function(e){return n.apply(this,arguments)}))]})}),function(e){return r.apply(this,arguments)})},8546:function(e,t,n){"use strict";n.r(t),n.d(t,{getKeyImage:function(){return r}});var r=function(e){var t=e.width,n=e.height,r=e.config,o=e.icon,i=e.module,l=document.createElement("canvas");l.width=t,l.height=n;var u=l.getContext("2d");if(u.save(),u.clearRect(0,0,l.width,l.height),r){u.beginPath(),u.lineWidth=2,(null==i?void 0:i.loaded)?u.strokeStyle=u.fillStyle="#04df04":(null==i?void 0:i.loaded)===!1?u.strokeStyle=u.fillStyle="#FF0000":u.strokeStyle=u.fillStyle="gray",u.arc(6,6,1,0,2*Math.PI),u.stroke(),u.fill(),u.closePath(),u.save(),u.restore(),u.textRendering="geometricPrecision",u.letterSpacing="1px";u.font="".concat(10,'px "Arial"'),u.fillStyle="white",u.textAlign="center";var a=l.width/2;if(u.fillText(r.title,a,l.height-8,l.width),u.save(),u.restore(),o){var c=r.title?8:0,s=r.title?1.5:2,f=24*s,d=24*s;u.strokeStyle="#FFF",u.fillStyle="#FFF";var p=new Path2D(o);u.translate(a-f/2,a-d/2-c),u.scale(s,s),u.stroke(p),u.fill(p),u.save(),u.restore()}else{u.textRendering="geometricPrecision",u.letterSpacing="1px";u.font="".concat(14,'px "Arial"'),u.fontKerning="none",u.fillStyle="white",u.textAlign="center";var y=l.width/2;u.fillText(r.plugin,y,l.height-32,l.width)}}return{ctx:u,canvas:l}}},3079:function(e,t,n){"use strict";n.r(t),n.d(t,{initalise:function(){return d}});var r,o,i=n("4620"),l=n("6962"),u=n("1435");function a(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(e){n(e);return}u.done?t(a):Promise.resolve(a).then(r,o)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var d=(o=(r=function(e,t,n){return function(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(r){return[2,new Promise(function(r){(0,i.init)(e);var o=[];e.remotes.forEach(function(e){o.push((0,l.loadScript)(e.entry,e.name))}),Promise.all(o).then(function(e){var o=[];e.forEach(function(e){e.loaded?o.push((0,u.loadModule)(e.name,t,n)):(console.error('Webdeck: Could not load script "'.concat(e.name,'" at ').concat(e.url),e.e),o.push(Promise.resolve({name:e.name,scope:t,module:void 0})))}),Promise.all(o).then(function(e){r(e.reduce(function(e,t){return f(s({},e),c({},t.name,f(s({},t),{loaded:!!t.module})))},{}))})})})]})},function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function l(e){a(i,n,o,l,u,"next",e)}function u(e){a(i,n,o,l,u,"throw",e)}l(void 0)})}),function(e,t,n){return o.apply(this,arguments)})},1435:function(e,t,n){"use strict";n.r(t),n.d(t,{loadModule:function(){return u}});var r,o,i=n("4620");function l(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(e){n(e);return}u.done?t(a):Promise.resolve(a).then(r,o)}var u=(o=(r=function(e,t,n){return function(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(r){return[2,new Promise(function(r){var o="".concat(t,"-").concat(e);if(n.has(o))r({name:e,scope:t,module:n.get(o)});else{var l=setTimeout(function(){r({name:e,scope:t,module:void 0})},5e3);(0,i.loadRemote)("".concat(e,"/").concat(t.slice(2))).then(function(i){n.set(o,i),r({name:e,scope:t,module:i}),clearTimeout(l)}).catch(function(){r({name:e,scope:t,module:void 0}),clearTimeout(l)})}})]})},function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function u(e){l(i,n,o,u,a,"next",e)}function a(e){l(i,n,o,u,a,"throw",e)}u(void 0)})}),function(e,t,n){return o.apply(this,arguments)})},6962:function(e,t,n){"use strict";function r(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(e){n(e);return}u.done?t(a):Promise.resolve(a).then(r,o)}n.r(t),n.d(t,{loadScript:function(){return u}});var o,i,l=new Set;var u=(i=(o=function(e,t){return function(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(n){return[2,new Promise(function(n){if(!e&&n({loaded:!1,url:e,name:t}),l.has(e)){n({loaded:!0,url:e,name:t});return}var r=document.createElement("script");r.src=e,r.type="text/javascript",r.async=!0,r.defer=!0,r.onload=function(){l.add(e),n({loaded:!0,url:e,name:t})},r.onerror=function(r){return n({loaded:!1,url:e,name:t,e:r})},document.head.appendChild(r)})]})},function(){var e=this,t=arguments;return new Promise(function(n,i){var l=o.apply(e,t);function u(e){r(l,n,i,u,a,"next",e)}function a(e){r(l,n,i,u,a,"throw",e)}u(void 0)})}),function(e,t){return i.apply(this,arguments)})},538:function(e,t,n){"use strict";n.r(t),n.d(t,{getPhysicalDeck:function(){return y},requestPhysicalDeck:function(){return v}});var r,o,i,l=n("9047");function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(e){n(e);return}u.done?t(a):Promise.resolve(a).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){a(i,r,o,l,u,"next",e)}function u(e){a(i,r,o,l,u,"throw",e)}l(void 0)})}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,u=!1;try{for(o=o.call(e);!(l=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{!l&&null!=o.return&&o.return()}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var n,r,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var d=(r=c(function(){var e,t;return f(this,function(t){switch(t.label){case 0:return[4,navigator.hid.getDevices()];case 1:e=s.apply(void 0,[t.sent(),1])[0],t.label=2;case 2:return t.trys.push([2,5,,6]),[4,e.forget()];case 3:return t.sent(),[4,e.close()];case 4:case 5:return t.sent(),[3,6];case 6:return[2]}})}),function(){return r.apply(this,arguments)}),p=function(e,t){Array.from({length:e||0}).forEach(function(e,n){t(n)})};var y=(o=c(function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,(0,l.getStreamDecks)()];case 1:if(e=s.apply(void 0,[t.sent(),1])[0])return e.close=d,e.drawKeys=function(t){return p(e.NUM_KEYS,t)},[2,[e]];return[2,[]]}})}),function(){return o.apply(this,arguments)});var v=(i=c(function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,(0,l.requestStreamDecks)()];case 1:if(e=s.apply(void 0,[t.sent(),1])[0])return e.close=d,e.drawKeys=function(t){return p(e.NUM_KEYS,t)},[2,[e]];return[2,[]]}})}),function(){return i.apply(this,arguments)})},4778:function(e,t,n){"use strict";n.r(t),n.d(t,{getVirtualDeck:function(){return l},requestVirtualDecks:function(){return u}});var r="virtualdeck",o=function(){localStorage.removeItem(r)},i={default:{PRODUCT_NAME:"VirtualDeck 2x3",NUM_KEYS:6,KEY_COLUMNS:3,KEY_ROWS:2,ICON_SIZE:72,close:o}},l=function(){var e,t,n=localStorage.getItem(r);if(n){;return[(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r,o,i;r=e,o=t,i=n[t],o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})}return e}({},JSON.parse(n)),t=(t={close:o},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e)]}return[]},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=i[e];return localStorage.setItem(r,JSON.stringify(t)),[i[e]]}},5589:function(e){"use strict";e.exports=JSON.parse('{"name":"webdeck","version":"1.2.1","private":true,"dependencies":{"@babel/core":"7.23.7","@babel/preset-react":"7.23.3","@elgato-stream-deck/webhid":"^6.0.0","@module-federation/enhanced":"^0.0.9","@module-federation/runtime":"^0.0.10","@rspack/cli":"0.5.1","@rspack/core":"0.5.1","@rspack/dev-server":"0.5.1","@testing-library/jest-dom":"^5.17.0","@testing-library/react":"^13.4.0","@testing-library/user-event":"^13.5.0","@types/jest":"^27.5.2","@types/node":"^16.18.68","@types/react":"^18.2.45","@types/react-dom":"^18.2.18","babel-loader":"9.1.3","buffer":"^6.0.3","classnames":"^2.3.2","html-webpack-plugin":"5.6.0","install":"^0.13.0","npm":"^10.4.0","query-string":"^8.2.0","react":"^18.2.0","react-dom":"^18.2.0","styled-components":"^6.1.6","web-vitals":"^2.1.4"},"scripts":{"start":"rspack serve","build":"rspack --mode production --no-devtool","start-rc":"react-scripts start","build-rc":"react-scripts build","test-rc":"react-scripts test","eject-rc":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@svgr/webpack":"^8.1.0","@types/styled-components":"^5.1.34","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0","eslint":"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-config-standard-with-typescript":"^43.0.1","eslint-plugin-import":"^2.29.1","eslint-plugin-n":"^16.6.2","eslint-plugin-promise":"^6.1.1","eslint-plugin-react":"^7.33.2","typescript":"^5.3.3"}}')}}]);
//# sourceMappingURL=18.js.map